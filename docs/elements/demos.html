---
templateEngineOverride: njk
hasToc: true
layout: 'layouts/pages/elements.njk'
permalink: '/elements/{{ element.slug }}/demos/'
pagination:
  data: elements
  alias: element
  size: 1
---
<style>
playground-project section {
  display: flex;
  flex-flow: row wrap;
  & playground-preview,
  & playground-file-editor {
    width: 100%;
  }
  & rh-cta {
    margin-inline-start: auto;
  }
}
</style>

<script type="module">
  import 'playground-elements';
</script>

{% set commonFiles %}
{% if isLocal %}
<script type="sample/importmap">
{
  "imports": {{
    importMap.imports
    | dump(2)
    | safe
    | replace('"/assets', '"' + baseUrl + '/assets')
  }}
}
</script>
{% endif %}
{% for filename, config in playground.files %}
{% if not config.label %}
{% set extension = filename.split('.').pop() %}
<script type="sample/{{ extension }}"
        filename="{{ filename }}" {% if config.hidden %}
        hidden
        {%- endif -%}>
  {{-
    config.content
      | safe
      | replace('</' + 'script>', '&lt;/script>')
  -}}
</script>
{% endif %}
{% endfor %}
{% endset %}

{% for filename, config in playground.files %}
{% if config.label %}
{% set extension = filename.split('.').pop() %}
{% set projectId = 'playground-' + element.tagName + '-' + filename.split('.').shift().replace('demo/', '').replaceAll('/', '-') %}
<playground-project id="{{ projectId }}" {% if isLocal %}
                    sandbox-base-url="http://localhost:8080"
                    {%- endif -%}>
  {{ commonFiles | safe }}
  <script type="sample/{{ extension }}"
          filename="{{ filename }}">
    {{-
      config.content
      | safe
      | replace('</' + 'script>', '&lt;/script>')
    -}}
  </script>
  <section>
    <h2 id="demo-{{ config.label | slugify }}">{{ config.label }}</h2>
    {#<rh-cta href="/elements/{{ slug }}/demo/{{ config.label | slugify}}/">View Fullscreen Demo</rh-cta>#}
    <rh-cta><a href="/elements/{{ slug }}/demo/{{ config.label | slugify}}/">View Fullscreen Demo</a></rh-cta>
    <playground-preview project="{{ projectId }}"
                        html-file="{{ filename }}"></playground-preview>
    <playground-file-editor project="{{ projectId }}"
                            filename="{{ filename }}"
                            line-numbers></playground-file-editor>
  </section>
</playground-project>
{% endif %}
{% endfor %}
