*,
*:after,
*:before {
  box-sizing: border-box;
}

:host {
  /* stylelint-disable-next-line rhds/no-unknown-token-name */
  --_active-item-color:
    var(--rh-navigation-active-item-color,
      linear-gradient(to right,
      var(--rh-color-brand-red-light),
      var(--rh-color-purple-40),
      var(--rh-color-purple-60)));

  display: block;
  height: 100%;
  justify-items: center;
  align-content: center;
}

:host([hide]) {
  display: none;
}

@container (min-width: 320px) {
  :host([hide='xs']) {
    display: block;
  }
}

@container (min-width: 567px) {
  :host([hide='sm']) {
    display: block;
  }
}

@container (min-width: 768px) {
  :host([hide='md']) {
    display: block;
  }
}

@container (min-width: 992px) {
  :host([hide='lg']) {
    display: block;
  }
}

@container (min-width: 1200px) {
  :host([hide='xl']) {
    display: block;
  }
}

:host(:is(:focus, :focus-visible)) {
  outline: none;
  outline-style: none;
}

.on {
  &.light {
    --_background-color: var(--rh-color-surface-lighter);
  }

  &.dark {
    --_background-color: var(--rh-color-surface-dark);
  }
}

details {
  width: 100%;
  height: 100%;
  justify-items: center;
  align-content: center;
  border-block-start: var(--rh-border-width-lg) solid transparent;
}

summary {
  --rh-icon-size: var(--rh-size-icon-02);
  --rh-avatar-size: var(--rh-size-icon-02);

  list-style: none;
  display: flex;
  gap: var(--rh-space-md);
  color: var(--rh-color-text-primary) !important;
  text-decoration: none !important;
  text-align: center;
  text-wrap: nowrap;
  place-items: center;
  width: fill-available;
  width: -webkit-fill-available;
  width: -moz-available;
  height: 100%;
  padding-inline: calc(var(--rh-space-sm) + var(--rh-space-xs));
  border-inline: var(--rh-border-width-sm) solid transparent;
  cursor: pointer;

  &:is(:focus-visible, :hover:focus-visible) {
    outline-offset: -2px;
    outline:
      var(--rh-border-width-md)
      solid
      var(--rh-color-interactive-primary-default);
    border-radius: var(--rh-border-radius-default);
  }

  &::marker,
  &::-webkit-details-marker {
    display: none;
  }

  & rh-icon {
    aspect-ratio: unset;

    &[icon='caret-down'] {
      transition: rotate 0.2s;
      will-change: rotate;
    }
  }
}

#details-content {
  width: fill-available;
  width: -webkit-fill-available;
  width: -moz-available;

  @container (min-width: 1200px) {
    position: absolute;
    inset-block-start: 100%;
    inset-inline-start: 0;
    z-index: 1;
    width: 100%;
    background-color: var(--_background-color);
    box-shadow: var(--rh-box-shadow-sm);
    border-end-end-radius: calc(var(--rh-border-radius-default) * 2);
    border-end-start-radius: calc(var(--rh-border-radius-default) * 2);
  }
}

details[open] {
  background-color: var(--_background-color);
  color: var(--rh-color-text-primary);

  /* stylelint-disable-next-line selector-pseudo-element-no-unknown */
  &::details-content {
    display: contents;

    & > * {
      box-sizing: border-box;
    }
  }

  @container (min-width: 1200px) {
    border-block-start-color: var(--rh-color-accent-brand);
  }

  & summary {
    &:focus-visible {
      outline-color: var(--rh-color-interactive-primary-default);
    }

    & rh-icon[icon='caret-down'] {
      rotate: 180deg;
    }
  }
}

details:not(.standalone) {
  border-inline-end: var(--rh-border-width-sm) solid transparent;

  @container (min-width: 1200px) {
    border-inline: var(--rh-border-width-sm) solid transparent;
  }

  &:has(summary:hover) {
    border-block-start-color: var(--rh-color-accent-brand);
  }

  &[open] {
    border-inline-end-color: var(--rh-color-border-subtle);
    border-block-start-color: var(--rh-color-accent-brand);

    @container (min-width: 1200px) {
      border-inline-start-color: var(--rh-color-border-subtle);

      &.dark {
        border-inline-color: transparent;
      }
    }

    summary {
      border-block-start-color: var(--rh-color-text-brand);
    }
  }

  /* stylelint-disable-next-line no-descending-specificity */
  & summary {
    flex-direction: row;
    justify-content: space-between;
    padding: var(--rh-space-lg) var(--rh-space-xl);

    @container (min-width: 1200px) {
      padding: 0 var(--rh-space-lg);
      width: auto;
    }
  }
}

details.standalone {
  display: contents;

  & > * {
    box-sizing: border-box;
  }

  & summary {
    position: relative;
    gap: var(--rh-space-lg);
    height: max-content;
    width: max-content;
    align-items: center;
    padding: var(--rh-space-md) var(--rh-space-lg);
    border: var(--rh-border-width-sm) solid var(--rh-color-border-subtle);
    border-radius: var(--rh-border-radius-pill);

    &:before {
      --_mask: conic-gradient(transparent 0 0);

      content: '';
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      padding: var(--rh-border-width-md);
      background: var(--_active-item-color);
      mask: var(--_mask) content-box exclude, var(--_mask);
      z-index: 1;
    }

    & slot[name='summary'] {
      display: none;
    }

    @container (min-width: 1680px) {
      & slot[name='summary'] {
        display: contents;
      }
    }
  }

  &[open] {
    & summary {
      border-color: transparent;

      &:before {
        --_mask: conic-gradient(#000000 0 0);
      }
    }

    #details-content {
      position: absolute;
      inset-block-start: 100%;
      inset-inline-start: 0;
      z-index: 1;
      width: 100%;
      background-color: var(--_background-color);
      box-shadow: var(--rh-box-shadow-sm);
      border-end-end-radius: calc(var(--rh-border-radius-default) * 2);
      border-end-start-radius: calc(var(--rh-border-radius-default) * 2);
    }

    @container (min-width: 1200px) {
      & #details-content {
        width: fit-content;
        inset-inline-start: unset;
        inset-inline-end: 0;
      }
    }
  }
}

#container {
  display: block;
  height: 100%;
  justify-items: center;
  align-content: center;

  & ::slotted(a) {
    display: flex;
    color: var(--rh-color-text-primary) !important;
    text-decoration: none !important;
  }
}
