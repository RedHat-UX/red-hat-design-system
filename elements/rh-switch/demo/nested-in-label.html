<section>
  <form id="nested-label">
    <fieldset>
      <legend>Nested in a label</legend>
      <label> Status
        <rh-switch name="status"></rh-switch>
      </label>
      <rh-button type="submit">Submit</rh-button>
      <output>Submit to read status</output>
    </fieldset>
  </form>
</section>

<script type="module">
  import 'element-internals-polyfill';
  import '@rhds/elements/rh-switch/rh-switch.js';
  import '@rhds/elements/rh-button/rh-button.js';

  document.getElementById('nested-label').addEventListener('submit', /** @this {HTMLFormElement} */function(event) {
    event.preventDefault();
    this.querySelector('output').textContent = `Dark mode ${this.elements.status.checked ? 'on' : 'off'}`;
  });
</script>

<style>
  section {
    padding: 1em;
  }

  fieldset {
    display: grid;
    grid-template-columns: min-content max-content;
    gap: var(--rh-c-switch--ColumnGap, var(--rh-c-switch__label--PaddingLeft, 1rem));
    &:has(#reversed) {
      grid-template-columns: max-content min-content;
    }
  }

  label {
    color: var(--rh-c-switch__label--Color, var(--rh-global--Color--dark-100, #151515));
  }

  rh-switch:not([checked]) ~ label,
  label:has(~ rh-switch:not([checked])) {
    color: var(--rh-c-switch__input--not-checked__label--Color, var(--rh-global--disabled-color--100, #6a6e73));
  }

  #nested-label fieldset {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
  }

  #nested-label output {
    width: 100%;
  }
</style>
