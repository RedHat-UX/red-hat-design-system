:host {
  display: inline-flex;
  outline: none;
  vertical-align: top;
  cursor: pointer;

  --_switch-width: 40px;
  --_switch-height: 24px;
  --_switch-handle-size: 14px;
  --_switch-track-background-color: var(--rh-color-gray-60, #4d4d4d);
  --_margin-inline: 5px; /* non standard spacer */
}

[hidden] {
  display: none !important;
}

#container {
  display: inline-flex;
  align-items: center;
  gap: var(--rh-space-lg, 16px);
}

.message {
  color: var(--rh-color-text-secondary);
}

#switch {
  align-items: center;
  display: inline-flex;
  flex-shrink: 0;
  position: relative;
  width: var(--_switch-width);
  height: var(--_switch-height);
  border-radius: var(--rh-border-radius-pill, 64px);

  :host(:is(:focus, :focus-within)) & {
    outline: var(--rh-border-width-md, 2px) solid var(--rh-color-border-interactive);
    outline-offset: var(--rh-space-sm, 6px);
  }

  /* track */
  &:before {
    content: '';
    display: flex;
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    justify-content: center;
    align-items: center;
    background-color: var(--_switch-track-background-color);
  }

  /* handle */
  &:after {
    content: '';
    height: var(--_switch-handle-size);
    width: var(--_switch-handle-size);
    border-radius: var(--rh-border-radius-pill, 64px);
    transform-origin: center;
    z-index: 0;
    background-color: var(--_switch-handle-color, var(--rh-color-surface-lightest, #ffffff));
    margin-inline: var(--_margin-inline);
    translate: 0%;
    transition: translate 0.25s ease 0s;
  }
}

.checked {
  --_switch-track-background-color:
    var(--_switch-checked,
      var(--rh-color-accent-base));

  & .message {
    color: var(--rh-color-text-primary);
  }

  & #switch:after {
    translate:
      calc(var(--_switch-width) - (var(--_switch-handle-size) +
        (var(--_margin-inline) * 2)));
  }

  &.rtl #switch:after {
    translate:
      calc(-1 * (
          var(--_switch-width) - (var(--_switch-handle-size) +
          (var(--_margin-inline) * 2))
        ));
  }
}

svg {
  fill: currentcolor;
  margin-inline: var(--_margin-inline);
  font-size: var(--rh-font-size-body-text-xs, 0.75rem);
  color: var(--_switch-handle-color, var(--rh-color-icon-secondary));
  position: absolute;
  z-index: 1;
}

.dark {
  --_switch-track-background-color: var(--rh-color-gray-40, #a3a3a3); /* no disabled token yet */
  --_switch-handle-color: var(--rh-color-surface-dark-alt, #292929);

  &:after {
    box-shadow: var(--rh-box-shadow-sm, 0 2px 4px 0 rgba(21, 21, 21, 0.2));
  }

  &.checked {
    --_switch-track-background-color:
      var(--_switch-checked,
        var(--rh-color-accent-base));
  }
}

:host(:disabled) {
  pointer-events: none;
  cursor: not-allowed;

  --_switch-track-background-color: var(--rh-color-gray-30, #c7c7c7);

  & .message {
    color: var(--rh-color-gray-50, #707070);
  }

  & .dark {
    --_switch-track-background-color: var(--rh-color-gray-60, #4d4d4d);

    & ::slotted(*),
    & span {
      color: var(--rh-color-gray-40, #a3a3a3);
    }
  }
}
