{"version":3,"file":"uxdot-sidenav.js","sourceRoot":"","sources":["../../../../../uxdot/uxdot-sidenav.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, isServer } from 'lit';\n\nimport { classMap } from 'lit/directives/class-map.js';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { property } from 'lit/decorators/property.js';\n\nimport '@rhds/elements/rh-icon/rh-icon.js';\n\nimport styles from './uxdot-sidenav.css';\nimport itemStyles from './uxdot-sidenav-item.css';\nimport dropdownStyles from './uxdot-sidenav-dropdown.css';\nimport dropdownMenuStyles from './uxdot-sidenav-dropdown-menu.css';\nimport dropdownMenuItemStyles from './uxdot-sidenav-dropdown-menu-item.css';\n\n@customElement('uxdot-sidenav')\nexport class UxdotSideNav extends LitElement {\n  static shadowRootOptions = { ...LitElement.shadowRootOptions, delegatesFocus: true };\n\n  static styles = [styles];\n\n  @property({ type: Boolean, reflect: true }) open = false;\n\n  @property() trigger?: string;\n\n  #triggerElement: HTMLElement | null = null;\n\n  #closeButton: HTMLElement | null = null;\n\n\n  async connectedCallback() {\n    super.connectedCallback();\n\n    const root = this.getRootNode() as Document | ShadowRoot;\n    if (this.trigger) {\n      this.#triggerElement = root.getElementById(this.trigger);\n    }\n    if (!isServer) {\n      this.#triggerElement?.addEventListener('click', this.#onTriggerClick.bind(this));\n      this.addEventListener('click', this.#onClick.bind(this));\n      this.addEventListener('keydown', this.#onKeydown.bind(this));\n      window.addEventListener('keyup', this.#onKeyup.bind(this));\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.#triggerElement?.removeEventListener('click', this.#onTriggerClick.bind(this));\n    window.removeEventListener('keyup', this.#onKeyup);\n  }\n\n  render() {\n    return html`\n      <div id=\"container\" part=\"container\">\n        <div id=\"close-button-container\">\n          <button id=\"close-button\"\n              part=\"close-button\"\n              aria-label=\"Close dialog\"\n              @keydown=${this.#onKeydownCloseButton}\n              @click=${this.toggle}>\n            <rh-icon set=\"ui\" icon=\"close\" size=\"lg\"></rh-icon>\n          </button>\n        </div>\n        <nav part=\"nav\" aria-label=\"Main menu\">\n          <slot></slot>\n        </nav>\n      </div>\n      <div id=\"overlay\" part=\"overlay\" ?hidden=${!this.open}></div>\n    `;\n  }\n\n  updated() {\n    this.#closeButton = this.shadowRoot?.getElementById('close-button') ?? null;\n  }\n\n  async toggle(trapFocus = true) {\n    this.open = !this.open;\n    await this.updateComplete;\n\n    if (trapFocus) {\n      if (this.open) {\n        this.#closeButton?.focus();\n      } else {\n        this.#triggerElement?.focus();\n      }\n    }\n  }\n\n  #onTriggerClick(event: Event) {\n    event.preventDefault();\n    this.toggle();\n  }\n\n  #onClick(event: Event) {\n    const path = event.composedPath();\n    if (!path.includes(this)) {\n      this.toggle();\n    }\n  }\n\n  #onKeydownCloseButton(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Enter':\n        event.preventDefault();\n        this.toggle();\n        return;\n    }\n  }\n\n  #onKeydown(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Escape': {\n        if (!this.open) {\n          return;\n        }\n        this.toggle();\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  #onKeyup(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Tab':\n        this.#onTabKeyup(event);\n        break;\n      default:\n        break;\n    }\n  }\n\n  close(trapFocus = true) {\n    if (!this.open) {\n      return;\n    }\n    this.toggle(trapFocus);\n  }\n\n  #onTabKeyup(event: KeyboardEvent) {\n    const { target } = event;\n    if (target instanceof Node && !this.contains(target)) {\n      this.close(false);\n    }\n  }\n}\n\n@customElement('uxdot-sidenav-item')\nexport class UxdotSideNavItem extends LitElement {\n  static styles = [itemStyles];\n\n  @property({ type: Boolean, reflect: true }) active = false;\n\n  @property() href?: string;\n\n  render() {\n    const { active } = this;\n    return html`\n      <a class=\"${classMap({ active })}\" href=\"${this.href}\"><slot></slot></a>\n    `;\n  }\n}\n\n@customElement('uxdot-sidenav-dropdown')\nexport class UxdotSideNavDropdown extends LitElement {\n  static styles = [dropdownStyles];\n\n  @property({ type: Boolean, reflect: true }) expanded = false;\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (!isServer) {\n      this.addEventListener('click', this.#onClick);\n    }\n  }\n\n  render() {\n    return html`\n      <slot></slot>\n    `;\n  }\n\n  async #onClick(event: Event) {\n    if (!event.composedPath().some(node => node instanceof HTMLAnchorElement)) {\n      event.preventDefault();\n      this.expanded = !this.expanded;\n      this.querySelector('details')?.toggleAttribute('open', this.expanded);\n      // trigger change event which evokes the mutation on this.expanded\n      this.dispatchEvent(new CustomEvent('expand', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          expanded: this.expanded,\n          toggle: this,\n        },\n      }));\n    }\n  }\n}\n\n@customElement('uxdot-sidenav-dropdown-menu')\nexport class UxdotSideNavDropdownMenu extends LitElement {\n  static styles = [dropdownMenuStyles];\n\n  render() {\n    return html`\n      <slot></slot>\n    `;\n  }\n}\n\n@customElement('uxdot-sidenav-dropdown-menu-item')\nexport class UxdotSideNavDropdownMenuItem extends UxdotSideNavItem {\n  static styles = [itemStyles, dropdownMenuItemStyles];\n}\n"]}