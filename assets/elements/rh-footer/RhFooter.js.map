{"version":3,"file":"RhFooter.js","sourceRoot":"","sources":["RhFooter.ts"],"names":[],"mappings":"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","sourcesContent":["import type { ColorPalette } from '../../lib/context/color.js';\n\nimport { LitElement, html } from 'lit';\nimport { html as staticHtml, unsafeStatic } from 'lit/static-html.js';\nimport { property } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\n\nimport { getRandomId } from '@patternfly/pfe-core/functions/random.js';\nimport { Logger } from '@patternfly/pfe-core/controllers/logger.js';\n\nimport style from './rh-footer.css';\nimport { responsiveStyles } from './rh-footer-responsive.css.js';\n\nimport { tabletLandscapeBreakpoint } from '../../lib/tokens.js';\nimport { colorContextProvider } from '../../lib/context/color.js';\n// TODO: use ScreenSizeController\nimport { MatchMediaController } from '../../lib/MatchMediaController.js';\n\nimport './rh-footer-social-link.js';\nimport './rh-footer-links.js';\nimport './rh-footer-block.js';\nimport './rh-global-footer.js';\n\nimport '@patternfly/pfe-icon';\nimport '@patternfly/pfe-accordion';\n\nfunction isHeader(tagName: string) {\n  return !!tagName.match(/^H[1-6]$/i);\n}\n\n/**\n * @element rh-footer\n * @csspart base - main footer element, containing all footer content\n * @slot    base - Overrides everything. Do not use.\n * @slot    header - Overrides `header-*`, `logo`, `social-links`\n * @csspart header - footer header, typically containing main logo and social links\n * @slot    header-primary - primary footer header content, e.g. main logo. Overrides `logo`\n * @csspart header-primary - primary footer header content, e.g. main logo\n * @slot    header-secondary - secondary footer header content, e.g. social links. Overrides `social-links`\n * @csspart header-secondary - secondary footer header content, e.g. social links\n * @slot    logo - main page or product logo. Defaults to Red Hat corporate logo\n * @csspart logo - main page or product logo container\n * @slot    social-links - social media links (icons). Contains a default set of links\n * @csspart social-links - social links container `<rh-footer-links>`\n * @slot    main - main footer content. Overrides `main-*`\n * @csspart main - main content container.\n * @slot    main-primary - main footer region. typically a columnar grid\n * @csspart main-primary - container for main footer links\n * @slot    links - main footer links\n * @csspart links - container for main footer links\n * @csspart links-accordion-header - mobile links accordion header element\n * @csspart links-accordion-panel - mobile links panel container element\n * @slot    main-secondary - typically contains prose or promotional content\n * @csspart main-secondary - container fro prose or promotional content\n * @slot    global - must contain `<rh-global-footer>`\n *\n * @cssprop --rh-footer-icon-color - {@default #8a8d90}\n * @cssprop --rh-footer-icon-color-hover - {@default #b8bbbe}\n * @cssprop --rh-footer-border-color - {@default #6a6e73}\n * @cssprop --rh-footer-accent-color - {@default #e00}\n * @cssprop --rh-footer-section-side-gap - {@default 32px}\n * @cssprop --rh-footer-links-gap - {@default 8px}\n * @cssprop --rh-footer-link-header-font-size - {@default 0.875em}\n */\nexport class RhFooter extends LitElement {\n  static readonly version = '{{version}}';\n\n  static readonly styles = [style, responsiveStyles];\n\n  /**\n   * Isomorphic import.meta.url function\n   * Requires a node.js dom shim that sets window.location\n   */\n  static getImportURL(relativeLocation: string | URL): string | URL {\n    const url = new URL(relativeLocation, import.meta.url);\n    if (url.protocol === 'file:') {\n      return new URL(relativeLocation, window.location.href);\n    }\n    return url;\n  }\n\n  #matchMedia = new MatchMediaController(this, `(max-width: ${tabletLandscapeBreakpoint})`);\n\n  #logger = new Logger(this);\n\n  @colorContextProvider()\n  @property({ reflect: true, attribute: 'color-palette' }) colorPalette: ColorPalette = 'darker';\n\n  override connectedCallback() {\n    super.connectedCallback();\n    // wire up accessbility aria-labels with unordered lists\n    this.updateAccessibility();\n  }\n\n  override render() {\n    const isMobile = this.#matchMedia.mediaQueryList?.matches ?? false;\n    return html`\n      <footer class=\"base ${classMap({ isMobile })}\" part=\"base\">\n        <slot name=\"base\">\n          <div class=\"section header\" part=\"section header\">\n            <slot name=\"header\">\n              <div class=\"header-primary\" part=\"header-primary\">\n                <slot name=\"header-primary\">\n                  <div class=\"logo\" part=\"logo\">\n                    <slot name=\"logo\">\n                      <a href=\"/en\">\n                        <img alt=\"Red Hat\" src=\"https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg\"/>\n                      </a>\n                    </slot>\n                  </div>\n                </slot>\n              </div>\n              <div class=\"header-secondary\" part=\"header-secondary\">\n                <slot name=\"header-secondary\">\n                  <div class=\"social-links\">\n                    <rh-footer-links class=\"social-links-item\"\n                      part=\"social-links\"\n                      aria-label=\"Red Hat social media links\">\n                      <slot name=\"social-links\"></slot>\n                    </rh-footer-links>\n                  </div>\n                </slot>\n              </div>\n            </slot>\n          </div>\n          <div class=\"section main\" part=\"section main\">\n            <slot name=\"main\">\n              <div class=\"main-primary\" part=\"main-primary\">\n                <slot name=\"main-primary\">\n                  <div class=\"links\" part=\"links\">\n                    ${this.#renderLinksTemplate(isMobile)}\n                  </div>\n                </slot>\n              </div>\n              <div class=\"main-secondary\" part=\"main-secondary\">\n                <slot name=\"main-secondary\"></slot>\n              </div>\n            </slot>\n          </div>\n          <slot name=\"global\"></slot>\n        </slot>\n      </footer>\n    `;\n  }\n\n  #renderLinksTemplate(isMobile = false) {\n    // gather all of the links that need to be wrapped into the accordion\n    // give them a designation of either 'header' or 'panel'\n    const children = Array.from(this.querySelectorAll(':scope > [slot^=links]'), ref => ({\n      type: isHeader(ref.tagName) ? 'header' : 'panel',\n      ref,\n    }));\n\n    // Update the dynamic slot names if on mobile\n    children.forEach(({ ref }, i) => ref.setAttribute('slot', isMobile ? `links-${i}` : 'links'));\n\n    return !(isMobile && children) ? html`\n      <slot name=\"links\"></slot>\n      ` : html`\n      <pfe-accordion on=\"dark\" color-palette=\"darkest\">${children.map((child, index) => staticHtml`\n        <pfe-accordion-${unsafeStatic(child.type)} part=\"links-accordion-${child.type}\">\n          <slot name=\"links-${index}\"></slot>\n         </pfe-accordion-${unsafeStatic(child.type)}>`)}\n      </pfe-accordion>\n    `;\n  }\n\n  /**\n   * Get any `<ul>`s that are in the designated link slots\n   * and syncronously update each list and header if we need to.\n   */\n  public updateAccessibility(): void {\n    const listsSelector = ':is([slot^=links],[slot=footer-links-primary],[slot=footer-links-secondary]):is(ul)';\n    for (const list of this.querySelectorAll(listsSelector)) {\n      // if we already have a label then we assume that the user\n      // has wired this up themselves.\n      if (!list.hasAttribute('aria-labelledby')) {\n        // get the corresponding header that should be the previous sibling\n        const header = isHeader(list.previousElementSibling?.tagName ?? '') ? list.previousElementSibling : null;\n        if (!header) {\n          return this.#logger.warn('This links set doesn\\'t have a valid header associated with it.');\n        } else {\n          // add an ID to the header if we need it\n          header.id ||= getRandomId('rh-footer');\n          // add that header id to the aria-labelledby tagk\n          list.setAttribute('aria-labelledby', header.id);\n        }\n      }\n    }\n  }\n}\n"]}