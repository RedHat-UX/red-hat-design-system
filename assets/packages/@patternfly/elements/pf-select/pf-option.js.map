{"version":3,"file":"pf-option.js","sourceRoot":"","sources":["pf-option.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, type PropertyValues } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { queryAssignedNodes } from 'lit/decorators/query-assigned-nodes.js';\nimport { property } from 'lit/decorators/property.js';\nimport { classMap } from 'lit/directives/class-map.js';\n\nimport { getRandomId } from '@patternfly/pfe-core/functions/random.js';\nimport { InternalsController } from '@patternfly/pfe-core/controllers/internals-controller.js';\n\nimport styles from './pf-option.css';\n\n/**\n * Option within a listbox\n *\n * @slot -\n *        option text\n * @slot icon\n *        optional icon\n * @slot description\n *        optional description\n */\n@customElement('pf-option')\nexport class PfOption extends LitElement {\n  static readonly styles = [styles];\n\n  /** whether option is disabled */\n  @property({ type: Boolean, reflect: true }) disabled = false;\n\n  /** form value for this option */\n  @property({ reflect: true })\n  get value() {\n    return this.#value ?? this.textContent ?? '';\n  }\n\n  set value(v: string) {\n    this.#value = v;\n  }\n\n  /** whether option is selected */\n  @property({ type: Boolean }) selected = false;\n\n  /** whether option is active descendant */\n  @property({ type: Boolean }) active = false;\n\n  /** Optional option description; overridden by description slot. */\n  @property() description = '';\n\n  @queryAssignedNodes({ slot: '', flatten: true })\n  private _slottedText!: Node[];\n\n  /**\n   * this option's position relative to the other options\n   */\n  set posInSet(posInSet: number | null) {\n    this.#internals.ariaPosInSet = `${Math.max(0, posInSet ?? 0)}`;\n  }\n\n  get posInSet() {\n    const parsed = parseInt(this.#internals.ariaPosInSet ?? '0');\n    return Number.isNaN(parsed) ? null : parsed;\n  }\n\n  /**\n   * total number of options\n   */\n  set setSize(setSize: number | null) {\n    this.#internals.ariaSetSize = `${Math.max(0, setSize ?? 0)}`;\n  }\n\n  get setSize() {\n    try {\n      const int = parseInt(this.#internals.ariaSetSize ?? '0');\n      if (Number.isNaN(int)) {\n        return 0;\n      } else {\n        return int;\n      }\n    } catch {\n      return 0;\n    }\n  }\n\n  #value?: string;\n\n  #internals = InternalsController.of(this, { role: 'option' });\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.id ||= getRandomId();\n  }\n\n  render() {\n    const { disabled, active } = this;\n    return html`\n      <div id=\"outer\" class=\"${classMap({ active, disabled })}\">\n        <input type=\"checkbox\"\n               aria-hidden=\"true\"\n               role=\"presentation\"\n               tabindex=\"-1\"\n               ?checked=\"${this.selected}\"\n               ?disabled=\"${this.disabled}\">\n        <slot name=\"icon\"></slot>\n        <span>\n          <slot name=\"create\"></slot>\n          <slot></slot>\n        </span>\n        <svg ?hidden=\"${!this.selected}\"\n             viewBox=\"0 0 512 512\"\n             fill=\"currentColor\"\n             aria-hidden=\"true\">\n          <path d=\"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z\"></path>\n        </svg>\n        <slot id=\"description\" name=\"description\">${this.description ?? ''}</slot>\n      </div>\n    `;\n  }\n\n  willUpdate(changed: PropertyValues<this>) {\n    if (changed.has('selected') &&\n      // don't fire on initialization\n      !(changed.get('selected') === undefined) && this.selected === false) {\n      this.#internals.ariaSelected = this.selected ? 'true' : 'false';\n    }\n    if (changed.has('disabled')) {\n      this.#internals.ariaDisabled = String(!!this.disabled);\n    }\n  }\n\n  /**\n   * text content within option (used for filtering)\n   */\n  get optionText() {\n    return this._slottedText.map(node => node.textContent).join('').trim();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'pf-option': PfOption;\n  }\n}\n"]}