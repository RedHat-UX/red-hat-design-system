{"version":3,"file":"pf-switch.spec.js","sourceRoot":"","sources":["pf-switch.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import type { A11yTreeSnapshot } from '@patternfly/pfe-tools/test/a11y-snapshot.js';\nimport { expect, html, nextFrame } from '@open-wc/testing';\nimport { createFixture } from '@patternfly/pfe-tools/test/create-fixture.js';\nimport { a11ySnapshot } from '@patternfly/pfe-tools/test/a11y-snapshot.js';\n\nimport { PfSwitch } from '@patternfly/elements/pf-switch/pf-switch.js';\n\ndescribe('<pf-switch>', function() {\n  it('imperatively instantiates', function() {\n    expect(document.createElement('pf-switch')).to.be.an.instanceof(PfSwitch);\n  });\n\n  describe('simply instantiating', function() {\n    let element: PfSwitch;\n    let snapshot: A11yTreeSnapshot;\n    beforeEach(async function() {\n      const container = await createFixture<PfSwitch>(html`\n        <div>\n          <pf-switch></pf-switch>\n        </div>\n      `);\n      element = container.querySelector('pf-switch')!;\n      snapshot = await a11ySnapshot({ selector: 'pf-switch' });\n    });\n    it('should upgrade', async function() {\n      const klass = customElements.get('pf-switch');\n      expect(element)\n          .to.be.an.instanceOf(klass)\n          .and\n          .to.be.an.instanceOf(PfSwitch);\n    });\n    it('has accessible role', function() {\n      expect(snapshot.role).to.equal('switch');\n    });\n    it('has accessible checked field', function() {\n      expect(snapshot.role).to.equal('switch');\n    });\n    it('requires accessible name', function() {\n      // Double negative - this would fail an accessibility audit,\n      // but that failure would be correct, because the template instantiated\n      // in this test's beforeeach hook does not have an accessible name\n      expect(snapshot.name).to.not.be.ok;\n    });\n  });\n\n  describe('with labels for on and off state', function() {\n    let element: PfSwitch;\n    let snapshot: A11yTreeSnapshot;\n    beforeEach(async function() {\n      const container = await createFixture<PfSwitch>(html`\n        <div>\n          <pf-switch id=\"switch\"></pf-switch>\n          <label for=\"switch\">\n            <span data-state=\"on\">Message when on</span>\n            <span data-state=\"off\" hidden>Message when off</span>\n          </label>\n        </div>\n        `);\n      element = container.querySelector('pf-switch')!;\n      snapshot = await a11ySnapshot({ selector: '#switch' });\n    });\n\n    it('is accessible', function() {\n      expect(snapshot.role).to.equal('switch');\n      expect(snapshot.name).to.be.ok;\n      expect(snapshot.checked).to.be.false;\n    });\n\n    it('should show the label for the unchecked state', function() {\n      expect(snapshot.name).to.equal('Message when off');\n    });\n\n    describe('clicking the switch', function() {\n      beforeEach(async function() {\n        element.click();\n        await element.updateComplete;\n        await nextFrame();\n        snapshot = await a11ySnapshot({ selector: '#switch' });\n      });\n      it('should be checked', function() {\n        expect(element.checked).to.be.true;\n        expect(snapshot.checked).to.be.true;\n      });\n      it('should show the label for the checked state', function() {\n        expect(snapshot.name).to.equal('Message when on');\n      });\n    });\n  });\n\n  describe('when checked attr is present', function() {\n    let element: PfSwitch;\n    let snapshot: A11yTreeSnapshot;\n    beforeEach(async function() {\n      element = await createFixture<PfSwitch>(html`\n        <pf-switch id=\"switch\" checked></pf-switch>\n      `);\n\n      await element.updateComplete;\n      await nextFrame();\n      snapshot = await a11ySnapshot({ selector: '#switch' });\n    });\n\n    it('should be checked', function() {\n      expect(element.checked).to.be.true;\n      expect(snapshot.checked).to.be.true;\n    });\n  });\n\n  describe('when checked attr is not present', function() {\n    let element: PfSwitch;\n    let snapshot: A11yTreeSnapshot;\n    beforeEach(async function() {\n      element = await createFixture<PfSwitch>(html`\n        <pf-switch id=\"switch\"></pf-switch>\n      `);\n\n      await element.updateComplete;\n      await nextFrame();\n      snapshot = await a11ySnapshot({ selector: '#switch' });\n    });\n\n    it('should be checked', function() {\n      expect(element.checked).to.be.false;\n      expect(snapshot.checked).to.be.false;\n    });\n  });\n\n\n  describe('when checked and show-check-icon attrs are present', function() {\n    let element: PfSwitch;\n    beforeEach(async function() {\n      const container = await createFixture<PfSwitch>(html`\n        <div>\n          <pf-switch id=\"switch\" show-check-icon checked></pf-switch>\n          <label for=\"switch\">\n            <span data-state=\"on\">Message when on</span>\n            <span data-state=\"off\" hidden>Message when off</span>\n          </label>\n        </div>\n      `);\n      element = container.querySelector('pf-switch')!;\n    });\n    it('should display a check icon', async function() {\n      // TODO: can we test this without inspecting the private shadowRoot?\n      const svg = element.shadowRoot.querySelector('svg');\n      expect(svg).to.be.ok;\n      expect(svg?.hasAttribute('hidden')).to.be.false;\n    });\n  });\n\n  describe('when checked and show-check-icon attrs are present', function() {\n    let element: PfSwitch;\n    beforeEach(async function() {\n      element = await createFixture<PfSwitch>(html`\n        <pf-switch id=\"switch\" show-check-icon checked></pf-switch>\n        <label for=\"switch\">\n          <span data-state=\"on\">Message when on</span>\n          <span data-state=\"off\" hidden>Message when off</span>\n        </label>\n      `);\n    });\n    it('should display a check icon', async function() {\n      // TODO: can we test this without inspecting the private shadowRoot?\n      const svg = element.shadowRoot.querySelector('svg');\n      expect(svg).to.be.ok;\n      expect(svg?.hasAttribute('hidden')).to.be.false;\n    });\n  });\n\n  describe('when nested inside a label element', function() {\n    let label: HTMLLabelElement;\n    let element: PfSwitch;\n    let snapshot: A11yTreeSnapshot;\n    beforeEach(async function() {\n      label = await createFixture<HTMLLabelElement>(html`\n        <label>\n          <span>Dark Mode</span>\n          <pf-switch id=\"switch\"></pf-switch>\n        </label>\n      `);\n      element = label.querySelector('pf-switch')!;\n      snapshot = await a11ySnapshot({ selector: 'pf-switch' });\n    });\n    it('does not hide label', function() {\n      expect(label.hidden).to.be.false;\n    });\n    it('has an accessible name', function() {\n      expect(snapshot.name).to.equal('Dark Mode');\n    });\n    describe('clicking the label', function() {\n      beforeEach(function() {\n        label.click();\n      });\n      it('toggles the state', function() {\n        expect(element.checked).to.be.true;\n      });\n    });\n    describe('clicking the switch', function() {\n      beforeEach(function() {\n        element.click();\n      });\n      it('toggles the state', function() {\n        expect(element.checked).to.be.true;\n      });\n    });\n  });\n\n  // TODO: test keyboard a11y with wtr sendKeys\n});\n"]}