{"version":3,"file":"pf-search-input.js","sourceRoot":"","sources":["pf-search-input.ts"],"names":[],"mappings":"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","sourcesContent":["import type { Placement } from '@patternfly/pfe-core/controllers/floating-dom-controller.js';\nimport type { TemplateResult } from 'lit';\n\nimport { LitElement, html, isServer } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { property } from 'lit/decorators/property.js';\nimport { query } from 'lit/decorators/query.js';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { classMap } from 'lit/directives/class-map.js';\n\nimport { ComboboxController } from '@patternfly/pfe-core/controllers/combobox-controller.js';\nimport { SlotController } from '@patternfly/pfe-core/controllers/slot-controller.js';\nimport { InternalsController } from '@patternfly/pfe-core/controllers/internals-controller.js';\nimport { FloatingDOMController } from '@patternfly/pfe-core/controllers/floating-dom-controller.js';\n\nimport { observes } from '@patternfly/pfe-core/decorators/observes.js';\nimport { PfOption } from '../pf-select/pf-option.js';\nimport styles from './pf-search-input.css';\n\n/** Fired when a `<pf-search-input>` element's value changes */\nexport class PfSearchChangeEvent extends Event {\n  constructor() {\n    super('change', { bubbles: true });\n  }\n}\n\n/**\n * A search input lets users type in words to find specific items or information.\n * As they type, it can show matching results to help them quickly find what they are looking for.\n *\n * A search input consists of a text field where users can type to find specific content or items.\n * Unlike selects or dropdowns, which offer predefined options, a search input lets users enter\n * their own keywords to filter or locate results. It includes a clear (Ã—) button to easily\n * remove the current input, allowing users to start a new search quickly.\n *\n * @summary Allows users to search through a list for specific search terms\n * @alias Search Input\n *\n * @fires open - when the menu toggles open\n * @fires close - when the menu toggles closed\n */\n@customElement('pf-search-input')\nexport class PfSearchInput extends LitElement {\n  static readonly styles: CSSStyleSheet[] = [styles];\n\n  static readonly formAssociated = true;\n\n  static override readonly shadowRootOptions: ShadowRootInit = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n\n  /** Accessible label for the search input */\n  @property({ attribute: 'accessible-label' }) accessibleLabel?: string;\n\n  /** Whether the search input is disabled */\n  @property({ type: Boolean, reflect: true }) disabled = false;\n\n  /** Whether the search input's listbox is expanded */\n  @property({ type: Boolean, reflect: true }) expanded = false;\n\n  /** Current form value */\n  @property() value?: string;\n\n  /** Placeholder entry. Overridden by the `placeholder` slot */\n  @property() placeholder?: string;\n\n  /**\n   * Indicates initial popover position.\n   * There are 6 options: `bottom`, `top`, `top-start`, `top-end`, `bottom-start`, `bottom-end`.\n   * Default is `bottom`.\n   */\n  @property({ reflect: true }) position: Placement = 'bottom';\n\n  @query('#toggle-input') private _toggleInput?: HTMLInputElement;\n\n  @query('#toggle-button') private _toggleButton?: HTMLDivElement;\n\n  @query('#listbox') private _listbox?: HTMLElement;\n\n  @query('#listbox-container') private _listboxContainer?: HTMLElement;\n\n  @query('#placeholder') private _placeholder?: PfOption;\n\n  #internals = InternalsController.of(this);\n\n  #float = new FloatingDOMController(this, { content: () => this._listboxContainer });\n\n  #slots = new SlotController(this, null, 'placeholder');\n\n  /** True when the user just clicked the close button */\n  #clickedCloseButton = false;\n  #setExpanded = false;\n\n  #combobox = ComboboxController.of(this, {\n    getItems: () => this.options,\n    getFallbackLabel: () => this.accessibleLabel\n      || this.#internals.computedLabelText\n      || this.placeholder\n      || this.#slots.getSlotted('placeholder').map(x => x.textContent).join(''),\n    getListboxElement: () => this._listbox ?? null,\n    getToggleButton: () => this._toggleButton ?? null,\n    getComboboxInput: () => this._toggleInput ?? null,\n    isExpanded: () => this.#setIsExpanded(),\n    requestShowListbox: () => this.#showListbox(),\n    requestHideListbox: () => void (this.expanded &&= false),\n    setItemHidden: (item, hidden) => (item.id !== 'placeholder') && void (item.hidden = hidden),\n    isItem: item => item instanceof PfOption,\n    setItemActive: (item, active) => this.#setItemActive(item, active),\n    setItemSelected: (item, selected) => this.#setItemSelected(item, selected),\n  });\n\n  connectedCallback(): void {\n    super.connectedCallback();\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n  }\n\n  /** List of options */\n  get options(): PfOption[] {\n    if (isServer) {\n      return []; // TODO: expose a DOM property to allow setting options in SSR scenarios\n    } else {\n      return [\n        this._placeholder,\n        ...Array.from(this.querySelectorAll('pf-option')),\n      ].filter((x): x is PfOption => !!x && !x.hidden);\n    }\n  }\n\n  override render(): TemplateResult<1> {\n    const { disabled, expanded, placeholder } = this;\n    const { anchor = 'bottom', alignment = 'start', styles = {} } = this.#float;\n    const { height, width } = this.getBoundingClientRect?.() || {};\n\n    return html`\n      <div id=\"outer\"\n           style=\"${styleMap(styles)}\"\n           class=\"${classMap({ disabled, expanded, [anchor]: !!anchor, [alignment]: !!alignment })}\">\n        <div id=\"toggle\">\n          <div class=\"search-icon\">\n            <pf-icon size=\"md\" icon=\"search\" set=\"fas\">search</pf-icon>\n          </div>\n          <input id=\"toggle-input\"\n                 aria-disabled=\"${disabled}\"\n                 placeholder=\"${placeholder}\"\n                 @input=\"${this.#onChange}\"\n                 @keyup=\"${this.#onSubmit}\"\n                 @keydown=\"${this.#onKeyDown}\">\n          <div class=\"close-button-container\">\n            <pf-button id=\"toggle-button\"\n                       class=\"close-button\"\n                       plain\n                       label=\"Close\"\n                       ?hidden=\"${this.#hideCloseButton()}\"\n                       @click=\"${this.#onClickCloseButton}\">\n              <pf-icon size=\"md\"\n                       icon=\"close\"\n                       set=\"patternfly\">close</pf-icon>\n            </pf-button>\n          </div>\n        </div>\n        <div id=\"listbox-container\"\n             ?hidden=\"${!expanded}\"\n             tabindex=\"-1\"\n             style=\"${styleMap({\n               marginTop: `${height || 0}px`,\n               width: width ? `${width}px` : 'auto',\n             })}\">\n          <div id=\"listbox\">\n            ${this.#combobox.renderItemsToShadowRoot()}\n            <!-- insert \\`<pf-option>\\` and/or \\`<pf-option-groups>\\` here -->\n            <slot ?hidden=\"${!ComboboxController.supportsCrossRootActiveDescendant}\"></slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  @observes('disabled')\n  private disabledChanged() {\n    this.#combobox.disabled = this.disabled;\n  }\n\n  @observes('expanded')\n  private async expandedChanged(old: boolean, expanded: boolean) {\n    if (this.dispatchEvent(new Event(this.expanded ? 'close' : 'open'))) {\n      if (expanded) {\n        this.#doExpand();\n      } else {\n        this.#doCollapse();\n      }\n    }\n  }\n\n  @observes('value')\n  private valueChanged() {\n    this.#internals.setFormValue(this.value ?? '');\n    this.dispatchEvent(new PfSearchChangeEvent());\n  }\n\n  async #doExpand() {\n    try {\n      await this.#float.show({ placement: this.position || 'bottom', flip: true });\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  async #doCollapse() {\n    try {\n      await this.#float.hide();\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Opens the dropdown\n   */\n  async show(): Promise<void> {\n    this.expanded = true;\n    await this.updateComplete;\n  }\n\n  /**\n   * Closes listbox\n   */\n  async hide(): Promise<void> {\n    this.expanded = false;\n    await this.updateComplete;\n  }\n\n  /**\n   * toggles popup based on current state\n   */\n  async toggle(): Promise<void> {\n    if (this.expanded) {\n      await this.hide();\n    } else {\n      await this.show();\n    }\n  }\n\n  #onClickCloseButton() {\n    this._toggleInput!.value = '';\n    this.#updateValue(this._toggleInput?.value ?? '');\n    this.#clickedCloseButton = true;\n    this._toggleInput?.focus();\n  }\n\n  #hideCloseButton() {\n    if (!isServer) {\n      return !this.expanded && this._toggleInput?.value.trim() === ''; // SSR or server-side environment: don't hide the element\n    }\n    return false;\n  }\n\n  #onChange() {\n    this.#updateValue(this._toggleInput?.value ?? '');\n  }\n\n  #onSubmit(event: KeyboardEvent) {\n    if (event.key === 'Enter' || event.key === ' ') {\n      this.dispatchEvent(new PfSearchChangeEvent());\n    }\n  }\n\n  #updateValue(value: string) {\n    this.value = value;\n    // it's necessary to reset the 'selected' state of combobox\n    // since otherwise, combobox controller will attempt to prevent us from\n    // re-selecting the last-selected item, even though pf-search-input\n    // doesn't have a selected property\n    this.#combobox.selected = [];\n  }\n\n  #onKeyDown(event: KeyboardEvent) {\n    const target = event.target as HTMLElement;\n    if (target?.getAttribute('aria-disabled') === 'true') {\n      // Allow Tab and Shift+Tab to move focus\n      if (event.key === 'Tab') {\n        return;\n      }\n      event.preventDefault();\n      event.stopImmediatePropagation();\n    }\n  }\n\n  async #showListbox() {\n    await new Promise(requestAnimationFrame);\n    if (this.disabled) {\n      return;\n    };\n\n    if (this.#setExpanded) {\n      // If expanded is set to true on clicking close button\n      // set expanded to false\n      this.#setExpanded = false;\n      this.expanded = false;\n    } else {\n      this.expanded ||= true;\n    }\n  }\n\n  #setItemSelected(item: PfOption, selected: boolean) {\n    item.selected = selected;\n    if (selected) {\n      this._toggleInput!.value = item.value;\n      this.#updateValue(this._toggleInput?.value ?? '');\n    }\n  }\n\n  #setItemActive(item: PfOption, active: boolean) {\n    item.active = active;\n    if (this.expanded && active) {\n      item?.scrollIntoView({ behavior: 'auto', block: 'nearest', inline: 'nearest' });\n    }\n  }\n\n  #setIsExpanded() {\n    if (this.#clickedCloseButton) {\n      this.#clickedCloseButton = false;\n      this.#setExpanded = true;\n      return true;\n    }\n    return this.expanded;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'pf-search-input': PfSearchInput;\n  }\n}\n"]}