{"version":3,"file":"combobox-controller.spec.js","sourceRoot":"","sources":["combobox-controller.spec.ts"],"names":[],"mappings":";;AAAA,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAC9D,OAAO,EAAE,QAAQ,EAAE,MAAM,2BAA2B,CAAC;AACrD,OAAO,EAAE,YAAY,EAAE,MAAM,6CAA6C,CAAC;AAE3E,OAAO,EAAE,aAAa,EAAE,MAAM,kCAAkC,CAAC;AACjE,OAAO,EAAE,KAAK,EAAE,MAAM,yBAAyB,CAAC;AAChD,OAAO,EAAE,eAAe,EAAE,IAAI,EAAE,MAAM,EAA4C,MAAM,KAAK,CAAC;AAE9F,OAAO,EAAE,kBAAkB,EAAE,MAAM,2BAA2B,CAAC;AAE/D,SAAS,KAAK,CAAC,GAAW;IACxB,OAAO,KAAK;QACV,MAAM,QAAQ,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC;IACjC,CAAC,CAAC;AACJ,CAAC;AAED,MAAe,YAAa,SAAQ,eAAe;IAAnD;;QAkBE,eAAU,GAAG,kBAAkB,CAAC,EAAE,CAAC,IAAI,EAAE;YACvC,KAAK,EAAE,KAAK;YACZ,QAAQ,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO;YAC5B,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,YAAY,iBAAiB;YACjD,gBAAgB,EAAE,GAAG,EAAE,CAAC,SAAS;YACjC,iBAAiB,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI;YAC7C,eAAe,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI;YAC1C,gBAAgB,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI;YAC7C,UAAU,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM;YACtC,kBAAkB,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC;YAC5D,kBAAkB,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;YAC3D,aAAa,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC;YACxE,eAAe,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ;SAC9D,CAAC,CAAC;IA6JL,CAAC;IAtJC,sBAAsB;IACtB,IAAI,OAAO;QACT,OAAO;YACL,GAAG,IAAI,GAAG,CAAC;gBACT,IAAI,CAAC,WAAW;gBAChB,GAAG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC;gBAClC,GAAG,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,QAAQ,CAAC;aAC9C,CAAC;SACH,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC;IAED,IAAI,QAAQ;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;IAC9C,CAAC;IAED,IAAI,YAAY;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;IAChE,CAAC;IAIQ,MAAM,CAAC,OAA6B;QAC3C,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACvC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC;IAC7D,CAAC;IAED,iBAAiB;QACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,EAA2B,CAAC;QACpE,IAAI,CAAC,kBAAkB,GAAG,CAAC,GAAG,IAAI,CAAC,kBAAkB,IAAI,EAAE,EAAE,EAAY,CAAC,MAAM,CAAC,CAAC;IACpF,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,IAAI;QACf,IAAI,OAAqB,CAAC;QAE1B,MAAM,cAAc,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,cAAc,CAAC;QAEpD,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC;QAE1B,IAAI,CAAC,QAAQ,EAAE,CAAC;YACd,MAAM,IAAI,KAAK,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,0BAA0B,CAAC,CAAC;QACtE,CAAC;QAED,UAAU,CAAC,KAAK;YACd,OAAO,GAAG,MAAM,OAAO,CAAe,QAAQ,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;QAEH,QAAQ,CAAC,KAAK,EAAE;YACd,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;YACzB,UAAU,CAAC,cAAc,CAAC,CAAC;YAE3B,EAAE,CAAC,sBAAsB,EAAE,KAAK;gBAC9B,MAAM,CAAC,MAAM,YAAY,EAAE,CAAC,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;YAC5E,CAAC,CAAC,CAAC;YAEH,QAAQ,CAAC,KAAK,EAAE;gBACd,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzB,UAAU,CAAC,cAAc,CAAC,CAAC;gBAC3B,UAAU,CAAC,SAAS,CAAC,CAAC;gBAEtB,EAAE,CAAC,kCAAkC,EAAE,KAAK;oBAC1C,MAAM,CAAC,MAAM,YAAY,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;gBACxE,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;YAEH,QAAQ,CAAC,WAAW,EAAE;gBACpB,UAAU,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC/B,UAAU,CAAC,cAAc,CAAC,CAAC;gBAE3B,EAAE,CAAC,qBAAqB,EAAE,KAAK;oBAC7B,MAAM,CAAC,MAAM,YAAY,EAAE,CAAC;yBACvB,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC;yBAC3B,GAAG;yBACH,EAAE,CAAC,cAAc,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;gBAC/D,CAAC,CAAC,CAAC;gBAEH,EAAE,CAAC,qCAAqC,EAAE,KAAK;oBAC7C,MAAM,CAAC,MAAM,YAAY,EAAE,CAAC,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;gBAC5E,CAAC,CAAC,CAAC;gBAEH,EAAE,CAAC,sCAAsC,EAAE;oBACzC,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;gBAC7D,CAAC,CAAC,CAAC;gBAEH,QAAQ,CAAC,OAAO,EAAE;oBAChB,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;oBAC3B,UAAU,CAAC,cAAc,CAAC,CAAC;oBAE3B,EAAE,CAAC,qCAAqC,EAAE,KAAK;wBAC7C,MAAM,CAAC,MAAM,YAAY,EAAE,CAAC,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;oBAC5E,CAAC,CAAC,CAAC;oBAEH,EAAE,CAAC,iBAAiB,EAAE;wBACpB,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;oBAC7C,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;gBAEH,QAAQ,CAAC,WAAW,EAAE;oBACpB,UAAU,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC/B,UAAU,CAAC,cAAc,CAAC,CAAC;oBAE3B,EAAE,CAAC,qCAAqC,EAAE,KAAK;wBAC7C,MAAM,CAAC,MAAM,YAAY,EAAE,CAAC,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;oBAC5E,CAAC,CAAC,CAAC;oBAEH,EAAE,CAAC,qCAAqC,EAAE;wBACxC,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;oBACjD,CAAC,CAAC,CAAC;oBAEH,QAAQ,CAAC,OAAO,EAAE;wBAChB,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;wBAC3B,UAAU,CAAC,cAAc,CAAC,CAAC;wBAE3B,EAAE,CAAC,qCAAqC,EAAE,KAAK;4BAC7C,MAAM,CAAC,MAAM,YAAY,EAAE,CAAC,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;wBAC5E,CAAC,CAAC,CAAC;wBAEH,EAAE,CAAC,0BAA0B,EAAE;4BAC7B,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;4BAC3C,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;wBACnD,CAAC,CAAC,CAAC;wBAEH,EAAE,CAAC,uBAAuB,EAAE,KAAK;4BAC/B,MAAM,CAAC,MAAM,YAAY,EAAE,CAAC;iCACvB,EAAE,CAAC,GAAG,CAAC,aAAa,CAAC,SAAS,CAAC;iCAC/B,GAAG;iCACH,EAAE,CAAC,cAAc,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;wBAChE,CAAC,CAAC,CAAC;oBACL,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;gBAEH,QAAQ,CAAC,QAAQ,EAAE;oBACjB,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAC5B,UAAU,CAAC,cAAc,CAAC,CAAC;oBAE3B,EAAE,CAAC,uBAAuB,EAAE,KAAK;wBAC/B,MAAM,CAAC,MAAM,YAAY,EAAE,CAAC;6BACvB,EAAE,CAAC,GAAG,CAAC,aAAa,CAAC,SAAS,CAAC;6BAC/B,GAAG;6BACH,EAAE,CAAC,cAAc,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;oBAChE,CAAC,CAAC,CAAC;oBAEH,EAAE,CAAC,qCAAqC,EAAE,KAAK;wBAC7C,MAAM,CAAC,MAAM,YAAY,EAAE,CAAC,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;oBAC5E,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAAA,CAAC;;;AAxLK,mBAAM,GAAG,IAAI,aAAa,EAAE,AAAtB,CAAuB;AAEpC;IACE,GAAK,MAAM,CAAC,WAAW,CAAC,SAAS,CAAA;;;;;;;;;KAShC,CAAC,CAAC;AACL,CAAC,GAAA,CAAA;AAiBkB;IAAlB,KAAK,CAAC,UAAU,CAAC;6CAAuB;AACvB;IAAjB,KAAK,CAAC,SAAS,CAAC;4CAA4B;AACzB;IAAnB,KAAK,CAAC,WAAW,CAAC;8CAA6B;AACzB;IAAtB,KAAK,CAAC,cAAc,CAAC;iDAAiC;AA2JzD,IAAM,kBAAkB,GAAxB,MAAM,kBAAmB,SAAQ,YAAY;IAiB3C,sBAAsB;IACtB,IAAa,OAAO;QAClB,OAAO;YACL,GAAG,IAAI,GAAG,CAAC;gBACT,IAAI,CAAC,WAAW;gBAChB,GAAG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC;aACnC,CAAC;SACH,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;;;;;;;UAOL,IAAI,CAAC,UAAU,CAAC,uBAAuB,EAAE;uBAC5B,CAAC,kBAAkB,CAAC,iCAAiC;;;;KAIvE,CAAC;IACJ,CAAC;;AAxCM,2BAAQ,GAAG,IAAI,CAAA;;;;;;;;;;;;;GAarB,AAbc,CAab;AAdE,kBAAkB;IADvB,aAAa,CAAC,uBAAuB,CAAC;GACjC,kBAAkB,CA0CvB;AAGD,IAAM,cAAc,GAApB,MAAM,cAAe,SAAQ,YAAY;IAK7B,gBAAgB;QACxB,OAAO,IAAI,CAAC;IACd,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;;;;;;;;;;;;;;;aAeF,CAAC;IACZ,CAAC;;AAzBM,uBAAQ,GAAG,IAAI,CAAA;;GAErB,AAFc,CAEb;AAHE,cAAc;IADnB,aAAa,CAAC,kBAAkB,CAAC;GAC5B,cAAc,CA2BnB;AAGD,IAAM,eAAe,GAArB,MAAM,eAAgB,SAAQ,YAAY;IAKxC,MAAM;QACJ,OAAO,IAAI,CAAA;;;;;;;;;;;;;;;aAeF,CAAC;IACZ,CAAC;;AArBM,wBAAQ,GAAG,IAAI,CAAA;;GAErB,AAFc,CAEb;AAHE,eAAe;IADpB,aAAa,CAAC,mBAAmB,CAAC;GAC7B,eAAe,CAuBpB;AAED,QAAQ,CAAC,oBAAoB,EAAE;IAC7B,QAAQ,CAAC,iBAAiB,EAAE,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;IAC9E,QAAQ,CAAC,gBAAgB,EAAE,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;IACrE,QAAQ,CAAC,iBAAiB,EAAE,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;AAC1E,CAAC,CAAC,CAAC","sourcesContent":["import { expect, fixture, nextFrame } from '@open-wc/testing';\nimport { sendKeys } from '@web/test-runner-commands';\nimport { a11ySnapshot } from '@patternfly/pfe-tools/test/a11y-snapshot.js';\n\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { query } from 'lit/decorators/query.js';\nimport { ReactiveElement, html, render, type PropertyValues, type TemplateResult } from 'lit';\n\nimport { ComboboxController } from '../combobox-controller.js';\n\nfunction press(key: string) {\n  return async function() {\n    await sendKeys({ press: key });\n  };\n}\n\nabstract class TestCombobox extends ReactiveElement {\n  declare static template: TemplateResult;\n\n  static styles = new CSSStyleSheet();\n\n  static {\n    this.styles.replaceSync(/* css */`\n      option {\n        &.active {\n          outline: 1px solid black;\n        }\n        &[selected] {\n          background: lightblue;\n        }\n      }\n    `);\n  }\n\n  controller = ComboboxController.of(this, {\n    multi: false,\n    getItems: () => this.options,\n    isItem: item => item instanceof HTMLOptionElement,\n    getFallbackLabel: () => 'options',\n    getListboxElement: () => this.listbox ?? null,\n    getToggleButton: () => this.button ?? null,\n    getComboboxInput: () => this.combobox ?? null,\n    isExpanded: () => !this.listbox.hidden,\n    requestShowListbox: () => void (this.listbox.hidden = false),\n    requestHideListbox: () => void (this.listbox.hidden = true),\n    setItemActive: (item, active) => item.classList.toggle('active', active),\n    setItemSelected: (item, selected) => item.selected = selected,\n  });\n\n  @query('#listbox') listbox!: HTMLElement;\n  @query('#button') button!: HTMLButtonElement;\n  @query('#combobox') combobox!: HTMLInputElement;\n  @query('#placeholder') placeholder!: HTMLOptionElement;\n\n  /** List of options */\n  get options(): HTMLOptionElement[] {\n    return [\n      ...new Set([\n        this.placeholder,\n        ...this.querySelectorAll('option'),\n        ...this.renderRoot.querySelectorAll('option'),\n      ]),\n    ].filter(x => !!x);\n  }\n\n  get selected() {\n    return this.options.filter(x => x.selected);\n  }\n\n  get activeOption() {\n    return this.options.find(x => x.classList.contains('active'));\n  }\n\n  abstract render(): TemplateResult;\n\n  override update(changed: PropertyValues<this>) {\n    render(this.render(), this.renderRoot);\n    super.update(changed);\n    this.placeholder.inert = !!this.controller.selected.length;\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback();\n    const root = this.renderRoot.getRootNode() as Document | ShadowRoot;\n    root.adoptedStyleSheets = [...root.adoptedStyleSheets ?? [], TestCombobox.styles];\n  }\n\n  static async test() {\n    let element: TestCombobox;\n\n    const updateComplete = () => element.updateComplete;\n\n    const { template } = this;\n\n    if (!template) {\n      throw new Error(`${this.constructor.name} must implement template`);\n    }\n\n    beforeEach(async function() {\n      element = await fixture<TestCombobox>(template);\n    });\n\n    describe('Tab', function() {\n      beforeEach(press('Tab'));\n      beforeEach(updateComplete);\n\n      it('focuses the combobox', async function() {\n        expect(await a11ySnapshot()).axTreeFocusedNode.to.have.axRole('combobox');\n      });\n\n      describe('Tab', function() {\n        beforeEach(press('Tab'));\n        beforeEach(updateComplete);\n        beforeEach(nextFrame);\n\n        it('does not focus the toggle button', async function() {\n          expect(await a11ySnapshot()).to.not.axContainQuery({ focused: true });\n        });\n      });\n\n      describe('ArrowDown', function() {\n        beforeEach(press('ArrowDown'));\n        beforeEach(updateComplete);\n\n        it('expands the listbox', async function() {\n          expect(await a11ySnapshot())\n              .to.axContainRole('listbox')\n              .and\n              .to.axContainQuery({ role: 'combobox', expanded: true });\n        });\n\n        it('maintains DOM focus on the combobox', async function() {\n          expect(await a11ySnapshot()).axTreeFocusedNode.to.have.axRole('combobox');\n        });\n\n        it('sets active state on the placeholder', function() {\n          expect(element.activeOption).to.equal(element.placeholder);\n        });\n\n        describe('Enter', function() {\n          beforeEach(press('Enter'));\n          beforeEach(updateComplete);\n\n          it('maintains DOM focus on the combobox', async function() {\n            expect(await a11ySnapshot()).axTreeFocusedNode.to.have.axRole('combobox');\n          });\n\n          it('selects nothing', function() {\n            expect(element.selected).to.have.length(0);\n          });\n        });\n\n        describe('ArrowDown', function() {\n          beforeEach(press('ArrowDown'));\n          beforeEach(updateComplete);\n\n          it('maintains DOM focus on the combobox', async function() {\n            expect(await a11ySnapshot()).axTreeFocusedNode.to.have.axRole('combobox');\n          });\n\n          it('sets active state on the 1st option', function() {\n            expect(element.activeOption).to.have.text('1');\n          });\n\n          describe('Enter', function() {\n            beforeEach(press('Enter'));\n            beforeEach(updateComplete);\n\n            it('maintains DOM focus on the combobox', async function() {\n              expect(await a11ySnapshot()).axTreeFocusedNode.to.have.axRole('combobox');\n            });\n\n            it('selects the first option', function() {\n              expect(element.selected).to.have.length(1);\n              expect(element.selected.at(0)).to.have.text('1');\n            });\n\n            it('collapses the listbox', async function() {\n              expect(await a11ySnapshot())\n                  .to.not.axContainRole('listbox')\n                  .and\n                  .to.axContainQuery({ role: 'combobox', expanded: false });\n            });\n          });\n        });\n\n        describe('Escape', function() {\n          beforeEach(press('Escape'));\n          beforeEach(updateComplete);\n\n          it('collapses the listbox', async function() {\n            expect(await a11ySnapshot())\n                .to.not.axContainRole('listbox')\n                .and\n                .to.axContainQuery({ role: 'combobox', expanded: false });\n          });\n\n          it('maintains DOM focus on the combobox', async function() {\n            expect(await a11ySnapshot()).axTreeFocusedNode.to.have.axRole('combobox');\n          });\n        });\n      });\n    });\n  };\n}\n\n@customElement('x-combobox-cross-root')\nclass XComboboxCrossRoot extends TestCombobox {\n  static template = html`\n    <x-combobox-cross-root>\n      <option>1</option>\n      <option>2</option>\n      <option>3</option>\n      <option>4</option>\n      <option>5</option>\n      <option>6</option>\n      <option>7</option>\n      <option>8</option>\n      <option>9</option>\n      <option>10</option>\n    </x-combobox-cross-root>\n  `;\n\n\n  /** List of options */\n  override get options(): HTMLOptionElement[] {\n    return [\n      ...new Set([\n        this.placeholder,\n        ...this.querySelectorAll('option'),\n      ]),\n    ].filter(x => !!x);\n  }\n\n  render() {\n    return html`\n      <div id=\"toggle\">\n        <input id=\"combobox\">\n        <button id=\"button\">Show Options</button>\n      </div>\n      <div id=\"listbox\">\n        <option id=\"placeholder\" aria-disabled=\"true\">Select an Option</option>\n        ${this.controller.renderItemsToShadowRoot()}\n        <div ?hidden=${!ComboboxController.supportsCrossRootActiveDescendant}>\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n}\n\n@customElement('x-combobox-light')\nclass XComboboxLight extends TestCombobox {\n  static template = html`\n    <x-combobox-light></x-combobox-light>\n  `;\n\n  protected createRenderRoot(): HTMLElement | DocumentFragment {\n    return this;\n  }\n\n  render() {\n    return html`\n      <input id=\"combobox\">\n      <button id=\"button\">Show Options</button>\n      <div id=\"listbox\">\n        <option id=\"placeholder\" aria-disabled=\"true\">Select an Option</option>\n        <option>1</option>\n        <option>2</option>\n        <option>3</option>\n        <option>4</option>\n        <option>5</option>\n        <option>6</option>\n        <option>7</option>\n        <option>8</option>\n        <option>9</option>\n        <option>10</option>\n      </div>`;\n  }\n}\n\n@customElement('x-combobox-shadow')\nclass XComboboxShadow extends TestCombobox {\n  static template = html`\n    <x-combobox-shadow></x-combobox-shadow>\n  `;\n\n  render() {\n    return html`\n      <input id=\"combobox\">\n      <button id=\"button\">Show Options</button>\n      <div id=\"listbox\">\n        <option id=\"placeholder\" aria-disabled=\"true\">Select an Option</option>\n        <option>1</option>\n        <option>2</option>\n        <option>3</option>\n        <option>4</option>\n        <option>5</option>\n        <option>6</option>\n        <option>7</option>\n        <option>8</option>\n        <option>9</option>\n        <option>10</option>\n      </div>`;\n  }\n}\n\ndescribe('ComboboxController', function() {\n  describe('Cross-root ARIA', XComboboxCrossRoot.test.bind(XComboboxCrossRoot));\n  describe('Light-DOM only', XComboboxLight.test.bind(XComboboxLight));\n  describe('Shadow-DOM only', XComboboxShadow.test.bind(XComboboxShadow));\n});\n"]}