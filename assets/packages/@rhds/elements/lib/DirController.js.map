{"version":3,"file":"DirController.js","sourceRoot":"","sources":["DirController.ts"],"names":[],"mappings":";;AAEA;;;;GAIG;AACH,MAAM,OAAO,aAAa;IAIxB,YAAmB,IAAsC;;QAAtC,SAAI,GAAJ,IAAI,CAAkC;QAHzD,kCAAkC;QAC3B,QAAG,GAA2B,MAAM,CAAC;QAG1C,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAED,aAAa;QACX,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAED,KAAK,CAAC,MAAM;QACV,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC;QACzB,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;QAC/B,IAAI,CAAC,GAAG,GAAG,uBAAA,IAAI,8DAAe,MAAnB,IAAI,CAAiB,CAAC;QACjC,IAAI,IAAI,CAAC,GAAG,KAAK,OAAO,EAAE,CAAC;YACzB,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QAC5B,CAAC;IACH,CAAC;CAcF;;IAXG,IAAI,IAAI,GAAG,IAAI,CAAC,IAAe,CAAC;IAChC,OAAO,IAAI,EAAE,CAAC;QACZ,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACzC,IAAI,UAAU,EAAE,CAAC;YACf,OAAO,UAAU,CAAC,YAAY,CAAC,KAAK,CAAyB,IAAI,KAAK,CAAC;QACzE,CAAC;aAAM,CAAC;YACN,CAAC,EAAE,IAAI,EAAE,GAAI,IAAI,EAAE,WAAW,EAAiB,IAAI,EAAE,CAAC,CAAC;QACzD,CAAC;IACH,CAAC;IACD,OAAO,KAAK,CAAC;AACf,CAAC","sourcesContent":["import type { ReactiveController, ReactiveControllerHost } from 'lit';\n\n/**\n * Discovers and reports the host element's closest `dir`,\n * even across shadow roots. Does not observe DOM changes.\n * @see https://caniuse.com/css-dir-pseudo\n */\nexport class DirController implements ReactiveController {\n  /** The element's current `dir` */\n  public dir: 'ltr' | 'rtl' | 'auto' = 'auto';\n\n  constructor(public host: ReactiveControllerHost & Element) {\n    this.update();\n  }\n\n  hostConnected() {\n    this.update();\n  }\n\n  async update() {\n    const initial = this.dir;\n    await this.host.updateComplete;\n    this.dir = this.#getDirContext();\n    if (this.dir !== initial) {\n      this.host.requestUpdate();\n    }\n  }\n\n  #getDirContext(): 'ltr' | 'rtl' | 'auto' {\n    let host = this.host as Element;\n    while (host) {\n      const dirContext = host.closest('[dir]');\n      if (dirContext) {\n        return dirContext.getAttribute('dir') as DirController['dir'] ?? 'ltr';\n      } else {\n        ({ host } = (host?.getRootNode() as ShadowRoot) ?? {});\n      }\n    }\n    return 'ltr';\n  }\n}\n"]}