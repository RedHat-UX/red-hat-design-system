{"version":3,"file":"rh-menu-dropdown.js","sourceRoot":"","sources":["rh-menu-dropdown.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, isServer, type TemplateResult } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { property } from 'lit/decorators/property.js';\nimport { query } from 'lit/decorators/query.js';\nimport { queryAll } from 'lit/decorators/query-all.js';\nimport { classMap } from 'lit-html/directives/class-map.js';\nimport { styleMap } from 'lit-html/directives/style-map.js';\nimport { RovingTabindexController } from '@patternfly/pfe-core/controllers/roving-tabindex-controller.js';\nimport { FloatingDOMController } from '@patternfly/pfe-core/controllers/floating-dom-controller.js';\nimport '@rhds/elements/rh-button/rh-button.js';\nimport '@rhds/elements/rh-icon/rh-icon.js';\nimport '@rhds/elements/rh-menu/rh-menu.js';\nimport { RhMenuItem } from '../rh-menu/rh-menu-item.js';\n\nimport styles from './rh-menu-dropdown.css';\n\n/** Fired when a user selects an action or link from the menu */\nexport class MenuDropdownSelectEvent extends Event {\n  constructor(\n    public selectedItem: RhMenuItem,\n    public text: string\n  ) {\n    super('select', { bubbles: true, composed: true });\n  }\n}\n\n\n/**\n * A menu dropdown presents a list of actions or links in a vertically stacked menu,\n * appearing when a user interacts with a toggle button.\n *\n * @summary A collapsible menu for presenting a list of options or actions\n *\n * @alias menu-dropdown\n */\n@customElement('rh-menu-dropdown')\nexport class RhMenuDropdown extends LitElement {\n  static readonly styles: CSSStyleSheet[] = [styles];\n  private static instances = new Set<RhMenuDropdown>();\n\n  /**\n   * whether the dropdown is currently open.\n   */\n  @property({ type: Boolean, reflect: true }) open = false;\n\n  /**\n   * Defines the visual style of the dropdown.\n   * Setting it to 'borderless' removes the default border styling.\n   */\n  @property({ reflect: true }) variant?: 'borderless';\n\n  /**\n   * The 'compact' layout reduces spacing and add the rh-icon `ellipsis-vertical-fill`.\n   */\n  @property({ attribute: 'layout', reflect: true }) layout?: 'compact';\n\n  /**\n   * Disables user interaction with the dropdown. When true, the dropdown cannot\n   * be opened or interacted with, and appears visually disabled.\n   */\n  @property({ type: Boolean, reflect: true }) disabled = false;\n\n  /**\n   * Provides an accessible name for the dropdown's trigger, improving screen reader support.\n   * This label is announced to assistive technologies to describe the purpose of\n   * the compact menu dropdown.\n  */\n  @property({ attribute: 'accessible-label', reflect: true }) accessibleLabel = 'Toggle menu';\n\n  @query('#menu-toggle') menuToggleButton!: HTMLElement;\n  @query('#menu-list') menuList!: HTMLElement;\n  @queryAll('slot') slotElement!: NodeListOf<HTMLSlotElement>;\n\n  static override readonly shadowRootOptions: ShadowRootInit = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n\n  static {\n    if (!isServer) {\n      document.addEventListener('click', function(event) {\n        for (const instance of RhMenuDropdown.instances) {\n          instance.#outsideClick(event);\n        }\n      });\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    RhMenuDropdown.instances.add(this);\n  }\n\n  disconnectedCallback() {\n    RhMenuDropdown.instances.delete(this);\n  }\n\n  firstUpdated() {\n    this.updateComplete.then(() => {\n      this.#validateSlotContent();\n    });\n  }\n\n  get #items() {\n    return this.items;\n  }\n\n  #outsideClick(event: MouseEvent) {\n    const path = event.composedPath();\n    if (!path.includes(this)) {\n      if (this.open) {\n        this.open = false;\n      }\n    }\n  }\n\n  #validateSlotContent() {\n    this.slotElement?.forEach((slot: HTMLSlotElement) => {\n      const assignedElements = slot.assignedElements({ flatten: true });\n      assignedElements.forEach(el => {\n        if ( el instanceof HTMLHRElement) {\n          el.inert = true;\n        }\n      });\n    });\n  }\n\n  #tabindex = RovingTabindexController.of(this, {\n    getItems: () => this.#items,\n  });\n\n  #float = new FloatingDOMController(this, {\n    content: () => this.menuList,\n    invoker: () => this.menuToggleButton,\n  });\n\n  /**\n  * Moves focus to the currently active (focused) item.\n  */\n  focus() {\n    this.#tabindex.items[this.#tabindex.atFocusedItemIndex]?.focus();\n  }\n\n  render(): TemplateResult<1> {\n    const { alignment, anchor, styles, open } = this.#float;\n\n    return html`\n      <div @focusout=${this.#onFocusOut} id=\"menu-dropdown-container\">\n        <button id=\"menu-toggle\"\n                type=\"button\"\n                aria-haspopup=\"menu\"\n                aria-expanded=\"${this.open}\"\n                @click=\"${this.#toggleMenu}\"\n                aria-controls=\"menu-list\"\n                aria-disabled=\"${this.disabled}\"\n                @keydown=\"${this.#onToggleKeydown}\"\n                class=\"${classMap({\n                  boxed: this.variant !== 'borderless',\n                  compact: this.layout === 'compact',\n                  disabled: this.disabled,\n                  open: this.open,\n                })}\">\n            ${this.layout === 'compact' ?\n              html`<rh-icon set=\"ui\" accessible-label=${this.accessibleLabel} icon=\"ellipsis-vertical-fill\"></rh-icon>`\n              : html` \n              <span class=\"info-section\"> \n                <!-- Use this slot for the toggle label. Keep toggle labels short and succinct. -->\n                <slot name=\"toggle-label\"></slot>\n              </span>\n              <span class=\"action-icon\">\n                <rh-icon set=\"microns\" icon=\"${this.open ? 'caret-up' : 'caret-down'}\"></rh-icon>\n              </span>\n              `\n            }\n        </button>\n        <div id=\"menu-list\"\n             ?hidden=${!this.open}\n             @click=${this.#onSelect}\n             style=\"${styleMap(styles)}\"\n             class=\"${classMap({ [anchor]: !!anchor, [alignment]: !!alignment, open })}\"\n             @keydown=${this.#onKeyDown}>\n          <rh-menu role=\"menu\" aria-labelledby=\"menu-toggle\">\n            <!-- \n              Use this slot to provide the menu content. Use the \"rh-menu\" component \n              for the menu panel, and use \"rh-menu-items\" to define the individual menu items.\n              To organize menu items into groups, use the \"rh-menu-item-group\" component.\n            -->\n            <slot></slot>\n          </rh-menu>\n        </div>\n      </div>\n    \n    `;\n  }\n\n  #toggleMenu() {\n    if (!this.disabled) {\n      this.open = !this.open;\n\n      if (this.open) {\n        this.updateComplete.then(async () => {\n          await this.#positionMenu();\n          this.#focusFirstItem();\n        });\n      } else {\n        this.#float.hide();\n      }\n    }\n  }\n\n  get items(): HTMLElement[] {\n    if (!isServer) {\n      return Array.from(this.querySelectorAll('rh-menu-item')) as HTMLElement[];\n    } else {\n      return [];\n    }\n  }\n\n  #focusFirstItem() {\n    this.items[0]?.focus();\n  }\n\n  #onToggleKeydown(e: KeyboardEvent) {\n    if (!this.disabled) {\n      if (['Enter', ' ', 'ArrowDown'].includes(e.key)) {\n        e.preventDefault();\n        this.open = true;\n        this.updateComplete.then(async () => {\n          await this.#positionMenu();\n          this.#focusFirstItem();\n        });\n      }\n    }\n  }\n\n  #handleSelection(target: RhMenuItem) {\n    this.open = false;\n    this.menuToggleButton.focus();\n    this.dispatchEvent(new MenuDropdownSelectEvent(\n      target,\n      target.textContent ? target.textContent : ''\n    ));\n    if (target.href) {\n      if (target.external) {\n        window.open(target.href, '_blank', 'noopener,noreferrer');\n      } else {\n        window.location.href = target.href;\n      }\n    }\n  }\n\n  #onSelect(event: KeyboardEvent & { target: RhMenuItem }) {\n    if (event.target instanceof RhMenuItem) {\n      this.#handleSelection(event.target);\n    }\n  }\n\n  #onKeyDown(event: KeyboardEvent & { target: RhMenuItem }) {\n    if (event.key === 'Escape') {\n      if (this.open) {\n        this.open = false;\n        this.menuToggleButton.focus();\n      }\n    } else if (\n      event.target instanceof RhMenuItem\n      && (event.key === 'Enter' || event.key === ' ')\n      && !event.target.disabled\n    ) {\n      event.preventDefault();\n      this.#handleSelection(event.target);\n    }\n  }\n\n  #onFocusOut(event: FocusEvent) {\n    const relatedTarget = event.relatedTarget as Node | null;\n    // If the next focused element is outside this component, close the dropdown\n    if (\n      relatedTarget !== this.menuToggleButton\n      && relatedTarget !== this.menuList\n      && relatedTarget && !this.contains(relatedTarget)\n    ) {\n      if (this.open) {\n        this.open = false;\n      }\n    }\n\n    // Also close if nothing is focused (focus left the document)\n    if (!relatedTarget) {\n      this.open = false;\n    }\n  }\n\n  async #positionMenu() {\n    await this.updateComplete;\n    const placement = 'bottom-start';\n    const mainAxis = 4;\n    const offset = { mainAxis: mainAxis, alignmentAxis: 0 };\n    await this.#float.show({ offset: offset, placement: placement });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-menu-dropdown': RhMenuDropdown;\n  }\n}\n"]}