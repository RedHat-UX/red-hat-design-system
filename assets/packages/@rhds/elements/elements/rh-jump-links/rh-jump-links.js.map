{"version":3,"file":"rh-jump-links.js","sourceRoot":"","sources":["rh-jump-links.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, isServer, LitElement, type TemplateResult } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { property } from 'lit/decorators/property.js';\nimport { provide } from '@lit/context';\n\nimport { ScrollSpyController } from '@patternfly/pfe-core/controllers/scroll-spy-controller.js';\nimport { OverflowController } from '@patternfly/pfe-core/controllers/overflow-controller.js';\nimport { InternalsController } from '@patternfly/pfe-core/controllers/internals-controller.js';\n\nimport { observes } from '@patternfly/pfe-core/decorators.js';\n\nimport { themable } from '@rhds/elements/lib/themable.js';\n\nimport { RhJumpLink } from './rh-jump-link.js';\nimport { rhJumpLinksOrientationContext } from './context.js';\n\nimport style from './rh-jump-links.css';\n\nimport '@rhds/elements/rh-icon/rh-icon.js';\n\n/**\n * Jump links allow users to navigate sections of content on a page.\n *\n * @alias jump-links\n *\n * @fires toggle - when the `expanded` disclosure widget is toggled\n */\n@customElement('rh-jump-links')\n@themable\nexport class RhJumpLinks extends LitElement {\n  static readonly styles: CSSStyleSheet[] = [style];\n\n  /** Whether the layout of children is vertical or horizontal. */\n  @provide({ context: rhJumpLinksOrientationContext })\n  @property({ reflect: true }) orientation: 'horizontal' | 'vertical' = 'vertical';\n\n  /** Accessible label for nav */\n  @property({ attribute: 'accessible-label' }) accessibleLabel?: string;\n\n  #internals = InternalsController.of(this, { role: 'navigation' });\n\n  #overflow = new OverflowController(this);\n\n  #onScroll = this.#overflow.onScroll.bind(this);\n\n  #spy = new ScrollSpyController(this, {\n    rootMargin: '0px 0px 0px 0px',\n    tagNames: ['rh-jump-link'],\n    onIntersection: () => {\n      for (const list of this.querySelectorAll('rh-jump-links-list')) {\n        list.active = !!list.querySelector('rh-jump-link[active]');\n      }\n      this.#overflow.update();\n    },\n  });\n\n  override connectedCallback(): void {\n    super.connectedCallback();\n    this.addEventListener('select', this.#onSelect);\n  }\n\n  override firstUpdated(): void {\n    const active: RhJumpLink | null = this.querySelector('rh-jump-link[active]');\n    if (active) {\n      this.#setActiveItem(active);\n    }\n  }\n\n  @observes('accessibleLabel')\n  protected labelChanged() {\n    if (this.accessibleLabel) {\n      this.#internals.ariaLabel = this.accessibleLabel;\n    }\n  }\n\n  render(): TemplateResult<1> {\n    const { overflowLeft, overflowRight, showScrollButtons: overflow } = this.#overflow;\n    return html`\n        <button id=\"scroll-start\"\n                class=\"overflow-button\"\n                ?hidden=\"${!overflow}\"\n                tabindex=\"-1\"\n                data-direction=\"start\"\n                aria-label=\"${this.getAttribute('label-scroll-left') ?? 'Scroll back'}\"\n                ?disabled=\"${!overflowLeft}\"\n                @click=\"${this.#onClickScroll}\">\n          <rh-icon set=\"ui\" icon=\"caret-left\" loading=\"eager\"></rh-icon>\n        </button>\n\n        <div id=\"container\" role=\"list\">\n          <!-- Place \\`<rh-jump-link>\\` or \\`<rh-jump-links-list>\\` elements here -->\n          <slot></slot>\n        </div>\n\n        <button id=\"scroll-end\"\n                class=\"overflow-button\"\n                ?hidden=\"${!overflow}\"\n                tabindex=\"-1\"\n                data-direction=\"end\"\n                aria-label=\"${this.getAttribute('label-scroll-right') ?? 'Scroll forward'}\"\n                ?disabled=\"${!overflowRight}\"\n                @click=\"${this.#onClickScroll}\">\n           <rh-icon set=\"ui\" icon=\"caret-right\" loading=\"eager\"></rh-icon>\n        </button>\n    `;\n  }\n\n  @observes('orientation')\n  async orientationChanged() {\n    if (isServer) {\n      return;\n    }\n    if (!this.hasUpdated) {\n      await this.updateComplete;\n    }\n    const container = this.shadowRoot!.getElementById('container')!;\n    const items = Array.from(this.querySelectorAll(':scope > *')) as HTMLElement[];\n    switch (this.orientation) {\n      case 'horizontal':\n        this.#overflow.init(container, items);\n        container.addEventListener('scroll', this.#onScroll);\n        break;\n      case 'vertical':\n        container.removeEventListener('scroll', this.#onScroll);\n    }\n  }\n\n  #onClickScroll(event: Event) {\n    if (event.target instanceof HTMLElement) {\n      switch (event.target.dataset.direction) {\n        case 'start':\n          if (this.matches(':dir(rtl)')) {\n            this.#overflow.scrollRight();\n          } else {\n            this.#overflow.scrollLeft();\n          }\n          break;\n        case 'end':\n          if (this.matches(':dir(rtl)')) {\n            this.#overflow.scrollLeft();\n          } else {\n            this.#overflow.scrollRight();\n          }\n          break;\n      }\n    }\n  }\n\n  #onSelect(event: Event) {\n    if (event.target instanceof RhJumpLink) {\n      this.#setActiveItem(event.target);\n    }\n  }\n\n  async #setActiveItem(item: RhJumpLink) {\n    await this.updateComplete;\n    this.#spy.setActive(item);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-jump-links': RhJumpLinks;\n  }\n}\n"]}