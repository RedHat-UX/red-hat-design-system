{"version":3,"file":"rh-accordion-header.js","sourceRoot":"","sources":["rh-accordion-header.ts"],"names":[],"mappings":"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","sourcesContent":["import type { RhAccordion } from './rh-accordion.js';\nimport type { RhAccordionContext } from './context.js';\n\nimport { html, LitElement, isServer } from 'lit';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { property } from 'lit/decorators/property.js';\n\nimport { getRandomId } from '@patternfly/pfe-core/functions/random.js';\nimport { observes } from '@patternfly/pfe-core/decorators/observes.js';\n\nimport { InternalsController } from '@patternfly/pfe-core/controllers/internals-controller.js';\nimport { HeadingLevelContextConsumer } from '../../lib/context/headings/consumer.js';\n\nimport { themable } from '@rhds/elements/lib/themable.js';\n\nimport { consume } from '@lit/context';\nimport { context } from './context.js';\n\nimport styles from './rh-accordion-header.css';\n\nexport class AccordionHeaderChangeEvent extends Event {\n  declare target: RhAccordionHeader;\n  constructor(\n    public expanded: boolean,\n    public toggle: RhAccordionHeader,\n  ) {\n    super('change', { bubbles: true, cancelable: true });\n  }\n}\n\n/**\n * Accordion Header\n * We expect the light DOM of the rh-accordion-header to be a heading level tag (h1, h2, h3, h4, h5, h6)\n * @fires {AccordionHeaderChangeEvent} change - when the open panels change\n */\n@customElement('rh-accordion-header')\n@themable\nexport class RhAccordionHeader extends LitElement {\n  static readonly styles = [styles];\n\n  // Allow focus to apply to shadow button\n  static override readonly shadowRootOptions: ShadowRootInit = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n\n  @property({ type: Boolean, reflect: true }) expanded = false;\n\n  @consume({ context, subscribe: true })\n  @property({ attribute: false })\n  private ctx?: RhAccordionContext;\n\n  #internals = InternalsController.of(this, {\n    role: 'heading',\n    ariaLevel: '2',\n  });\n\n  #heading = new HeadingLevelContextConsumer(this);\n\n  #belongsTo?: RhAccordion | null;\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.id ||= getRandomId(this.localName);\n    if (!isServer) {\n      this.#belongsTo = this.closest<RhAccordion>('rh-accordion');\n      const heading = this.closest('h1,h2,h3,h4,h5,h6');\n      if (heading && this.#belongsTo?.contains(heading)) {\n        this.#internals.ariaLevel = heading.localName.replace('h', '');\n        heading.replaceWith(this);\n      } else {\n        this.#internals.ariaLevel = Math.max(2, this.#heading.level).toString();\n      }\n    }\n  }\n\n  render() {\n    const { expanded } = this;\n    const { accents, large = false } = this.ctx ?? {};\n    return html`\n      <button id=\"button\"\n              class=\"${classMap({ toggle: true, large, expanded })}\"\n              @click=\"${this.#onClick}\">\n        <span id=\"header-container\" class=\"${classMap({ [accents ?? '']: !!accents })}\">\n          <!-- summary: inline element containing the heading text or slotted heading content -->\n          <span id=\"header-text\" part=\"text\">\n            <!-- summary: accordion toggle content -->\n            <slot></slot>\n          </span>\n          <!-- summary: container for accents within the header -->\n          <span part=\"accents\">\n           <!-- summary: decorations like icons or tags\n                description: |\n                 These elements will appear inline by default with the header title, between the header and the chevron\n                 (or after the chevron and header in disclosure mode). There is an option to set the accents placement to bottom -->\n            <slot name=\"accents\"></slot>\n          </span>\n        </span>\n        <svg id=\"icon\"\n             role=\"presentation\"\n             xmlns=\"http://www.w3.org/2000/svg\"\n             viewBox=\"0 0 448 512\">\n          <path d=\"M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z\"/>\n        </svg>\n      </button>\n    `;\n  }\n\n  #onClick() {\n    this.expanded = !this.expanded;\n  }\n\n  #dispatchChange() {\n    this.dispatchEvent(new AccordionHeaderChangeEvent(this.expanded, this));\n  }\n\n  @observes('expanded')\n  private expandedChanged() {\n    this.#internals.ariaExpanded = String(!!this.expanded) as 'true' | 'false';\n    this.#dispatchChange();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-accordion-header': RhAccordionHeader;\n  }\n}\n"]}