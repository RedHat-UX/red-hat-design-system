{"version":3,"file":"rh-audio-player.js","sourceRoot":"","sources":["rh-audio-player.ts"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAuB,MAAM,KAAK,CAAC;AAC5D,OAAO,EAAE,aAAa,EAAE,MAAM,kCAAkC,CAAC;AACjE,OAAO,EAAE,QAAQ,EAAE,MAAM,4BAA4B,CAAC;AACtD,OAAO,EAAE,qBAAqB,EAAE,MAAM,2CAA2C,CAAC;AAClF,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AACvD,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AACvD,OAAO,EAAE,SAAS,EAAE,MAAM,8BAA8B,CAAC;AAEzD,OAAO,EAAE,oBAAoB,EAAmB,MAAM,qCAAqC,CAAC;AAC5F,OAAO,EAAE,oBAAoB,EAAqB,MAAM,qCAAqC,CAAC;AAE9F,OAAO,EAAE,qBAAqB,EAAE,MAAM,6DAA6D,CAAC;AAEpG,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,2BAA2B,EAAE,MAAM,wCAAwC,CAAC;AACrF,OAAO,EAAE,cAAc,EAAE,MAAM,6BAA6B,CAAC;AAE7D,OAAO,EAAE,MAAM,EAAE,MAAM,uBAAuB,CAAC;AAC/C,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,MAAM,aAAa,CAAC;AACtD,OAAO,EAAE,kBAAkB,EAAE,MAAM,4BAA4B,CAAC;AAChE,OAAO,EAAE,sBAAsB,EAAE,MAAM,gCAAgC,CAAC;AACxE,OAAO,EAAE,YAAY,EAAE,MAAM,oBAAoB,CAAC;AAClD,OAAO,EAAE,kCAAkC,EAAE,MAAM,8CAA8C,CAAC;;;;;AAKlG,OAAO,EAAE,SAAS,EAAE,MAAM,6BAA6B,CAAC;AAExD;;;;;;;;;;;;;;;;;;;;;;;;GAwBG;AAEI,IAAM,aAAa,qBAAnB,MAAM,aAAc,SAAQ,UAAU;IAAtC;;;QAuIL,sBAAsB;QACqB,WAAM,GAAG,GAAG,CAAC;QAExD,oBAAoB;QACuB,iBAAY,GAAG,CAAC,CAAC;QAEhB,aAAQ,GAAG,KAAK,CAAC;QAI7B,cAAS,GAAG,EAAE,CAAC;QA+B/C,wCAAkB,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,6CAA6C,CAAC,EAAC;QAElG,gCAAU,IAAI,EAAC;QAEf,uCAAiB,IAAI,CAAC,MAAM,EAAC;QAE7B,gCAAU,IAAI,EAAC;QAEf,gCAAU,CAAC,EAAC;QAEZ,iCAAW,IAAI,EAAC;QAEhB,kCAAY,CAAC,EAAC;QAEd,wCAA8B;QAE9B,kCAAY,IAAI,2BAA2B,CAAC,IAAI,CAAC,EAAC;QAElD,8CAAiC;QAEjC,kDAAqC;QAErC,6BAAO,IAAI,aAAa,CAAC,IAAI,CAAC,EAAC;QAE/B,+BAAS,IAAI,CAAC,WAAW,EAAC;QAE1B,wCAAkB,IAAI,cAAc,CAAC,GAAG,EAAE;YACxC,IAAI,uBAAA,IAAI,4BAAO,KAAK,IAAI,CAAC,WAAW,EAAE;gBACpC,uBAAA,IAAI,6DAAc,MAAlB,IAAI,CAAgB,CAAC;aACtB;QACH,CAAC,CAAC,EAAC;QAEH,qCAAe,IAAI,cAAc,CAAC,IAAI,EAAE;YACtC,IAAI,EAAE;gBACJ,GAAG,eAAa,CAAC,IAAI;aACtB;YACD,OAAO,EAAE;gBACP,GAAG,eAAa,CAAC,IAAI;aACtB,EAAE,GAAG,IAAI,CAAC,SAAS,IAAI,EAAE;SAC3B,CAAC,EAAC;QAEH,mCAAa,IAAI,qBAAqB,CAAC,IAAI,EAAE;YAC3C,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,MAAM,CAAC;YACtD,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,aAAa,CAAC;SAC9D,CAAC,EAAC;QAEH,iFAAiF;QACjF,mCAAa,IAAI,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC;YAClC,OAAO,EAAE,uBAAA,IAAI,0DAAW,CAAC,IAAI,CAAC,IAAI,CAAC;YACnC,cAAc,EAAE,uBAAA,IAAI,iEAAkB,CAAC,IAAI,CAAC,IAAI,CAAC;YACjD,cAAc,EAAE,uBAAA,IAAI,iEAAkB,CAAC,IAAI,CAAC,IAAI,CAAC;YACjD,cAAc,EAAE,uBAAA,IAAI,iEAAkB,CAAC,IAAI,CAAC,IAAI,CAAC;YACjD,UAAU,EAAE,uBAAA,IAAI,6DAAc,CAAC,IAAI,CAAC,IAAI,CAAC;YACzC,KAAK,EAAE,uBAAA,IAAI,wDAAS,CAAC,IAAI,CAAC,IAAI,CAAC;YAC/B,KAAK,EAAE,uBAAA,IAAI,wDAAS,CAAC,IAAI,CAAC,IAAI,CAAC;YAC/B,IAAI,EAAE,uBAAA,IAAI,uDAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;YAC7B,OAAO,EAAE,uBAAA,IAAI,0DAAW,CAAC,IAAI,CAAC,IAAI,CAAC;YACnC,UAAU,EAAE,uBAAA,IAAI,qEAAsB,CAAC,IAAI,CAAC,IAAI,CAAC;YACjD,MAAM,EAAE,uBAAA,IAAI,yDAAU,CAAC,IAAI,CAAC,IAAI,CAAC;YACjC,OAAO,EAAE,uBAAA,IAAI,0DAAW,CAAC,IAAI,CAAC,IAAI,CAAC;YACnC,UAAU,EAAE,uBAAA,IAAI,6DAAc,CAAC,IAAI,CAAC,IAAI,CAAC;YACzC,YAAY,EAAE,uBAAA,IAAI,+DAAgB,CAAC,IAAI,CAAC,IAAI,CAAC;SAC9C,CAAC,CAAC,EAAC;QAstBJ,oDAAkC;QAmFlC,uCAAiB,CAAC,KAAiB,EAAE,EAAE;YACrC,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,aAAa,CAAC,CAAC;YAC5D,IAAI,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;gBACjD,uBAAA,IAAI,yDAAU,MAAd,IAAI,CAAY,CAAC;aAClB;QACH,CAAC,EAAC;IA2FJ,CAAC;IAnzBC,8BAA8B;IAC9B,IAAI,WAAW;QACb,OAAO,uBAAA,IAAI,mCAAc,EAAE,WAAW,IAAI,CAAC,CAAC;IAC9C,CAAC;IAED,IAAI,WAAW,CAAC,OAAe;QAC7B,IAAI,uBAAA,IAAI,mCAAc,EAAE;YACtB,uBAAA,IAAI,mCAAc,CAAC,WAAW,GAAG,OAAO,CAAC;SAC1C;IACH,CAAC;IAED,4BAA4B;IAC5B,IAAI,QAAQ;QACV,OAAO,uBAAA,IAAI,6DAAU,CAAC;IACxB,CAAC;IAED,6BAA6B;IAC7B,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC;IAC3B,CAAC;IAED,8BAA8B;IAC9B,IAAI,MAAM;QACR,OAAO,CAAC,uBAAA,IAAI,mCAAc,IAAI,CAAC,CAAC,uBAAA,IAAI,6BAAQ,CAAC;IAC/C,CAAC;IAED,mBAAmB;IACnB,IAAI,UAAU;QACZ,OAAO,uBAAA,IAAI,+DAAY,IAAI,CAAC,CAAC;IAC/B,CAAC;IAEkB,KAAK,CAAC,iBAAiB;QACxC,OAAO,OAAO,CAAC,GAAG,CAAC;YACjB,KAAK,CAAC,iBAAiB,EAAE;YACzB,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,gBAAgB,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC;SACzF,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;IACnC,CAAC;IAED,iBAAiB;QACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,eAAa,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,uBAAA,IAAI,0DAAW,CAAC,CAAC;QAClD,uBAAA,IAAI,iEAAkB,MAAtB,IAAI,CAAoB,CAAC;QACzB,uBAAA,IAAI,6DAAc,MAAlB,IAAI,CAAgB,CAAC;QACrB,gHAAiB,MAAM,CAAC,gBAAgB,EAAE,CAAC,IAAI,CAAC,MAAA,CAAC;IACnD,CAAC;IAED,oBAAoB;QAClB,uBAAA,IAAI,iEAAkB,MAAtB,IAAI,CAAoB,CAAC;QACzB,eAAa,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACrC,KAAK,CAAC,oBAAoB,EAAE,CAAC;IAC/B,CAAC;IAED,MAAM;QACJ,MAAM,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,IAAI,CAAC;QACzB,MAAM,EAAE,GAAG,EAAE,GAAG,uBAAA,IAAI,0BAAK,CAAC;QAC1B,MAAM,EAAE,IAAI,EAAE,MAAM,GAAG,EAAE,EAAE,GAAG,uBAAA,IAAI,gCAAW,CAAC;QAC9C,MAAM,QAAQ,GAAG,uBAAA,IAAI,4DAAS,CAAC;QAC/B,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,eAAa,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,eAAa,CAAC,KAAK,CAAC,WAAW,CAAC;QAC/F,MAAM,SAAS,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAChG,MAAM,cAAc,GAClB,CAAC,uBAAA,IAAI,mCAAc;YACnB,uBAAA,IAAI,+DAAY,GAAG,CAAC;YACpB,IAAI,CAAC,WAAW,KAAK,CAAC;YACtB,CAAC,uBAAA,IAAI,6DAAU,CAAC;QAClB,MAAM,eAAe,GACnB,CAAC,uBAAA,IAAI,mCAAc;YACnB,uBAAA,IAAI,+DAAY,GAAG,CAAC;YACpB,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC,QAAQ;YAClC,CAAC,uBAAA,IAAI,6DAAU,CAAC;QAClB,MAAM,SAAS,GACX,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,OAAO,CAAC;YAC/C,CAAC,CAAC,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAClC,MAAM,YAAY,GAAG,uBAAA,IAAI,+DAAY,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAC/D,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,eAAa,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,eAAa,CAAC,KAAK,CAAC,IAAI,CAAC;QAErF,MAAM,YAAY,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QACxD,MAAM,cAAc,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,GAAG,GAAG,CAAC;QAE7E,MAAM,WAAW,GAAG,CAAC,CAAC,uBAAA,IAAI,6BAAQ,EAAE,gBAAgB,CAAC,oCAAoC,CAAC,CAAC;QAE3F,OAAO,IAAI,CAAA;;2BAEY,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC;mBACpC,QAAQ,CAAC;YACd,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE;YACV,CAAC,GAAG,CAAC,EAAE,IAAI;YACX,WAAW,EAAE,QAAQ;YACrB,kBAAkB,EAAE,WAAW;YAC/B,eAAe,EAAE,CAAC,CAAC,uBAAA,IAAI,qCAAgB;SACxC,CAAC;qCACuB,uBAAA,IAAI,+DAAY;qDACA,uBAAA,IAAI,iEAAkB;sBACrD,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE;;;2CAGV,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA;wCAC3B,IAAI,CAAC,MAAM,6BAA6B;;;kCAG9C,SAAS;;gCAEX,CAAC,uBAAA,IAAI,mCAAc,IAAI,YAAY;6BACtC,uBAAA,IAAI,4DAAa;6BACjB,uBAAA,IAAI,4DAAa;gBAC9B,QAAQ;;mCAEW,SAAS;;;;gFAIoC,CAAC,IAAI,CAAC,WAAW;gDACjD,uBAAA,IAAI,8DAAe,IAAI,IAAI,CAAC,WAAW;;+EAER,CAAC,IAAI,CAAC,UAAU;+CAChD,uBAAA,IAAI,8DAAe,IAAI,IAAI,CAAC,UAAU;;;;;;;oCAOjD,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,MAAM,CAAC;;;;;+BAKlC,cAAc;mCACV,IAAI,CAAC,QAAQ,KAAK,CAAC;+BACvB,uBAAA,IAAI,6DAAc;mCACd,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,MAAM,CAAC;;;+BAGjC,uBAAA,IAAI,gEAAa;;sCAEV,uBAAA,IAAI,2DAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA;;YAElD,uBAAA,IAAI,qEAAsB,MAA1B,IAAI,CAAwB,EAAE;;YAE9B,uBAAA,IAAI,qCAAgB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA;;;;kCAIV,SAAS;;gCAEX,CAAC,uBAAA,IAAI,mCAAc;6BACtB,uBAAA,IAAI,6DAAc;gBAC/B,QAAQ;;mCAEW,SAAS;yBACnB,uBAAA,IAAI,2DAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA;;;mCAGd,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,QAAQ,CAAC;;;oCAG9B,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,QAAQ,CAAC;;4BAEvC,CAAC,uBAAA,IAAI,mCAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG;;;8BAG3B,IAAI,CAAC,MAAM,GAAG,GAAG;mCACZ,CAAC,uBAAA,IAAI,mCAAc;+BACvB,uBAAA,IAAI,+DAAgB;;WAExC;WACA,GAAG,CAAC,uBAAA,IAAI,2DAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA;;oCAEH,uBAAA,IAAI,gEAAa;;;4CAGT,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC;;;;;YAK/D,uBAAA,IAAI,qEAAsB,MAA1B,IAAI,EAAuB,oBAAoB,CAAC;;;;kCAI1B,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,QAAQ,CAAC;;gCAEjC,cAAc;6BACjB,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE;gBAChC,eAAa,CAAC,KAAK,CAAC,MAAM;;mCAEP,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,QAAQ,CAAC;;;;;kCAKhC,SAAS;;gCAEX,CAAC,uBAAA,IAAI,mCAAc,IAAI,YAAY;6BACtC,uBAAA,IAAI,4DAAa;6BACjB,uBAAA,IAAI,4DAAa;gBAC9B,QAAQ;;mCAEW,SAAS;;;;;kCAKV,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,SAAS,CAAC;;gCAElC,eAAe;6BAClB,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE;gBACjC,eAAa,CAAC,KAAK,CAAC,OAAO;;mCAER,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,SAAS,CAAC;wBAC3C,GAAG,CAAC,uBAAA,IAAI,4DAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA;;kEAEa,uBAAA,IAAI,6DAAU,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK;;;kCAG/D,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,MAAM,CAAC;;;8BAGjC,uBAAA,IAAI,6DAAc;gBAChC,eAAa,CAAC,KAAK,CAAC,SAAS;;mCAEV,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,MAAM,CAAC;;;;;kCAK9B,MAAM,CAAC,CAAC,uBAAA,IAAI,6DAAU,CAAqB;4BACjD,QAAQ,CAAC,MAAM,CAAC;4BAChB,QAAQ,CAAC,EAAE,IAAI,EAAE,CAAC;+BACf,uBAAA,IAAI,8DAAe;gCAClB,uBAAA,IAAI,+DAAgB,KAAK,uBAAA,IAAI,2DAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA;kCACnE,KAAK,CAAC,SAAS;;8BAEnB,GAAG,EAAE,CAAC,uBAAA,IAAI,gEAAiB,MAArB,IAAI,EAAkB,KAAK,CAAC;gBAChD,KAAK,CAAC,SAAS;sBACT,CAAC;qBACF;;;kCAGa,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,OAAO,CAAC;;gCAEhC,CAAC,uBAAA,IAAI,mCAAc;;8BAErB,uBAAA,IAAI,gEAAiB;gCACnB,uBAAA,IAAI,+DAAgB;gBACpC,eAAa,CAAC,KAAK,CAAC,KAAK;;mCAEN,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,OAAO,CAAC;;;;;;;;;uBAS1C,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,uBAAA,IAAI,4DAAS;;;8BAGzB,uBAAA,IAAI,8DAAe;;;;;8BAKnB,uBAAA,IAAI,8DAAe;;;;8BAInB,uBAAA,IAAI,8DAAe;sCACX,uBAAA,IAAI,qEAAsB;;;;KAI3D,CAAC;IACJ,CAAC;IAwCD,KAAK,CAAC,YAAY;QAChB,oEAAoE;QACpE,MAAM,IAAI,CAAC,cAAc,CAAC;QAC1B,uBAAA,IAAI,2EAA4B,MAAhC,IAAI,CAA8B,CAAC;IACrC,CAAC;IAED,OAAO,CAAC,iBAAuC;QAC7C,IAAI,iBAAiB,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,uBAAA,IAAI,mCAAc,IAAI,IAAI,CAAC,MAAM,KAAK,uBAAA,IAAI,mCAAc,CAAC,MAAM,EAAE;YACxG,uBAAA,IAAI,mCAAc,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;SACzC;QACD,IAAI,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;YACjC,uBAAA,IAAI,6DAAc,MAAlB,IAAI,CAAgB,CAAC;SACtB;IACH,CAAC;IAmZD;;OAEG;IACH,IAAI;QACF,IAAI,uBAAA,IAAI,mCAAc,EAAE;YACtB,uBAAA,IAAI,gCAAkB,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,uBAAA,IAAI,mCAAc,EAAE,MAAM,CAAC,MAAA,CAAC;YAChE,uBAAA,IAAI,mCAAc,CAAC,MAAM,GAAG,CAAC,CAAC;SAC/B;IACH,CAAC;IAED;;OAEG;IACH,MAAM;QACJ,IAAI,uBAAA,IAAI,mCAAc,EAAE;YACtB,uBAAA,IAAI,mCAAc,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,uBAAA,IAAI,oCAAe,EAAE,GAAG,CAAC,CAAC;SAChE;IACH,CAAC;IAED;;OAEG;IACH,qBAAqB;QACnB,IAAI,uBAAA,IAAI,mCAAc,EAAE;YACtB,uBAAA,IAAI,mCAAc,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,uBAAA,IAAI,kEAAmB,MAAvB,IAAI,EAAoB,uBAAA,IAAI,mCAAc,CAAC,YAAY,GAAG,uBAAA,IAAI,8BAAS,CAAC,CAAC;SAChI;IACH,CAAC;IAED;;OAEG;IACH,qBAAqB;QACnB,IAAI,uBAAA,IAAI,mCAAc,EAAE;YACtB,uBAAA,IAAI,mCAAc,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,uBAAA,IAAI,kEAAmB,MAAvB,IAAI,EAAoB,uBAAA,IAAI,mCAAc,CAAC,YAAY,GAAG,uBAAA,IAAI,8BAAS,CAAC,CAAC;SAChI;IACH,CAAC;IAED;;OAEG;IACH,KAAK;QACH,OAAO,uBAAA,IAAI,mCAAc,EAAE,KAAK,EAAE,EAAE,CAAC;IACvC,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,IAAI;QACR,OAAO,MAAM,uBAAA,IAAI,mCAAc,EAAE,IAAI,EAAE,EAAE,CAAC;IAC5C,CAAC;IAED;;OAEG;IACH,IAAI,CAAC,OAAe;QAClB,uBAAA,IAAI,mCAAc,EAAE,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;QACzD,IAAI,uBAAA,IAAI,mCAAc,EAAE;YACtB,MAAM,IAAI,GAAG,uBAAA,IAAI,6DAAU,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,uBAAA,IAAI,+DAAY,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,uBAAA,IAAI,6DAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACjG,IAAI,IAAI,IAAI,CAAC,EAAE;gBACb,uBAAA,IAAI,mCAAc,CAAC,WAAW,GAAG,IAAI,CAAC;gBACtC,IAAI,CAAC,aAAa,EAAE,CAAC;aACtB;SACF;IACH,CAAC;IAED;;OAEG;IACH,mBAAmB,CAAC,OAAO,GAAG,CAAC;QAC7B,MAAM,WAAW,GAAG,uBAAA,IAAI,mCAAc,EAAE,WAAW,IAAI,CAAC,CAAC;QACzD,MAAM,IAAI,GAAG,WAAW,GAAG,OAAO,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAClB,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,EAAE,GAAG,EAAE;QACZ,IAAI,CAAC,mBAAmB,CAAC,CAAC,EAAE,CAAC,CAAC;IAChC,CAAC;IAED;;;OAGG;IACH,OAAO,CAAC,EAAE,GAAG,EAAE;QACb,IAAI,CAAC,mBAAmB,CAAC,EAAE,CAAC,CAAC;IAC/B,CAAC;;;IA78BC,OAAO,uBAAA,IAAI,mCAAc,EAAE,QAAQ,IAAI,CAAC,CAAC;AAC3C,CAAC;IAGC,OAAO,uBAAA,IAAI,mCAAc,EAAE,UAAU,IAAI,CAAC,CAAC;AAC7C,CAAC;IAmEC,OAAO,CAAC,uBAAA,IAAI,2DAAQ,IAAI,CAAC,uBAAA,IAAI,8DAAW,CAAC;AAC3C,CAAC;IAGC,OAAO,IAAI,CAAC,MAAM,KAAK,MAAM,CAAC;AAChC,CAAC;IAGC,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC;AAC9C,CAAC;IAGC,OAAO,CAAC,uBAAA,IAAI,0DAAO,EAAE,uBAAA,IAAI,8DAAW,EAAE,uBAAA,IAAI,+DAAY,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;AACnF,CAAC;IAGC,OAAO,CACL,uBAAA,IAAI,2DAAQ,CAAC,MAAM,GAAG,CAAC;QACvB,CAAC,CAAC,IAAI,CAAC,WAAW;QAClB,CAAC,CAAC,IAAI,CAAC,UAAU;QACjB,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,CAChC,CAAC;AACJ,CAAC;IAGC,OAAO,uBAAA,IAAI,gCAAW,CAAC,IAAI,CAAC;AAC9B,CAAC,qEAEa,IAAI;IAChB,IAAI,IAAI,EAAE;QACR,uBAAA,IAAI,yDAAU,MAAd,IAAI,CAAY,CAAC;QACjB,uBAAA,IAAI,wBAAU,IAAI,CAAC,WAAW,MAAA,CAAC;QAC/B,uBAAA,IAAI,qCAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KACpC;SAAM;QACL,uBAAA,IAAI,yDAAU,MAAd,IAAI,CAAY,CAAC;QACjB,uBAAA,IAAI,qCAAgB,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;KACtC;AACH,CAAC;IAMC,OAAO,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,uBAAA,IAAI,6BAAQ,GAAG,uBAAA,IAAI,8BAAS,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA,EAAE,CAAA,CAAC,GAAG,uBAAA,IAAI,8BAAS,GAAG,uBAAA,IAAI,6BAAQ,CAAC,CAAC;AAC9G,CAAC;IAMC,OAAO,CAAC,uBAAA,IAAI,mCAAc,EAAE,QAAQ,EAAE,GAAG,EAAE,MAAM,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC;QAC5D,uBAAA,IAAI,mCAAc,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACpC,uBAAA,IAAI,mCAAc,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;QACpC,CAAC,CAAC,KAAK,CAAC;AACZ,CAAC;IAMC,OAAO,uBAAA,IAAI,mCAAc,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7C,uBAAA,IAAI,mCAAc,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC,CAAC;AACR,CAAC;IAGC,OAAO,gBAAgB,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,CAAC,CAAC;AACjD,CAAC;IAGC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,IAAI,EAAE,CAAC;IACpC,OAAO,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE,aAAa,CAAC,eAAe,CAAC,CAAC;AAC9D,CAAC;IAGC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,EAAE,aAAa,CAAC,uBAAuB,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,IAAI,EAAE,CAAC;IACzF,OAAO,CAAC,CAAC;AACX,CAAC;IAGC,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC;AAC9B,CAAC,qFAuRqB,EAAE,GAAG,eAAe;IACxC,OAAO,IAAI,CAAA;wBACS,EAAE;mBACP,EAAE;wBACG,EAAE;;;;+BAIK,CAAC,uBAAA,IAAI,mCAAc,IAAI,IAAI,CAAC,YAAY,GAAG,GAAG;4BACjD,IAAI,CAAC,qBAAqB;cACxC,eAAa,CAAC,KAAK,CAAC,kBAAkB;;wBAE5B,EAAE;gCACM,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,OAAO,CAAC;8BAChC,CAAC,uBAAA,IAAI,mCAAc;4BACrB,uBAAA,IAAI,qEAAsB;6BACzB,uBAAA,IAAI,qEAAsB;2BAC5B,IAAI,CAAC,YAAY,EAAE,OAAO,CAAC,uBAAA,IAAI,+BAAU,CAAC,IAAI,uBAAA,IAAI,kEAAe,CAAC,GAAG,CAAC,IAAI,CAAA,EAAE,CAAA,IAAI,CAAA;6BAC9E,IAAI,CAAC,OAAO,CAAC,uBAAA,IAAI,+BAAU,CAAC;0BAC/B,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,uBAAA,IAAI,+BAAU,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,uBAAA,IAAI,+BAAU,CAAC;gBACpF,IAAI,CAAC,OAAO,CAAC,uBAAA,IAAI,+BAAU,CAAC;sBACtB,CAAC;;wBAEC,EAAE;;;;+BAIK,CAAC,uBAAA,IAAI,mCAAc,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI;4BAClD,IAAI,CAAC,qBAAqB;cACxC,eAAa,CAAC,KAAK,CAAC,kBAAkB;;;+BAGrB,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,OAAO,CAAC;;KAExD,CAAC;AACJ,CAAC,gCAiBD,KAAK,sCAAe,IAAI,GAAG,uBAAA,IAAI,kCAAa,CAAC,QAAQ;IACnD,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,UAAU,IAAI,OAAO,EAAE,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC5D,MAAM,uBAAA,IAAI,kCAAa,CAAC,eAAe,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IACnD,uBAAA,IAAI,iEAAkB,MAAtB,IAAI,CAAoB,CAAC;IACzB,uBAAA,IAAI,uEAAwB,MAA5B,IAAI,CAA0B,CAAC;AACjC,CAAC;IAGC,IAAI,uBAAA,IAAI,0DAAO,EAAE,SAAS,EAAE;QAAE,uBAAA,IAAI,0DAAO,CAAC,SAAS,GAAG,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;KAAE;IACvF,IAAI,uBAAA,IAAI,8DAAW,EAAE,SAAS,EAAE;QAAE,uBAAA,IAAI,8DAAW,CAAC,SAAS,GAAG,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;KAAE;IACnG,IAAI,uBAAA,IAAI,+DAAY,EAAE,SAAS,EAAE;QAAE,uBAAA,IAAI,+DAAY,CAAC,SAAS,GAAG,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;KAAE;AACxG,CAAC;IAGC,IAAI,uBAAA,IAAI,+DAAY,EAAE,eAAe,EAAE;QAAE,uBAAA,IAAI,+DAAY,CAAC,eAAe,GAAG,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;KAAE;IAClH,IAAI,uBAAA,IAAI,+DAAY,EAAE,aAAa,EAAE;QAAE,uBAAA,IAAI,+DAAY,CAAC,aAAa,GAAG,uBAAA,IAAI,kCAAa,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;KAAE;AAC9G,CAAC;IAGC,KAAK,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,IAAI,uBAAA,IAAI,gCAAW,EAAE;QAC/C,uBAAA,IAAI,uCAAkB,EAAE,mBAAmB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;KAC9D;AACH,CAAC,6EAKiB,eAAuB;IACvC,IAAI,eAAe,EAAE;QACnB,uBAAA,IAAI,iEAAkB,MAAtB,IAAI,CAAoB,CAAC;QACzB,uBAAA,IAAI,mCAAqB,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,SAAS,MAAA,CAAC;KACnE;IAED,uBAAA,IAAI,+BAAiB,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,SAAS,MAAA,CAAC;IAE9D,IAAI,uBAAA,IAAI,mCAAc,EAAE;QACtB,uBAAA,IAAI,mCAAc,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;QAC/C,uBAAA,IAAI,mCAAc,CAAC,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;QACxD,IAAI,CAAC,MAAM,GAAG,uBAAA,IAAI,mCAAc,CAAC,MAAM,IAAI,GAAG,CAAC;QAE/C,KAAK,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,IAAI,uBAAA,IAAI,gCAAW,EAAE;YAC/C,uBAAA,IAAI,mCAAc,CAAC,gBAAgB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;SACtD;KACF;AACH,CAAC;IAMC,IAAI,CAAC,MAAM,GAAG,uBAAA,IAAI,mCAAc,EAAE,MAAM,IAAI,GAAG,CAAC;AAClD,CAAC;IAMC,IAAI,CAAC,aAAa,EAAE,CAAC;AACvB,CAAC,+DAEU,KAAY;IACrB,MAAM,MAAM,GAAG,KAAK,CAAC,MAAiB,CAAC;IACvC,MAAM,GAAG,GAAG,MAAe,CAAC;IAC5B,MAAM,KAAK,GAAG,GAAG,EAAE,SAAS,CAAC;IAC7B,IAAI,KAAK,EAAE;QACT,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAClB;IACD,uBAAA,IAAI,6DAAc,MAAlB,IAAI,CAAgB,CAAC;AACvB,CAAC;IAMC,IAAI,CAAC,aAAa,EAAE,CAAC;IACrB,uBAAA,IAAI,+DAAY,EAAE,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC/C,CAAC;IAMC,uBAAA,IAAI,yBAAW,IAAI,MAAA,CAAC;AACtB,CAAC;IAMC,IAAI,CAAC,aAAa,EAAE,CAAC;AACvB,CAAC;IAMC,IAAI,CAAC,aAAa,EAAE,CAAC;AACvB,CAAC;IAMC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;AAC5C,CAAC;IAMC,uBAAA,IAAI,yBAAW,IAAI,MAAA,CAAC;IACpB,IAAI,CAAC,aAAa,EAAE,CAAC;AACvB,CAAC;IAMC,uBAAA,IAAI,yBAAW,KAAK,MAAA,CAAC;IACrB,IAAI,CAAC,aAAa,EAAE,CAAC;AACvB,CAAC;IAOC,IAAI,CAAC,uBAAA,IAAI,mCAAc,IAAI,IAAI,CAAC,YAAY,KAAK,uBAAA,IAAI,mCAAc,CAAC,YAAY,EAAE;QAChF,IAAI,CAAC,YAAY,GAAG,uBAAA,IAAI,mCAAc,EAAE,YAAY,IAAI,CAAC,CAAC;KAC3D;AACH,CAAC,qFAMqB,KAAY;IAChC,IAAI,uBAAA,IAAI,mCAAc,EAAE;QACtB,MAAM,MAAM,GAAG,KAAK,EAAE,MAA2B,CAAC;QAClD,MAAM,GAAG,GAAG,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACvE,MAAM,GAAG,GAAG,uBAAA,IAAI,kEAAmB,MAAvB,IAAI,EAAoB,GAAG,CAAC,CAAC;QACzC,uBAAA,IAAI,mCAAc,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;KAC3D;AACH,CAAC;AAED;;GAEG;AACH,KAAK,qCAAc,KAAY;IAC7B,MAAM,MAAM,GAAG,KAAK,EAAE,MAAqB,CAAC;IAC5C,MAAM,OAAO,GAAG,MAAM,EAAE,aAAa,EAAE,OAAO,CAAC,YAAY,CAAqB,CAAC;IACjF,KAAK,MAAM,QAAQ,IAAI,eAAa,CAAC,SAAS,EAAE;QAC9C,IAAI,QAAQ,KAAK,IAAI,EAAE;YACrB,QAAQ,CAAC,KAAK,EAAE,CAAC;SAClB;KACF;IACD,IAAI,uBAAA,IAAI,6BAAQ,EAAE;QAChB,IAAI,CAAC,IAAI,EAAE,CAAC;KACb;SAAM;QACL,IAAI,CAAC,KAAK,EAAE,CAAC;KACd;IACD,UAAU,CAAC,GAAG,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;AACxC,CAAC;IAOC,KAAK,MAAM,EAAE,IAAI,CAAC,aAAa,EAAE,YAAY,CAAC,EAAE;QAC9C,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,EAAE,aAAa,CAAW,IAAI,EAAE,EAAE,CAAC,CAAC;QACpE,QAAQ,EAAE,cAAc,EAAE,CAAC;KAC5B;AACH,CAAC;IAMC,uBAAA,IAAI,yBAAW,KAAK,MAAA,CAAC;IACrB,IAAI,CAAC,aAAa,EAAE,CAAC;AACvB,CAAC;IAMC,IAAI,CAAC,aAAa,EAAE,CAAC;AACvB,CAAC;IAMC,IAAI,CAAC,aAAa,EAAE,CAAC;AACvB,CAAC,qEAKa,KAA2C;IACvD,IAAI,uBAAA,IAAI,6DAAU,EAAE;QAClB,MAAM,OAAO,GAAG,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACpD,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,GAAG,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC;QAChD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KACpB;AACH,CAAC;IAMC,uBAAA,IAAI,+DAAY,EAAE,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAClD,IAAI,CAAC,aAAa,EAAE,CAAC;AACvB,CAAC,qEAKa,KAAY;IACxB,KAAK,CAAC,cAAc,EAAE,CAAC;IACvB,uBAAA,IAAI,4BAAa,CAAC,uBAAA,IAAI,6DAAU,mCAAA,CAAC;IACjC,KAAK,CAAC,eAAe,EAAE,CAAC;AAC1B,CAAC;IAIC,uBAAA,IAAI,iEAAkB,MAAtB,IAAI,CAAoB,CAAC;IACzB,uBAAA,IAAI,uEAAwB,MAA5B,IAAI,CAA0B,CAAC;IAC/B,uBAAA,IAAI,8DAAe,MAAnB,IAAI,CAAiB,CAAC;AACxB,CAAC;IAIC,MAAM,UAAU,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,EAAE,WAAW,IAAI,EAAE,CAAC;IAC5D,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,EAAE,WAAW,IAAI,EAAE,CAAC;IAC9D,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;QACzB,IAAI,CAAC,UAAU,KAAf,IAAI,CAAC,UAAU,GAAK,UAAU,EAAC;KAChC;IACD,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;QAC1B,IAAI,CAAC,WAAW,KAAhB,IAAI,CAAC,WAAW,GAAK,WAAW,EAAC;KAClC;IACD,IAAI,uBAAA,IAAI,0DAAO,IAAI,IAAI,CAAC,WAAW,EAAE;QACnC,uBAAA,IAAI,0DAAO,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;KAC5C;IACD,IAAI,uBAAA,IAAI,0DAAO,IAAI,IAAI,CAAC,UAAU,EAAE;QAClC,uBAAA,IAAI,0DAAO,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;KAC1C;AACH,CAAC;IAOC,IAAI,uBAAA,IAAI,mCAAc,EAAE;QACtB,MAAM,EAAE,MAAM,EAAE,GAAG,uBAAA,IAAI,mCAAc,CAAC;QACtC,IAAI,MAAM,GAAG,CAAC,EAAE;YACd,uBAAA,IAAI,gCAAkB,uBAAA,IAAI,mCAAc,CAAC,MAAM,MAAA,CAAC;SACjD;QACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,uBAAA,IAAI,mCAAc,CAAC,MAAM,CAAC,CAAC,CAAC;KACpE;AACH,CAAC,yEAKe,KAA2C;IACzD,MAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC;IACrD,IAAI,uBAAA,IAAI,mCAAc,EAAE;QACtB,uBAAA,IAAI,mCAAc,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC;KACpE;AACH,CAAC,+EAKkB,MAAc;IAC/B,sCAAsC;IACtC,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,uBAAA,IAAI,6BAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,uBAAA,IAAI,6BAAQ,EAAE,MAAM,CAAC,CAAC,CAAC;IACvE,uCAAuC;IACvC,MAAM,UAAU,GAAG,CAAC,GAAG,uBAAA,IAAI,8BAAS,CAAC;IACrC,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,GAAG,UAAU,CAAC;AACvD,CAAC,2EAMC,KAAkE;IAElE,MAAM,MAAM,GAAG,CAAC,uBAAA,IAAI,0DAAO,EAAE,uBAAA,IAAI,8DAAW,EAAE,uBAAA,IAAI,+DAAY,CAAC,CAAC;IAChE,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,EAAE,eAAe,CAAC,QAAQ,EAAE,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC;IACxE,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,KAAK,IAAI,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IAClD,MAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,aAAa,CAAC,CAAC;IAE/H,UAAU,CAAC,GAAG,EAAE;QACd,UAAU,CAAC,GAAG,EAAE;YACd,YAAY,EAAE,KAAK,EAAE,CAAC;YACtB,IAAI,KAAK,KAAK,uBAAA,IAAI,+DAAY,EAAE;gBAC9B,uBAAA,IAAI,+DAAY,EAAE,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aACnD;QACH,CAAC,EAAE,CAAC,CAAC,CAAC;QACN,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,KAAK,EAAE,UAAU,EAAE;gBACrB,KAAK,CAAC,UAAU,EAAE,CAAC;aACpB;QACH,CAAC,EAAE,IAAI,CAAC,CAAC;IACX,CAAC,EAAE,CAAC,CAAC,CAAC;AACR,CAAC;AAID;;;GAGG;AACH,KAAK,wCAAiB,KAAoB;IACxC,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,EAAE;QAC1B,uBAAA,IAAI,gEAAiB,MAArB,IAAI,CAAmB,CAAC;KACzB;AACH,CAAC;AAED;;GAEG;AACH,KAAK,uCAAgB,KAAoB;IACvC,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,EAAE;QAC1B,MAAM,uBAAA,IAAI,yDAAU,MAAd,IAAI,CAAY,CAAC;KACxB;AACH,CAAC,yEAKe,KAAiB;IAC/B,MAAM,EAAE,aAAa,EAAE,GAAG,KAAK,CAAC;IAChC,IACE,aAAa,YAAY,WAAW;QACpC,aAAa,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,MAAM,CAAC,EAC5E;QACA,UAAU,CAAC,GAAG,EAAE,CAAC,uBAAA,IAAI,yDAAU,MAAd,IAAI,CAAY,EAAE,GAAG,CAAC,CAAC;KACzC;AACH,CAAC,gCAED,KAAK;IACH,MAAM,IAAI,CAAC,cAAc,CAAC;IAC1B,MAAM,SAAS,GAAG,cAAc,CAAC;IACjC,MAAM,QAAQ,GAAG,CAAC,CAAC;IACnB,MAAM,MAAM,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,aAAa,EAAE,CAAC,EAAE,CAAC;IACxD,MAAM,uBAAA,IAAI,gCAAW,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,CAAC,CAAC;AACvE,CAAC,4BAED,KAAK;IACH,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,MAAM,CAAW,CAAC;IAC/D,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,aAAa,CAAgB,CAAC;IAC7E,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE;QAAE,OAAO;KAAE;IACjC,MAAM,uBAAA,IAAI,6DAAc,MAAlB,IAAI,CAAgB,CAAC;IAC3B,MAAM,IAAI,CAAC,cAAc,CAAC;IAC1B,IAAI,uBAAA,IAAI,yCAAoB,EAAE;QAC5B,IAAI,CAAC,YAAY,CAAC,uBAAA,IAAI,yCAAoB,CAAC,CAAC;KAC7C;IACD,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,uBAAA,IAAI,oCAAe,CAAC,CAAC;AACxD,CAAC;IAGC,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,MAAM,CAAW,CAAC;IAC/D,uBAAA,IAAI,qCAAuB,IAAI,EAAE,UAAU,MAAA,CAAC;IAC5C,KAAK,MAAM,IAAI,IAAI,IAAI,EAAE,gBAAgB,CAAc,YAAY,CAAC,IAAI,EAAE,EAAE;QAC1E,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;KACpB;AACH,CAAC,4BAED,KAAK;IACH,uBAAA,IAAI,2EAA4B,MAAhC,IAAI,CAA8B,CAAC;IACnC,MAAM,CAAC,mBAAmB,CAAC,OAAO,EAAE,uBAAA,IAAI,oCAAe,CAAC,CAAC;IACzD,MAAM,uBAAA,IAAI,gCAAW,CAAC,IAAI,EAAE,CAAC;AAC/B,CAAC;IAGC,MAAM,UAAU,GAAG,uBAAA,IAAI,+DAAY,EAAE,YAAY,CAAC;IAClD,MAAM,KAAK,GAAG,uBAAA,IAAI,+DAAY,EAAE,KAAK,CAAC;IACtC,MAAM,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;IACtC,MAAM,KAAK,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACnE,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK,IAAI,YAAY,CAAC,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;IAC3G,MAAM,QAAQ,GAAG,GAAG,KAAK,KAAK,UAAU,EAAE,CAAC;IAC3C,CAAC,CAAC,YAAY,CAAC,MAAM,EAAE,iCAAiC,kBAAkB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;IACxF,CAAC,CAAC,YAAY,CAAC,UAAU,EAAE,GAAG,QAAQ,MAAM,CAAC,CAAC;IAC9C,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;IACzB,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;IAC7B,CAAC,CAAC,KAAK,EAAE,CAAC;IACV,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;AAC/B,CAAC;AAphCe,oBAAM,GAAG,CAAC,YAAY,EAAE,MAAM,EAAE,WAAW,CAAC,CAAC;AAE9C,uBAAS,GAAG,IAAI,GAAG,EAAiB,CAAC;AAEpD,oBAAoB;AACL,mBAAK,GAAG;IACrB,KAAK,EAAE,IAAI,CAAA;;;;;;KAMV;IACD,QAAQ,EAAE,IAAI,CAAA;;;;KAIb;IACD,OAAO,EAAE,IAAI,CAAA;;;;;;;;;;;KAWZ;IACD,SAAS,EAAE,IAAI,CAAA;;;;;;KAMd;IACD,YAAY,EAAE,IAAI,CAAA;;;;;;KAMjB;IACD,KAAK,EAAE,IAAI,CAAA;;;;;KAKV;IACD,IAAI,EAAE,IAAI,CAAA;;;;KAIT;IACD,kBAAkB,EAAE,IAAI,CAAA;;;;;;KAMvB;IACD,kBAAkB,EAAE,IAAI,CAAA;;;;;;KAMvB;IACD,MAAM,EAAE,IAAI,CAAA;;;;;;;;;;;KAWX;IACD,SAAS,EAAE,IAAI,CAAA;;;;;;KAMd;IACD,WAAW,EAAE,IAAI,CAAA;;;;;;KAMhB;CACF,CAAC;AAEK,kBAAI,GAAG;IACZ,MAAM,EAAE,MAAM;IACd,OAAO,EAAE,OAAO;IAChB,MAAM,EAAE,MAAM;IACd,QAAQ,EAAE,mBAAmB;IAC7B,SAAS,EAAE,oBAAoB;IAC/B,OAAO,EAAE,OAAO;IAChB,MAAM,EAAE,MAAM;IACd,QAAQ,EAAE,QAAQ;IAClB,QAAQ,EAAE,QAAQ;IAClB,MAAM,EAAE,cAAc;IACtB,OAAO,EAAE,OAAO;IAChB,OAAO,EAAE,mBAAmB;IAC5B,WAAW,EAAE,WAAW;IACxB,YAAY,EAAE,YAAY;IAC1B,YAAY,EAAE,YAAY;IAC1B,UAAU,EAAE,UAAU;CACvB,CAAC;AAG2B;IAA5B,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;kDAAsB;AAGrB;IAA5B,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;iDAAqB;AASpB;IAA5B,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;6CAAuD;AAGtD;IAA5B,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;6CAAiB;AAGF;IAA1C,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;6CAAc;AAGb;IAA1C,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;mDAAkB;AAEhB;IAA3C,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;+CAAkB;AAEhC;IAA5B,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;2CAAe;AAEX;IAA/B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;gDAAgB;AAIU;IADxD,oBAAoB,EAAE;IACtB,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,eAAe,EAAE,CAAC;mDAA6B;AAE7D;IAAvB,oBAAoB,EAAE;yCAAyB;AAGhD;IADC,qBAAqB,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC;mDACL;AAGrC;IADC,qBAAqB,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;kDACL;AAGpC;IADC,qBAAqB,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAE,eAAe,EAAE,CAAC;mDACnC;AAGtC;IADC,qBAAqB,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,uBAAuB,EAAE,CAAC;8CACrC;AAGvC;IADC,qBAAqB,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,2BAA2B,EAAE,CAAC;iDACtC;AAtKnC,aAAa;IADzB,aAAa,CAAC,iBAAiB,CAAC;GACpB,aAAa,CAunCzB;SAvnCY,aAAa","sourcesContent":["import { LitElement, html, type PropertyValues } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { property } from 'lit/decorators/property.js';\nimport { queryAssignedElements } from 'lit/decorators/query-assigned-elements.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\n\nimport { colorContextConsumer, type ColorTheme } from '../../lib/context/color/consumer.js';\nimport { colorContextProvider, type ColorPalette } from '../../lib/context/color/provider.js';\n\nimport { FloatingDOMController } from '@patternfly/pfe-core/controllers/floating-dom-controller.js';\n\nimport { DirController } from '../../lib/DirController.js';\nimport { HeadingLevelContextProvider } from '../../lib/context/headings/provider.js';\nimport { I18nController } from '../../lib/I18nController.js';\n\nimport { RhMenu } from '../rh-menu/rh-menu.js';\nimport { RhCue, getFormattedTime } from './rh-cue.js';\nimport { RhAudioPlayerAbout } from './rh-audio-player-about.js';\nimport { RhAudioPlayerSubscribe } from './rh-audio-player-subscribe.js';\nimport { RhTranscript } from './rh-transcript.js';\nimport { RhAudioPlayerScrollingTextOverflow } from './rh-audio-player-scrolling-text-overflow.js';\n\nimport buttonStyles from './rh-audio-player-button.css';\nimport rangeStyles from './rh-audio-player-range-styles.css';\nimport styles from './rh-audio-player.css';\nimport { RhTooltip } from '../rh-tooltip/rh-tooltip.js';\n\n/**\n * An audio player plays audio clips in the browser and includes other features.\n * @summary Plays audio clips and includes other features\n * @slot series - optional, name of podcast series\n * @slot title - optional, title of episode\n * @slot media - html `audio` element\n * @slot about - optional `rh-audio-player-about` panel with attribution\n * @slot subscribe - optional `rh-audio-player-subscribe` panel with links to subscribe\n * @slot transcript - optional `rh-transcript` panel with `rh-cue` elements\n * @cssprop --rh-audio-player-background-color - color of player background - {@default var(--rh-color-surface-lightest, #ffffff)}\n * @cssprop --rh-audio-player-icon-background-color {@default var(--rh-audio-player-background-color)}\n * @cssprop --rh-audio-player-border-color - color of player border - {@default var(--rh-color-border-subtle-on-light, #d2d2d2)}\n * @cssprop --rh-audio-player-secondary-text-color - player secondary text color - {@default var(--rh-color-text-secondary-on-light, #6a6e73)}\n * @cssprop --rh-audio-player-secondary-opacity - player secondary opacity used for partially faded elements - {@default 0.75}\n * @cssprop --rh-audio-player-range-thumb-color - color of time and volume range slider thumb - {@default var(--rh-color-accent-brand-on-light, #ee0000)}\n * @cssprop --rh-tooltip-content-padding-block-start - padding top on tooltips - {@default var(--rh-space-md, 8px)}\n * @cssprop --rh-tooltip-content-padding-block-end - padding bottom on tooltips - {@default var(--rh-space-md, 8px)}\n * @cssprop --rh-tooltip-content-padding-inline-start - padding left on tooltips -  {@default var(--rh-space-md, 8px)}\n * @cssprop --rh-tooltip-content-padding-inline-end - padding right on tooltips - {@default var(--rh-space-md, 8px)}\n * @csspart panel - expandable panel\n * @csspart toolbar - main controls\n * @csspart about - about the episode panel\n * @csspart subscribe - subscribe panel\n * @csspart transcript - transcript panel\n */\n@customElement('rh-audio-player')\nexport class RhAudioPlayer extends LitElement {\n  static readonly styles = [buttonStyles, styles, rangeStyles];\n\n  private static instances = new Set<RhAudioPlayer>();\n\n  // TODO: use rh-icon\n  private static icons = {\n    close: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\">\n        <path d=\"M14.3,12l3.4-3.4c0.4-0.4,0.4-1.1,0-1.5l-0.8-0.8c-0.4-0.4-1.1-0.4-1.5,0L12,9.7L8.6,6.3\n        c-0.4-0.4-1.1-0.4-1.5,0L6.3,7.1c-0.4,0.4-0.4,1.1,0,1.5L9.7,12l-3.4,3.4c-0.4,0.4-0.4,1.1,0,1.5l0.8,0.8c0.4,0.4,1.1,0.4,1.5,0\n        l3.4-3.4l3.4,3.4c0.4,0.4,1.1,0.4,1.5,0l0.8-0.8c0.4-0.4,0.4-1.1,0-1.5L14.3,12z\"/>\n      </svg>\n    `,\n    download: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\">\n        <path d=\"M7.56 12.45a.63.63 0 0 0 .88 0l4-4a.63.63 0 1 0-.88-.89L8.63 10.5V2A.62.62 0 0 0 8 1.38a.63.63 0 0 0-.63.62v8.5L4.44 7.56a.63.63 0 1 0-.88.89ZM14 14.38H2a.63.63 0 1 0 0 1.25h12a.63.63 0 0 0 0-1.25Z\"/>\n      </svg>\n    `,\n    forward: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32 32\">\n        <path d=\"M28,6.6L22.4,2v3.7h-7.4C9,5.7,4,10.6,4,16.7c0,6.1,5,11.1,11.1,11.1h7.4V26h-1.8h-5.5c-5.1,0-9.2-4.1-9.2-9.2\n          c0-5.1,4.1-9.2,9.2-9.2h5.5h1.8v3.7L28,6.6z\"/>\n        <g>\n          <path d=\"M10.4,19.5h1.8v-5l-1.8,0.8v-1l2.2-0.9h0.7v6.2h1.9v1h-4.8V19.5z\"/>\n          <path d=\"M16.4,19.6l0.7-0.8c0.6,0.5,1.2,0.8,1.9,0.8c0.9,0,1.5-0.6,1.5-1.4c0-0.8-0.6-1.3-1.5-1.3\n            c-0.5,0-0.9,0.1-1.4,0.4L16.8,17l0.2-3.7h4.3v1h-3.3l-0.1,2c0.5-0.2,1-0.3,1.5-0.3c1.4,0,2.4,0.9,2.4,2.1c0,1.4-1.1,2.4-2.7,2.4\n            C18,20.5,17.1,20.2,16.4,19.6z\"/>\n        </g>\n      </svg>\n    `,\n    menuKebab: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\">\n        <circle cx=\"12\" cy=\"22\" r=\"2\"/>\n        <circle cx=\"12\" cy=\"12\" r=\"2\"/>\n        <circle cx=\"12\" cy=\"2\" r=\"2\"/>\n      </svg>\n    `,\n    menuMeatball: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\">\n        <circle cx=\"22\" cy=\"12\" r=\"2\"/>\n        <circle cx=\"12\" cy=\"12\" r=\"2\"/>\n        <circle cx=\"2\" cy=\"12\" r=\"2\"/>\n      </svg>\n    `,\n    pause: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\">\n        <rect x=\"15.3\" y=\"2.1\" width=\"4.4\" height=\"19.9\"/>\n        <rect x=\"4.3\" y=\"2.1\" width=\"4.4\" height=\"19.9\"/>\n      </svg>\n    `,\n    play: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\">\n        <path d=\"M23.2,12L5.6,20.8V3.2L23.2,12z\"/>\n      </svg>\n    `,\n    playbackRateFaster: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 14 14\">\n        <path d=\"M11.2,7.7l-5.9,5.9c-0.4,0.4-1.1,0.4-1.5,0c0,0,0,0,0,0l-1-1c-0.4-0.4-0.4-1.1,0-1.5c0,0,0,0,0,0L7,7\n          L2.8,2.8c-0.4-0.4-0.4-1.1,0-1.5c0,0,0,0,0,0l1-1c0.4-0.4,1.1-0.4,1.5,0c0,0,0,0,0,0l5.9,5.9C11.6,6.7,11.6,7.3,11.2,7.7\n          C11.2,7.7,11.2,7.7,11.2,7.7z\"/>\n      </svg>\n    `,\n    playbackRateSlower: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 14 14\">\n        <path d=\"M2.8,7.7l5.9,5.9c0.4,0.4,1.1,0.4,1.5,0c0,0,0,0,0,0l1-1c0.4-0.4,0.4-1.1,0-1.5c0,0,0,0,0,0L7,7\n          l4.2-4.2c0.4-0.4,0.4-1.1,0-1.5c0,0,0,0,0,0l-1-1c-0.4-0.4-1.1-0.4-1.5,0c0,0,0,0,0,0L2.8,6.3C2.4,6.7,2.4,7.3,2.8,7.7\n          C2.8,7.7,2.8,7.7,2.8,7.7z\"/>\n      </svg>\n    `,\n    rewind: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32 32\">\n        <g>\n          <path d=\"M10.4,19.5h1.8v-5l-1.8,0.8v-1l2.2-0.9h0.7v6.2h1.9v1h-4.8V19.5z\"/>\n          <path d=\"M16.4,19.6l0.7-0.8c0.6,0.5,1.2,0.8,1.9,0.8c0.9,0,1.5-0.6,1.5-1.4c0-0.8-0.6-1.3-1.5-1.3\n            c-0.5,0-0.9,0.1-1.4,0.4L16.8,17l0.2-3.7h4.3v1h-3.3l-0.1,2c0.5-0.2,1-0.3,1.5-0.3c1.4,0,2.4,0.9,2.4,2.1c0,1.4-1.1,2.4-2.7,2.4\n            C18,20.5,17.1,20.2,16.4,19.6z\"/>\n        </g>\n        <path d=\"M4,6.6L9.5,2v3.7h7.4c6.1,0,11.1,5,11.1,11.1c0,6.1-5,11.1-11.1,11.1H9.5V26h1.8h5.5\n          c5.1,0,9.2-4.1,9.2-9.2c0-5.1-4.1-9.2-9.2-9.2h-5.5H9.5v3.7L4,6.6z\"/>\n      </svg>\n    `,\n    volumeMax: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\">\n        <path d=\"M14.2,2.2v2.2c4.3,0,7.6,3.4,7.6,7.6s-3.4,7.6-7.6,7.6v2.2c5.5,0,9.8-4.4,9.8-9.8S19.6,2.2,14.2,2.2z\"/>\n        <path d=\"M14.2,6.5v2.2c1.9,0,3.3,1.4,3.3,3.3s-1.4,3.3-3.3,3.3v2.2c3.1,0,5.5-2.4,5.5-5.5S17.2,6.5,14.2,6.5z\"/>\n        <path d=\"M12,2.2L5.3,7.6H2.2C1,7.6,0,8.6,0,9.8v4.4c0,1.2,1,2.2,2.2,2.2h3.2l6.7,5.5V2.2z\"/>\n      </svg>\n    `,\n    volumeMuted: html`\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\">\n        <polygon points=\"23.4,8.7 21.9,7.3 18.6,10.6 15.4,7.3 13.9,8.7 17.2,12 13.9,15.3 15.4,16.7 18.6,13.4 21.9,16.7 \n          23.4,15.3 20.1,12 \"/>\n        <path d=\"M11.6,3L5.5,8H2.6c-1.1,0-2,0.9-2,2v4c0,1.1,0.9,2,2,2h2.9l6.1,5V3z\"/>\n      </svg>\n    `,\n  };\n\n  static enUS = {\n    'play': 'Play',\n    'pause': 'Pause',\n    'seek': 'Seek',\n    'rewind': 'Rewind 15 seconds',\n    'advance': 'Advance 15 seconds',\n    'speed': 'Speed',\n    'mute': 'Mute',\n    'unmute': 'Unmute',\n    'volume': 'Volume',\n    'menu': 'More options',\n    'close': 'Close',\n    'about': 'About the episode',\n    'subscribe': 'Subscribe',\n    'transcript': 'Transcript',\n    'autoscroll': 'Autoscroll',\n    'download': 'Download'\n  };\n\n  /**  Audio's series name, e.g. Podcast series. */\n  @property({ reflect: true }) mediaseries?: string;\n\n  /**  Audio's title, e.g. Podcast episode title. */\n  @property({ reflect: true }) mediatitle?: string;\n\n  /**\n   * Layout:\n   *   - `mini` (default): minimal controls: play/pause, range; volume and other controls hidden behind menu\n   *   - `compact`: artwork and more controls: time, skip, volume\n   *   - `compact-wide`: like compact but full width\n   *   - `full`: maximal controls and artwork\n   */\n  @property({ reflect: true }) layout?: 'mini' | 'compact' | 'compact-wide' | 'full';\n\n  /** URL to audio's artwork */\n  @property({ reflect: true }) poster?: string;\n\n  /** Playback volume */\n  @property({ reflect: true, type: Number }) volume = 0.5;\n\n  /** Playback rate */\n  @property({ reflect: true, type: Number }) playbackRate = 1;\n\n  @property({ reflect: true, type: Boolean }) expanded = false;\n\n  @property({ reflect: true }) lang!: string;\n\n  @property({ attribute: false }) microcopy = {};\n\n  /** Element's color palette */\n  @colorContextProvider()\n  @property({ reflect: true, attribute: 'color-palette' }) colorPalette?: ColorPalette;\n\n  @colorContextConsumer() private on?: ColorTheme;\n\n  @queryAssignedElements({ slot: 'series' })\n  private _mediaseries?: HTMLElement[];\n\n  @queryAssignedElements({ slot: 'title' })\n  private _mediatitle?: HTMLElement[];\n\n  @queryAssignedElements({ slot: 'transcript', selector: 'rh-transcript' })\n  private _transcripts?: RhTranscript[];\n\n  @queryAssignedElements({ slot: 'about', selector: 'rh-audio-player-about' })\n  private _abouts?: RhAudioPlayerAbout[];\n\n  @queryAssignedElements({ slot: 'subscribe', selector: 'rh-audio-player-subscribe' })\n  private _subscribe?: RhAudioPlayerSubscribe[];\n\n  get #duration() {\n    return this.#mediaElement?.duration ?? 0;\n  }\n\n  get #readyState() {\n    return this.#mediaElement?.readyState ?? 0;\n  }\n\n  #isMobileSafari = window.navigator.userAgent.match(/(iPhone|iPad|Mobile).*(AppleWebkit|Safari)/i);\n\n  #paused = true;\n\n  #unmutedVolume = this.volume;\n\n  #pbrMin = 0.25;\n\n  #pbrMax = 2;\n\n  #pbrStep = 0.25;\n\n  #pbrFixed = 2;\n\n  #styles?: CSSStyleDeclaration;\n\n  #headings = new HeadingLevelContextProvider(this);\n\n  #mediaElement?: HTMLAudioElement;\n\n  #lastMediaElement?: HTMLAudioElement;\n\n  #dir = new DirController(this);\n\n  #width = this.offsetWidth;\n\n  #resizeObserver = new ResizeObserver(() => {\n    if (this.#width !== this.offsetWidth) {\n      this.#positionMenu();\n    }\n  });\n\n  #translation = new I18nController(this, {\n    'en': {\n      ...RhAudioPlayer.enUS\n    },\n    'en-US': {\n      ...RhAudioPlayer.enUS\n    }, ...this.microcopy ?? {}\n  });\n\n  #menufloat = new FloatingDOMController(this, {\n    content: () => this.shadowRoot?.getElementById('menu'),\n    invoker: () => this.shadowRoot?.getElementById('menu-button'),\n  });\n\n  /** Added to media element in light DOM. Bound so they can be cleaned up later */\n  #listeners = new Map(Object.entries({\n    canplay: this.#onCanplay.bind(this),\n    canplaythrough: this.#onCanplaythrough.bind(this),\n    durationchange: this.#onDurationchange.bind(this),\n    loadedmetadata: this.#onLoadedmetadata.bind(this),\n    loadeddata: this.#onLoadeddata.bind(this),\n    ended: this.#onEnded.bind(this),\n    pause: this.#onPause.bind(this),\n    play: this.#onPlay.bind(this),\n    playing: this.#onPlaying.bind(this),\n    ratechange: this.#onPlaybackRateChange.bind(this),\n    seeked: this.#onSeeked.bind(this),\n    seeking: this.#onSeeking.bind(this),\n    timeupdate: this.#onTimeupdate.bind(this),\n    volumechange: this.#onVolumechange.bind(this),\n  }));\n\n  get #isMini() {\n    return !this.#isFull && !this.#isCompact;\n  }\n\n  get #isFull() {\n    return this.layout === 'full';\n  }\n\n  get #isCompact() {\n    return !!this.layout?.startsWith('compact');\n  }\n\n  get #panels() {\n    return [this.#about, this.#subscribe, this.#transcript].filter(panel => !!panel);\n  }\n\n  get #hasMenu() {\n    return (\n      this.#panels.length > 1 ||\n      !!this.mediaseries ||\n      !!this.mediatitle ||\n      (this._abouts?.length ?? 0) > 0\n    );\n  }\n\n  get #menuOpen() {\n    return this.#menufloat.open;\n  }\n\n  set #menuOpen(open) {\n    if (open) {\n      this.#showMenu();\n      this.#width = this.offsetWidth;\n      this.#resizeObserver.observe(this);\n    } else {\n      this.#hideMenu();\n      this.#resizeObserver.unobserve(this);\n    }\n  }\n\n  /**\n   * gets list of allowable playback rates\n   */\n  get #playbackRates() {\n    return [...Array(Math.round(this.#pbrMax / this.#pbrStep)).keys()].map(k=>k * this.#pbrStep + this.#pbrMin);\n  }\n\n  /**\n   * gets media media time if set\n   */\n  get #mediaEnd() {\n    return (this.#mediaElement?.seekable?.end?.length || -1) > 0 &&\n    this.#mediaElement?.seekable?.end(0) ?\n      this.#mediaElement?.seekable?.end(0)\n      : false;\n  }\n\n  /**\n   * gets media media time if set\n   */\n  get #mediaStart() {\n    return this.#mediaElement?.seekable?.start(0) ?\n      this.#mediaElement?.seekable?.start(0)\n      : 0;\n  }\n\n  get #elapsedText() {\n    return getFormattedTime(this.currentTime || 0);\n  }\n\n  get #transcript(): RhTranscript | undefined {\n    const [t] = this._transcripts ?? [];\n    return t ?? this.shadowRoot?.querySelector('rh-transcript');\n  }\n\n  get #about() {\n    const [a = this.shadowRoot?.querySelector('rh-audio-player-about')] = this._abouts ?? [];\n    return a;\n  }\n\n  get #subscribe() {\n    return this._subscribe?.[0];\n  }\n\n  /** elapsed time in seconds */\n  get currentTime() {\n    return this.#mediaElement?.currentTime ?? 0;\n  }\n\n  set currentTime(seconds: number) {\n    if (this.#mediaElement) {\n      this.#mediaElement.currentTime = seconds;\n    }\n  }\n\n  /** total time in seconds */\n  get duration() {\n    return this.#duration;\n  }\n\n  /** whether audio is muted */\n  get muted(): boolean {\n    return this.volume === 0;\n  }\n\n  /** whether media is paused */\n  get paused(): boolean {\n    return !this.#mediaElement || !!this.#paused;\n  }\n\n  /** media status */\n  get readyState(): number {\n    return this.#readyState || 0;\n  }\n\n  protected override async getUpdateComplete(): Promise<boolean> {\n    return Promise.all([\n      super.getUpdateComplete(),\n      ...Array.from(this.shadowRoot?.querySelectorAll('rh-menu') ?? [], x => x.updateComplete),\n    ]).then(xs => xs.every(Boolean));\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    RhAudioPlayer.instances.add(this);\n    this.addEventListener('cueseek', this.#onCueseek);\n    this.#initMediaElement();\n    this.#loadLanguage();\n    this.#styles ??= window.getComputedStyle?.(this);\n  }\n\n  disconnectedCallback() {\n    this.#cleanUpListeners();\n    RhAudioPlayer.instances.delete(this);\n    super.disconnectedCallback();\n  }\n\n  render() {\n    const { on = '' } = this;\n    const { dir } = this.#dir;\n    const { open, styles = {} } = this.#menufloat;\n    const showMenu = this.#hasMenu;\n    const muteicon = !this.muted ? RhAudioPlayer.icons.volumeMax : RhAudioPlayer.icons.volumeMuted;\n    const mutelabel = !this.muted ? this.#translation.get('mute') : this.#translation.get('unmute');\n    const rewinddisabled =\n      !this.#mediaElement ||\n      this.#readyState < 1 ||\n      this.currentTime === 0 ||\n      !this.#mediaEnd;\n    const forwarddisabled =\n      !this.#mediaElement ||\n      this.#readyState < 1 ||\n      this.currentTime === this.duration ||\n      !this.#mediaEnd;\n    const playlabel =\n        !this.paused ? this.#translation.get('pause')\n      : this.#translation.get('play');\n    const playdisabled = this.#readyState < 3 && this.duration < 1;\n    const playicon = !this.paused ? RhAudioPlayer.icons.pause : RhAudioPlayer.icons.play;\n\n    const currentTimeQ = (this.currentTime / this.duration);\n    const currentTimePct = (Number.isNaN(currentTimeQ) ? 0 : currentTimeQ) * 100;\n\n    const accentColor = !!this.#styles?.getPropertyValue('--rh-audio-player-background-color');\n\n    return html`\n      <rh-context-provider id=\"container\"\n          color-palette=\"${ifDefined(this.colorPalette)}\"\n          class=\"${classMap({\n              [on]: !!on,\n              [dir]: true,\n              'show-menu': showMenu,\n              'has-accent-color': accentColor,\n              'mobile-safari': !!this.#isMobileSafari,\n            })}\">\n        <input type=\"hidden\" value=${this.#readyState}>\n        <slot id=\"media\" name=\"media\" @slotchange=\"${this.#initMediaElement}\"></slot>\n        <div class=\"${this.expanded ? 'expanded' : ''}\"\n             part=\"toolbar\"\n             aria-controls=\"media\"\n             aria-label=\"Media Controls\">${!this.poster ? '' : html`\n          <div id=\"poster\"><img .src=\"${this.poster}\" aria-hidden=\"true\"></div>`}\n          <rh-tooltip id=\"play-tooltip\">\n            <button id=\"play\"\n                    aria-label=\"${playlabel}\"\n                    class=\"toolbar-button\"\n                    ?disabled=${!this.#mediaElement || playdisabled}\n                    @click=${this.#onPlayClick}\n                    @focus=${this.#onPlayFocus}>\n              ${playicon}\n            </button>\n            <span slot=\"content\">${playlabel}</span>\n          </rh-tooltip>\n\n          <div id=\"full-title\">\n            <rh-audio-player-scrolling-text-overflow id=\"mediaseries\" ?hidden=${!this.mediaseries}>\n              <slot name=\"series\" @slotchange=${this.#onTitleChange}>${this.mediaseries}</slot>\n            </rh-audio-player-scrolling-text-overflow>\n            <rh-audio-player-scrolling-text-overflow id=\"mediatitle\" ?hidden=${!this.mediatitle}>\n              <slot name=\"title\" @slotchange=${this.#onTitleChange}>${this.mediatitle}</slot>\n            </rh-audio-player-scrolling-text-overflow>\n          </div>\n\n          <rh-tooltip id=\"time-tooltip\">\n            <input id=\"time\"\n                      class=\"toolbar-button\"\n                      aria-label=\"${this.#translation.get('seek')}\"\n                      min=\"0\"\n                      max=\"100\"\n                      step=\"1\"\n                      type=\"range\"\n                      value=\"${currentTimePct}\"\n                      ?disabled=\"${this.duration === 0}\"\n                      @input=${this.#onTimeSlider}>\n            <span slot=\"content\">${this.#translation.get('seek')}</span>\n          </rh-tooltip>\n\n          <span id=\"current\">${this.#elapsedText}</span>\n\n          <div class=\"spacer\"></div>${this.#isMini ? '' : html`\n\n          ${this.#playbackRateTemplate()}`}\n\n          ${this.#isMobileSafari ? '' : html`\n\n          <rh-tooltip id=\"mute-tooltip\">\n            <button id=\"mute\"\n                    aria-label=\"${mutelabel}\"\n                    class=\"toolbar-button\"\n                    ?disabled=${!this.#mediaElement}\n                    @click=${this.#onMuteButton}>\n              ${muteicon}\n            </button>\n            <span slot=\"content\">${mutelabel}</span>\n          </rh-tooltip>${this.#isMini ? '' : html`\n\n          <rh-tooltip id=\"volume-tooltip\">\n            <span slot=\"content\">${this.#translation.get('volume')}</span>\n            <input id=\"volume\"\n                      class=\"toolbar-button\"\n                      aria-label=\"${this.#translation.get('volume')}\"\n                      min=0\n                      max=${!this.#mediaElement ? 0 : 100}\n                      step=1\n                      type=\"range\"\n                      value=${this.volume * 100}\n                      ?disabled=\"${!this.#mediaElement}\"\n                      @input=${this.#onVolumeSlider}>\n            </rh-tooltip>\n          `}\n          `}${!this.#isFull ? '' : html`\n\n          <span id=\"full-current\">${this.#elapsedText}</span>\n\n          <span id=\"duration\">\n            <span class=\"sr-only\">/</span>${getFormattedTime(this.duration)}\n          </span>\n\n          <div class=\"full-spacer\"></div>\n\n          ${this.#playbackRateTemplate('full-playback-rate')}\n\n          <rh-tooltip id=\"rewind-tooltip\">\n            <button id=\"rewind\"\n                    aria-label=\"${this.#translation.get('rewind')}\"\n                    class=\"toolbar-button\"\n                    ?disabled=${rewinddisabled}\n                    @click=${() => this.rewind()}>\n              ${RhAudioPlayer.icons.rewind}\n            </button>\n            <span slot=\"content\">${this.#translation.get('rewind')}</span>\n          </rh-tooltip>\n\n          <rh-tooltip id=\"full-play-tooltip\">\n            <button id=\"full-play\"\n                    aria-label=\"${playlabel}\"\n                    class=\"toolbar-button\"\n                    ?disabled=${!this.#mediaElement || playdisabled}\n                    @click=${this.#onPlayClick}\n                    @focus=${this.#onPlayFocus}>\n              ${playicon}\n            </button>\n            <span slot=\"content\">${playlabel}</span>\n          </rh-tooltip>\n\n          <rh-tooltip id=\"forward-tooltip\">\n            <button id=\"forward\"\n                    aria-label=\"${this.#translation.get('advance')}\"\n                    class=\"toolbar-button\"\n                    ?disabled=${forwarddisabled}\n                    @click=${() => this.forward()}>\n              ${RhAudioPlayer.icons.forward}\n            </button>\n            <span slot=\"content\">${this.#translation.get('advance')}</span>\n          </rh-tooltip>`}${!this.#hasMenu ? '' : html`\n\n          <rh-tooltip id=\"menu-tooltip\" slot=\"button\" position=\"${this.#menuOpen ? 'left' : 'top'}\">\n            <button id=\"menu-button\"\n                    class=\"toolbar-button\"\n                    aria-label=\"${this.#translation.get('menu')}\"\n                    aria-controls=\"menu\"\n                    aria-haspopup=\"true\"\n                    @click=\"${this.#onMenuToggle}\">\n              ${RhAudioPlayer.icons.menuKebab}\n            </button>\n            <span slot=\"content\">${this.#translation.get('menu')}</span>\n          </rh-tooltip>\n\n          <rh-menu id=\"menu\"\n                   aria-labelledby=\"menu-button\"\n                   aria-hidden=\"${String(!this.#menuOpen) as 'true' | 'false'}\"\n                   style=\"${styleMap(styles)}\"\n                   class=\"${classMap({ open })}\"\n                   @keydown=\"${this.#onMenuKeydown}\"\n                   @focusout=\"${this.#onMenuFocusout}\">${this.#panels.map(panel => !panel ? '' : html`\n            <button aria-label=\"${panel.menuLabel}\"\n                    aria-controls=\"panel\"\n                    @click=\"${() => this.#selectOpenPanel(panel)}\">\n              ${panel.menuLabel}\n            </button>`)}\n          </rh-menu>`}\n          <rh-tooltip id=\"close-tooltip\">\n            <button id=\"close\"\n                    aria-label=\"${this.#translation.get('close')}\"\n                    class=\"toolbar-button\"\n                    ?disabled=${!this.#mediaElement}\n                    aria-controls=\"panel\"\n                    @click=\"${this.#selectOpenPanel}\"\n                    @keydown=\"${this.#onCloseKeydown}\">\n              ${RhAudioPlayer.icons.close}\n            </button>\n            <span slot=\"content\">${this.#translation.get('close')}</span>\n          </rh-tooltip>\n          <div class=\"full-spacer\"></div>\n        </div>\n\n        <div id=\"panel\"\n             role=\"dialog\"\n             aria-live=\"polite\"\n             part=\"panel\"\n             ?hidden=${!this.expanded || !this.#hasMenu}>\n          <slot name=\"about\"\n                part=\"about\"\n                @slotchange=${this.#onPanelChange}>\n            <rh-audio-player-about></rh-audio-player-about>\n          </slot>\n          <slot name=\"subscribe\"\n                part=\"subscribe\"\n                @slotchange=${this.#onPanelChange}>\n          </slot>\n          <slot name=\"transcript\"\n                part=\"transcript\"\n                @slotchange=${this.#onPanelChange}\n                @transcriptdownload=${this.#onTranscriptDownload}>\n          </slot>\n        </div>\n      </rh-context-provider>\n    `;\n  }\n\n  /** template for playback rate controls */\n  #playbackRateTemplate(id = 'playback-rate') {\n    return html`\n      <rh-tooltip id=\"${id}-tooltip\">\n        <div id=\"${id}-stepper\">\n          <button id=\"${id}-stepdown\"\n                  class=\"playback-rate-step\"\n                  tabindex=\"-1\"\n                  aria-hidden=\"true\"\n                  ?disabled=\"${!this.#mediaElement || this.playbackRate < 0.5}\"\n                  @click=\"${this.decrementPlaybackrate}\">\n            ${RhAudioPlayer.icons.playbackRateSlower}\n          </button>\n          <select id=\"${id}\"\n                  aria-label=\"${this.#translation.get('speed')}\"\n                  ?disabled=${!this.#mediaElement}\n                  @click=\"${this.#onPlaybackRateSelect}\"\n                  @change=\"${this.#onPlaybackRateSelect}\"\n                  .value=${this.playbackRate?.toFixed(this.#pbrFixed)}>${this.#playbackRates.map(step=>html`\n            <option .value=${step.toFixed(this.#pbrFixed)}\n              ?selected=${this.playbackRate.toFixed(this.#pbrFixed) === step.toFixed(this.#pbrFixed)}>\n              ${step.toFixed(this.#pbrFixed)}x\n            </option>`)}\n          </select>\n          <button id=\"${id}-stepup\"\n                  class=\"playback-rate-step\"\n                  tabindex=\"-1\"\n                  aria-hidden=\"true\"\n                  ?disabled=\"${!this.#mediaElement || this.playbackRate > 1.75}\"\n                  @click=\"${this.incrementPlaybackrate}\">\n            ${RhAudioPlayer.icons.playbackRateFaster}\n          </button>\n        </div>\n        <span slot=\"content\">${this.#translation.get('speed')}</span>\n      </rh-tooltip>\n    `;\n  }\n\n  async firstUpdated() {\n    // waiting for next render so that rh-menu is present in shadow root\n    await this.updateComplete;\n    this.#unsetTabindexFromMenuItems();\n  }\n\n  updated(changedProperties: PropertyValues<this>) {\n    if (changedProperties.has('volume') && !!this.#mediaElement && this.volume !== this.#mediaElement.volume) {\n      this.#mediaElement.volume = this.volume;\n    }\n    if (changedProperties.has('lang')) {\n      this.#loadLanguage();\n    }\n  }\n\n  async #loadLanguage(lang = this.#translation.language) {\n    const url = new URL(`./i18n/${lang}.json`, import.meta.url);\n    await this.#translation.loadTranslation(url, lang);\n    this.#updateMenuLabels();\n    this.#updateTranscriptLabels();\n  }\n\n  #updateMenuLabels() {\n    if (this.#about?.menuLabel) { this.#about.menuLabel = this.#translation.get('about'); }\n    if (this.#subscribe?.menuLabel) { this.#subscribe.menuLabel = this.#translation.get('subscribe'); }\n    if (this.#transcript?.menuLabel) { this.#transcript.menuLabel = this.#translation.get('transcript'); }\n  }\n\n  #updateTranscriptLabels() {\n    if (this.#transcript?.autoscrollLabel) { this.#transcript.autoscrollLabel = this.#translation.get('autoscroll'); }\n    if (this.#transcript?.downloadLabel) { this.#transcript.downloadLabel = this.#translation.get('download'); }\n  }\n\n  #cleanUpListeners() {\n    for (const [event, listener] of this.#listeners) {\n      this.#lastMediaElement?.removeEventListener(event, listener);\n    }\n  }\n\n  /**\n   * sets initial values based media player metadata\n   */\n  #initMediaElement(slotchangeevent?: Event) {\n    if (slotchangeevent) {\n      this.#cleanUpListeners();\n      this.#lastMediaElement = this.querySelector('audio') ?? undefined;\n    }\n\n    this.#mediaElement = this.querySelector('audio') ?? undefined;\n\n    if (this.#mediaElement) {\n      this.#mediaElement.removeAttribute('controls');\n      this.#mediaElement.setAttribute('seekable', 'seekable');\n      this.volume = this.#mediaElement.volume || 0.5;\n\n      for (const [event, listener] of this.#listeners) {\n        this.#mediaElement.addEventListener(event, listener);\n      }\n    }\n  }\n\n  /**\n   * handles media `canplay` event\n   */\n  #onCanplay() {\n    this.volume = this.#mediaElement?.volume || 0.5;\n  }\n\n  /**\n   * handles media `canplaythrough` event\n   */\n  #onCanplaythrough() {\n    this.requestUpdate();\n  }\n\n  #onCueseek(event: Event) {\n    const target = event.target as unknown;\n    const cue = target as RhCue;\n    const start = cue?.startTime;\n    if (start) {\n      this.seek(start);\n    }\n    this.#onTimeupdate();\n  }\n\n  /**\n   * handles media `durationchange` event\n   */\n  #onDurationchange() {\n    this.requestUpdate();\n    this.#transcript?.setDuration(this.duration);\n  }\n\n  /**\n   * handles media `ended` event\n   */\n  #onEnded() {\n    this.#paused = true;\n  }\n\n  /**\n   * handles media `loadeddata` event\n   */\n  #onLoadeddata() {\n    this.requestUpdate();\n  }\n\n  /**\n   * handles media `loadedmetadata` event\n   */\n  #onLoadedmetadata() {\n    this.requestUpdate();\n  }\n\n  /**\n   * handles mute button click to toggle mute\n   */\n  #onMuteButton() {\n    !this.muted ? this.mute() : this.unmute();\n  }\n\n  /**\n   * handles media `pause` event by updating component's `_paused` state\n   */\n  #onPause() {\n    this.#paused = true;\n    this.requestUpdate();\n  }\n\n  /**\n   * handles media `play` event by updating component's `_paused` state\n   */\n  #onPlay() {\n    this.#paused = false;\n    this.requestUpdate();\n  }\n\n  /**\n   * handles changes to media element playback rate\n   * by updating component playbackRate property\n   */\n  #onPlaybackRateChange() {\n    if (!this.#mediaElement || this.playbackRate !== this.#mediaElement.playbackRate) {\n      this.playbackRate = this.#mediaElement?.playbackRate || 1;\n    }\n  }\n\n  /**\n   * handles changes to value of playback rate number input\n   * by updating component playbackRate property\n   */\n  #onPlaybackRateSelect(event: Event) {\n    if (this.#mediaElement) {\n      const target = event?.target as HTMLSelectElement;\n      const val = !target || !target.value ? 1.00 : parseFloat(target.value);\n      const pbr = this.#validPlaybackRate(val);\n      this.#mediaElement.playbackRate = this.playbackRate = pbr;\n    }\n  }\n\n  /**\n   * handles play button click by toggling play / pause\n   */\n  async #onPlayClick(event: Event) {\n    const target = event?.target as HTMLElement;\n    const tooltip = target?.parentElement?.closest('rh-tooltip') as RhTooltip | null;\n    for (const instance of RhAudioPlayer.instances) {\n      if (instance !== this) {\n        instance.pause();\n      }\n    }\n    if (this.#paused) {\n      this.play();\n    } else {\n      this.pause();\n    }\n    setTimeout(() => tooltip?.show(), 10);\n  }\n\n  /**\n   * handles play button click by toggling play / pause\n   */\n  #onPlayFocus() {\n    type Scroller = RhAudioPlayerScrollingTextOverflow | RhAudioPlayerScrollingTextOverflow;\n    for (const id of ['mediaseries', 'mediatitle']) {\n      const scroller = this.shadowRoot?.querySelector<Scroller>(`#${id}`);\n      scroller?.startScrolling();\n    }\n  }\n\n  /**\n   * handles media `playing` event by updating component's `_paused` state\n   */\n  #onPlaying() {\n    this.#paused = false;\n    this.requestUpdate();\n  }\n\n  /**\n   * handles media `seeked` event by updating component's `_currentTime` state\n   */\n  #onSeeked() {\n    this.requestUpdate();\n  }\n\n  /**\n   * handles media `seeking` event by updating component's `_currentTime` state\n   */\n  #onSeeking() {\n    this.requestUpdate();\n  }\n\n  /**\n   * handles time input changes by seeking to input value\n   */\n  #onTimeSlider(event: Event & { target: HTMLInputElement }) {\n    if (this.#mediaEnd) {\n      const percent = parseFloat(event.target.value) ?? 0;\n      const seconds = this.duration * (percent / 100);\n      this.seek(seconds);\n    }\n  }\n\n  /**\n   * handles media `timeupdate` event by updating component's `_currentTime` state\n   */\n  #onTimeupdate() {\n    this.#transcript?.setActiveCues(this.currentTime);\n    this.requestUpdate();\n  }\n\n  /**\n   * handles toggling the \"More options\" menu button\n   */\n  #onMenuToggle(event: Event) {\n    event.preventDefault();\n    this.#menuOpen = !this.#menuOpen;\n    event.stopPropagation();\n  }\n\n  /** updates panel text */\n  #onPanelChange() {\n    this.#updateMenuLabels();\n    this.#updateTranscriptLabels();\n    this.#onTitleChange();\n  }\n\n  /** updates about panel with title and series text */\n  #onTitleChange() {\n    const mediatitle = this._mediatitle?.[0]?.textContent ?? '';\n    const mediaseries = this._mediaseries?.[0]?.textContent ?? '';\n    if (mediatitle.length > 0) {\n      this.mediatitle ||= mediatitle;\n    }\n    if (mediaseries.length > 0) {\n      this.mediaseries ||= mediaseries;\n    }\n    if (this.#about && this.mediaseries) {\n      this.#about.mediaseries = this.mediaseries;\n    }\n    if (this.#about && this.mediatitle) {\n      this.#about.mediatitle = this.mediatitle;\n    }\n  }\n\n  /**\n   * handles media `volumechange` event by\n   * updating component's `_muted` state and `volume` property\n   */\n  #onVolumechange() {\n    if (this.#mediaElement) {\n      const { volume } = this.#mediaElement;\n      if (volume > 0) {\n        this.#unmutedVolume = this.#mediaElement.volume;\n      }\n      this.volume = Math.max(0, Math.min(10, this.#mediaElement.volume));\n    }\n  }\n\n  /**\n   * handles volume input changes by setting media volume to input value\n   */\n  #onVolumeSlider(event: Event & { target: HTMLInputElement }) {\n    const level = parseFloat(event.target.value || '-1');\n    if (this.#mediaElement) {\n      this.#mediaElement.volume = Math.max(0, Math.min(10, level / 100));\n    }\n  }\n\n  /**\n   * ensures playback rate value falls between playback rate minimum and maximum values\n   */\n  #validPlaybackRate(number: number) {\n    // ensures number between min and maxk\n    const inRange = Math.max(this.#pbrMin, Math.min(this.#pbrMax, number));\n    // used to round number to nearest step\n    const multiplier = 1 / this.#pbrStep;\n    return Math.round(inRange * multiplier) / multiplier;\n  }\n\n  /**\n   * opens particular panel open or closes panels if none given\n   */\n  #selectOpenPanel(\n    panel?: RhAudioPlayerAbout | RhAudioPlayerSubscribe | RhTranscript\n  ) {\n    const panels = [this.#about, this.#subscribe, this.#transcript];\n    panels.forEach(item => item?.toggleAttribute('hidden', panel !== item));\n    this.expanded = !!panel && panels.includes(panel);\n    const focusElement = this.expanded ? this.shadowRoot?.getElementById('close') : this.shadowRoot?.getElementById('menu-button');\n\n    setTimeout(() => {\n      setTimeout(() => {\n        focusElement?.focus();\n        if (panel === this.#transcript) {\n          this.#transcript?.setActiveCues(this.currentTime);\n        }\n      }, 1);\n      setTimeout(() => {\n        if (panel?.scrollText) {\n          panel.scrollText();\n        }\n      }, 1000);\n    }, 1);\n  }\n\n  #lastActiveMenuItem?: HTMLElement;\n\n  /**\n   * hides panel with Escape key\n   * @param event {KeyboardEvent}\n   */\n  async #onCloseKeydown(event: KeyboardEvent) {\n    if (event.key === 'Escape') {\n      this.#selectOpenPanel();\n    }\n  }\n\n  /**\n   * hides menu with Escape key\n   */\n  async #onMenuKeydown(event: KeyboardEvent) {\n    if (event.key === 'Escape') {\n      await this.#hideMenu();\n    }\n  }\n\n  /**\n   * hides menu when left without focus\n   */\n  #onMenuFocusout(event: FocusEvent) {\n    const { relatedTarget } = event;\n    if (\n      relatedTarget instanceof HTMLElement &&\n      relatedTarget.closest('rh-menu') !== this.shadowRoot?.getElementById('menu')\n    ) {\n      setTimeout(() => this.#hideMenu(), 300);\n    }\n  }\n\n  async #positionMenu() {\n    await this.updateComplete;\n    const placement = 'bottom-start';\n    const mainAxis = 0;\n    const offset = { mainAxis: mainAxis, alignmentAxis: 0 };\n    await this.#menufloat.show({ offset: offset, placement: placement });\n  }\n\n  async #showMenu() {\n    const menu = this.shadowRoot?.getElementById('menu') as RhMenu;\n    const button = this.shadowRoot?.getElementById('menu-button') as HTMLElement;\n    if (!menu || !button) { return; }\n    await this.#positionMenu();\n    await this.updateComplete;\n    if (this.#lastActiveMenuItem) {\n      menu.activateItem(this.#lastActiveMenuItem);\n    }\n    window.addEventListener('click', this.#onWindowClick);\n  }\n\n  #unsetTabindexFromMenuItems() {\n    const menu = this.shadowRoot?.getElementById('menu') as RhMenu;\n    this.#lastActiveMenuItem = menu?.activeItem;\n    for (const item of menu?.querySelectorAll<HTMLElement>('[tabindex]') ?? []) {\n      item.tabIndex = -1;\n    }\n  }\n\n  async #hideMenu() {\n    this.#unsetTabindexFromMenuItems();\n    window.removeEventListener('click', this.#onWindowClick);\n    await this.#menufloat.hide();\n  }\n\n  #onTranscriptDownload() {\n    const transcript = this.#transcript?.downloadText;\n    const label = this.#transcript?.label;\n    const a = document.createElement('a');\n    const title = [this.mediaseries, this.mediatitle, label].join(' ');\n    const filename = (this.mediatitle || this.mediaseries || label || 'transcript').replace(/[^\\w^\\d^-]/g, '');\n    const contents = `${title}\\n${transcript}`;\n    a.setAttribute('href', `data:text/plain;charset=UTF-8,${encodeURIComponent(contents)}`);\n    a.setAttribute('download', `${filename}.txt`);\n    a.style.display = 'none';\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n  }\n\n  #onWindowClick = (event: MouseEvent) => {\n    const menu = this.shadowRoot?.getElementById('menu-button');\n    if (!menu || !event.composedPath().includes(menu)) {\n      this.#hideMenu();\n    }\n  };\n\n  /**\n   * Mutes media volume\n   */\n  mute() {\n    if (this.#mediaElement) {\n      this.#unmutedVolume = Math.max(0.1, this.#mediaElement?.volume);\n      this.#mediaElement.volume = 0;\n    }\n  }\n\n  /**\n   * Unmutes media volume\n   */\n  unmute() {\n    if (this.#mediaElement) {\n      this.#mediaElement.volume = Math.max(this.#unmutedVolume, 0.1);\n    }\n  }\n\n  /**\n   * Increases media playback rate by playback rate step value\n   */\n  incrementPlaybackrate() {\n    if (this.#mediaElement) {\n      this.#mediaElement.playbackRate = this.playbackRate = this.#validPlaybackRate(this.#mediaElement.playbackRate + this.#pbrStep);\n    }\n  }\n\n  /**\n   * Decreases media playback rate by playback rate step value\n   */\n  decrementPlaybackrate() {\n    if (this.#mediaElement) {\n      this.#mediaElement.playbackRate = this.playbackRate = this.#validPlaybackRate(this.#mediaElement.playbackRate - this.#pbrStep);\n    }\n  }\n\n  /**\n   * Pauses playback\n   */\n  pause() {\n    return this.#mediaElement?.pause?.();\n  }\n\n  /**\n   * Starts or resumes playback\n   */\n  async play() {\n    return await this.#mediaElement?.play?.();\n  }\n\n  /**\n   * Seeks media to a given point in seconds\n   */\n  seek(seconds: number) {\n    this.#mediaElement?.setAttribute('seekable', 'seekable');\n    if (this.#mediaElement) {\n      const time = this.#mediaEnd ? Math.max(this.#mediaStart, Math.min(seconds, this.#mediaEnd)) : -1;\n      if (time >= 0) {\n        this.#mediaElement.currentTime = time;\n        this.requestUpdate();\n      }\n    }\n  }\n\n  /**\n   * Seeks media a given number of secons from current elapsed time\n   */\n  seekFromCurrentTime(seconds = 0) {\n    const currentTime = this.#mediaElement?.currentTime || 0;\n    const time = currentTime + seconds;\n    this.seek(time);\n  }\n\n  /**\n   * Rewinds media by 15 seconds (default)\n   * @param by number of seconds to rewind\n   */\n  rewind(by = 15) {\n    this.seekFromCurrentTime(-by);\n  }\n\n  /**\n   * Advances media by 15 seconds (default)\n   * @param by number of seconds to advance\n   */\n  forward(by = 15) {\n    this.seekFromCurrentTime(by);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-audio-player': RhAudioPlayer;\n  }\n}\n"]}