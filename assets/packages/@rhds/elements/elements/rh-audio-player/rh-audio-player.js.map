{"version":3,"file":"rh-audio-player.js","sourceRoot":"","sources":["rh-audio-player.ts"],"names":[],"mappings":"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","sourcesContent":["import type { RhTooltip } from '@rhds/elements/rh-tooltip/rh-tooltip.js';\n\nimport { LitElement, html, type PropertyValues } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { property } from 'lit/decorators/property.js';\nimport { queryAssignedElements } from 'lit/decorators/query-assigned-elements.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\n\nimport { colorContextConsumer, type ColorTheme } from '../../lib/context/color/consumer.js';\nimport { colorContextProvider, type ColorPalette } from '../../lib/context/color/provider.js';\n\nimport { FloatingDOMController } from '@patternfly/pfe-core/controllers/floating-dom-controller.js';\n\nimport { DirController } from '../../lib/DirController.js';\nimport { HeadingLevelContextProvider } from '../../lib/context/headings/provider.js';\nimport { I18nController } from '../../lib/I18nController.js';\n\nimport { RhMenu } from '../rh-menu/rh-menu.js';\nimport { RhCue, getFormattedTime } from './rh-cue.js';\nimport { RhAudioPlayerAbout } from './rh-audio-player-about.js';\nimport { RhAudioPlayerRateSelectEvent } from './rh-audio-player-rate-stepper.js';\nimport { RhAudioPlayerSubscribe } from './rh-audio-player-subscribe.js';\nimport { RhTranscript } from './rh-transcript.js';\nimport { RhAudioPlayerScrollingTextOverflow } from './rh-audio-player-scrolling-text-overflow.js';\n\nimport buttonStyles from './rh-audio-player-button.css';\nimport rangeStyles from './rh-audio-player-range-styles.css';\nimport styles from './rh-audio-player.css';\n\nimport '@rhds/elements/rh-surface/rh-surface.js';\nimport '@rhds/elements/rh-tooltip/rh-tooltip.js';\nimport '@rhds/elements/rh-icon/rh-icon.js';\n\n/**\n * An audio player plays audio clips in the browser and includes other features.\n * @summary Plays audio clips and includes other features\n * @slot series - optional, name of podcast series\n * @slot title - optional, title of episode\n * @slot media - html `audio` element\n * @slot about - optional `rh-audio-player-about` panel with attribution\n * @slot subscribe - optional `rh-audio-player-subscribe` panel with links to subscribe\n * @slot transcript - optional `rh-transcript` panel with `rh-cue` elements\n * @cssprop [--rh-audio-player-background-color=var(--rh-color-surface-lightest, #ffffff)] - color of player background -\n * @cssprop [--rh-audio-player-icon-background-color=var(--rh-audio-player-background-color)]\n * @cssprop [--rh-audio-player-border-color=var(--rh-color-border-subtle-on-light, #d2d2d2)] - color of player border -\n * @cssprop [--rh-audio-player-secondary-text-color=var(--rh-color-text-secondary-on-light, #6a6e73)] - player secondary text color -\n * @cssprop [--rh-audio-player-secondary-opacity=0.75] - player secondary opacity used for partially faded elements -\n * @cssprop [--rh-audio-player-range-thumb-color=var(--rh-color-accent-brand-on-light, #ee0000)] - color of time and volume range slider thumb -\n * @cssprop [--rh-tooltip-content-padding-block-start=var(--rh-space-md, 8px)] - padding top on tooltips -\n * @cssprop [--rh-tooltip-content-padding-block-end=var(--rh-space-md, 8px)] - padding bottom on tooltips -\n * @cssprop [--rh-tooltip-content-padding-inline-start=var(--rh-space-md, 8px)] - padding left on tooltips -\n * @cssprop [--rh-tooltip-content-padding-inline-end=var(--rh-space-md, 8px)] - padding right on tooltips -\n * @csspart panel - expandable panel\n * @csspart toolbar - main controls\n * @csspart about - about the episode panel\n * @csspart subscribe - subscribe panel\n * @csspart transcript - transcript panel\n */\n@customElement('rh-audio-player')\nexport class RhAudioPlayer extends LitElement {\n  static readonly styles = [buttonStyles, styles, rangeStyles];\n\n  private static instances = new Set<RhAudioPlayer>();\n\n  static enUS = {\n    'play': 'Play',\n    'pause': 'Pause',\n    'seek': 'Seek',\n    'rewind': 'Rewind 15 seconds',\n    'advance': 'Advance 15 seconds',\n    'speed': 'Speed',\n    'mute': 'Mute',\n    'unmute': 'Unmute',\n    'volume': 'Volume',\n    'menu': 'More options',\n    'close': 'Close',\n    'about': 'About the episode',\n    'subscribe': 'Subscribe',\n    'transcript': 'Transcript',\n    'autoscroll': 'Autoscroll',\n    'download': 'Download',\n  };\n\n  /**  Audio's series name, e.g. Podcast series. */\n  @property({ reflect: true }) mediaseries?: string;\n\n  /**  Audio's title, e.g. Podcast episode title. */\n  @property({ reflect: true }) mediatitle?: string;\n\n  /**\n   * Layout:\n   *   - `mini` (default): minimal controls: play/pause, range; volume and other controls hidden behind menu\n   *   - `compact`: artwork and more controls: time, skip, volume\n   *   - `compact-wide`: like compact but full width\n   *   - `full`: maximal controls and artwork\n   */\n  @property({ reflect: true }) layout: 'mini' | 'compact' | 'compact-wide' | 'full' = 'mini';\n\n  /** URL to audio's artwork */\n  @property({ reflect: true }) poster?: string;\n\n  /** Playback volume */\n  @property({ reflect: true, type: Number }) volume = 0.5;\n\n  /** Playback rate */\n  @property({ reflect: true, type: Number }) playbackRate = 1;\n\n  @property({ reflect: true, type: Boolean }) expanded = false;\n\n  @property({ reflect: true }) lang!: string;\n\n  @property({ attribute: false }) microcopy = {};\n\n  /** Element's color palette */\n  @colorContextProvider()\n  @property({ reflect: true, attribute: 'color-palette' }) colorPalette?: ColorPalette;\n\n  @colorContextConsumer() private on?: ColorTheme;\n\n  @queryAssignedElements({ slot: 'series' })\n  private _mediaseries?: HTMLElement[];\n\n  @queryAssignedElements({ slot: 'title' })\n  private _mediatitle?: HTMLElement[];\n\n  @queryAssignedElements({ slot: 'transcript', selector: 'rh-transcript' })\n  private _transcripts?: RhTranscript[];\n\n  @queryAssignedElements({ slot: 'about', selector: 'rh-audio-player-about' })\n  private _abouts?: RhAudioPlayerAbout[];\n\n  @queryAssignedElements({ slot: 'subscribe', selector: 'rh-audio-player-subscribe' })\n  private _subscribe?: RhAudioPlayerSubscribe[];\n\n  get #duration() {\n    return this.#mediaElement?.duration ?? 0;\n  }\n\n  get #readyState() {\n    return this.#mediaElement?.readyState ?? 0;\n  }\n\n  #isMobileSafari = window.navigator.userAgent.match(/(iPhone|iPad|Mobile).*(AppleWebkit|Safari)/i);\n\n  #paused = true;\n\n  #unmutedVolume = this.volume;\n\n  #styles?: CSSStyleDeclaration;\n\n  // this is used inasmuch as children receive the context,\n  // but it doesn't need to be accessed outside the class\n  // eslint-disable-next-line no-unused-private-class-members\n  #headings = new HeadingLevelContextProvider(this);\n\n  #mediaElement?: HTMLAudioElement;\n\n  #lastMediaElement?: HTMLAudioElement;\n\n  #dir = new DirController(this);\n\n  #width = this.offsetWidth;\n\n  #resizeObserver = new ResizeObserver(() => {\n    if (this.#width !== this.offsetWidth) {\n      this.#positionMenu();\n    }\n  });\n\n  #translation = new I18nController(this, {\n    'en': {\n      ...RhAudioPlayer.enUS,\n    },\n    'en-US': {\n      ...RhAudioPlayer.enUS,\n    }, ...this.microcopy ?? {},\n  });\n\n  #menufloat = new FloatingDOMController(this, {\n    content: () => this.shadowRoot?.getElementById('menu'),\n    invoker: () => this.shadowRoot?.getElementById('menu-button'),\n  });\n\n  /** Added to media element in light DOM. Bound so they can be cleaned up later */\n  #listeners = new Map(Object.entries({\n    canplay: this.#onCanplay.bind(this),\n    canplaythrough: this.#onCanplaythrough.bind(this),\n    durationchange: this.#onDurationchange.bind(this),\n    loadedmetadata: this.#onLoadedmetadata.bind(this),\n    loadeddata: this.#onLoadeddata.bind(this),\n    ended: this.#onEnded.bind(this),\n    pause: this.#onPause.bind(this),\n    play: this.#onPlay.bind(this),\n    playing: this.#onPlaying.bind(this),\n    ratechange: this.#onPlaybackRateChange.bind(this),\n    seeked: this.#onSeeked.bind(this),\n    seeking: this.#onSeeking.bind(this),\n    timeupdate: this.#onTimeupdate.bind(this),\n    volumechange: this.#onVolumechange.bind(this),\n  }));\n\n  get #isMini() {\n    return !this.#isFull && !this.#isCompact;\n  }\n\n  get #isFull() {\n    return this.layout === 'full';\n  }\n\n  get #isCompact() {\n    return !!this.layout?.startsWith('compact');\n  }\n\n  get #panels(): (\n    | { id: 'about'; panel: RhAudioPlayerAbout }\n    | { id: 'subscribe'; panel: RhAudioPlayerSubscribe }\n    | { id: 'transcript'; panel: RhTranscript }\n  )[] {\n    return [\n      { id: 'about', panel: this.#about! } as const,\n      { id: 'subscribe', panel: this.#subscribe! } as const,\n      { id: 'transcript', panel: this.#transcript! } as const,\n    ].filter(x => !!x.panel);\n  }\n\n  get #hasMenu() {\n    return (\n      this.#panels.length > 1\n      || !!this.mediaseries\n      || !!this.mediatitle\n      || (this._abouts?.length ?? 0) > 0\n    );\n  }\n\n  get #menuOpen() {\n    return this.#menufloat.open;\n  }\n\n  set #menuOpen(open) {\n    if (open) {\n      this.#showMenu();\n      this.#width = this.offsetWidth;\n      this.#resizeObserver.observe(this);\n    } else {\n      this.#hideMenu();\n      this.#resizeObserver.unobserve(this);\n    }\n  }\n\n  /**\n   * gets media media time if set\n   */\n  get #mediaEnd() {\n    return (this.#mediaElement?.seekable?.end?.length || -1) > 0\n    && this.#mediaElement?.seekable?.end(0) ?\n      this.#mediaElement?.seekable?.end(0)\n      : false;\n  }\n\n  /**\n   * gets media media time if set\n   */\n  get #mediaStart() {\n    return this.#mediaElement?.seekable?.start(0) ?\n      this.#mediaElement?.seekable?.start(0)\n      : 0;\n  }\n\n  get #elapsedText() {\n    return getFormattedTime(this.currentTime || 0);\n  }\n\n  get #transcript(): RhTranscript | undefined {\n    const [t] = this._transcripts ?? [];\n    return t ?? this.shadowRoot?.querySelector('rh-transcript');\n  }\n\n  get #about() {\n    const [a = this.shadowRoot?.querySelector('rh-audio-player-about')] = this._abouts ?? [];\n    return a;\n  }\n\n  get #subscribe() {\n    return this._subscribe?.[0];\n  }\n\n  /** elapsed time in seconds */\n  get currentTime() {\n    return this.#mediaElement?.currentTime ?? 0;\n  }\n\n  set currentTime(seconds: number) {\n    if (this.#mediaElement) {\n      this.#mediaElement.currentTime = seconds;\n    }\n  }\n\n  /** total time in seconds */\n  get duration() {\n    return this.#duration;\n  }\n\n  /** whether audio is muted */\n  get muted(): boolean {\n    return this.volume === 0;\n  }\n\n  /** whether media is paused */\n  get paused(): boolean {\n    return !this.#mediaElement || !!this.#paused;\n  }\n\n  /** media status */\n  get readyState(): number {\n    return this.#readyState || 0;\n  }\n\n  protected override async getUpdateComplete(): Promise<boolean> {\n    return Promise.all([\n      super.getUpdateComplete(),\n      ...Array.from(this.shadowRoot?.querySelectorAll('rh-menu') ?? [], x => x.updateComplete),\n    ]).then(xs => xs.every(Boolean));\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    RhAudioPlayer.instances.add(this);\n    this.addEventListener('cueseek', this.#onCueseek);\n    this.#initMediaElement();\n    this.#loadLanguage();\n    this.#styles ??= window.getComputedStyle?.(this);\n  }\n\n  disconnectedCallback() {\n    this.#cleanUpListeners();\n    RhAudioPlayer.instances.delete(this);\n    super.disconnectedCallback();\n  }\n\n  render() {\n    const { expanded, mediatitle, on = 'light', layout, poster } = this;\n    const { dir } = this.#dir;\n    const { open, styles = {} } = this.#menufloat;\n    const showMenu = this.#hasMenu;\n    const mutelabel = !this.muted ? this.#translation.get('mute') : this.#translation.get('unmute');\n    const rewinddisabled =\n      !this.#mediaElement\n      || this.#readyState < 1\n      || this.currentTime === 0\n      || !this.#mediaEnd;\n    const forwarddisabled =\n      !this.#mediaElement\n      || this.#readyState < 1\n      || this.currentTime === this.duration\n      || !this.#mediaEnd;\n    const playlabel =\n        !this.paused ? this.#translation.get('pause')\n      : this.#translation.get('play');\n    const playdisabled = this.#readyState < 3 && this.duration < 1;\n\n    const currentTimeQ = (this.currentTime / this.duration);\n    const currentTimePct = (Number.isNaN(currentTimeQ) ? 0 : currentTimeQ) * 100;\n\n    const accentColor = !!this.#styles?.getPropertyValue('--rh-audio-player-background-color');\n\n    return html`\n      <rh-surface id=\"container\"\n          color-palette=\"${ifDefined(this.colorPalette)}\"\n          class=\"${classMap({\n              [on]: true,\n              [dir]: true,\n              [layout]: true,\n              expanded,\n              'on': true,\n              'mediatitle': mediatitle !== undefined,\n              'poster': poster !== undefined,\n              'show-menu': showMenu,\n              'has-accent-color': accentColor,\n              'mobile-safari': !!this.#isMobileSafari,\n            })}\">\n        <input type=\"hidden\" value=${this.#readyState}>\n        <slot id=\"media\" name=\"media\" @slotchange=\"${this.#initMediaElement}\"></slot>\n        <div id=\"toolbar\"\n             class=\"${this.expanded ? 'expanded' : ''}\"\n             part=\"toolbar\"\n             aria-controls=\"media\"\n             aria-label=\"Media Controls\">${!poster ? '' : html`\n          <div id=\"poster\"><img .src=\"${poster}\" aria-hidden=\"true\"></div>`}\n          <rh-tooltip id=\"play-tooltip\">\n            <button id=\"play\"\n                    aria-label=\"${playlabel}\"\n                    class=\"toolbar-button\"\n                    ?disabled=${!this.#mediaElement || playdisabled}\n                    @click=${this.#onPlayClick}\n                    @focus=${this.#onPlayFocus}>\n              <rh-icon set=\"ui\" icon=\"${this.paused ? 'play-fill' : 'pause-fill'}\"></rh-icon>\n            </button>\n            <span slot=\"content\">${playlabel}</span>\n          </rh-tooltip>\n\n          <div id=\"full-title\">\n            <rh-audio-player-scrolling-text-overflow id=\"mediaseries\" ?hidden=${!this.mediaseries}>\n              <slot name=\"series\" @slotchange=${this.#onTitleChange}>${this.mediaseries}</slot>\n            </rh-audio-player-scrolling-text-overflow>\n            <rh-audio-player-scrolling-text-overflow id=\"mediatitle\" ?hidden=${!this.mediatitle}>\n              <slot name=\"title\" @slotchange=${this.#onTitleChange}>${this.mediatitle}</slot>\n            </rh-audio-player-scrolling-text-overflow>\n          </div>\n\n          <rh-tooltip id=\"time-tooltip\">\n            <input id=\"time\"\n                   class=\"toolbar-button\"\n                   aria-label=\"${this.#translation.get('seek')}\"\n                   min=\"0\"\n                   max=\"100\"\n                   step=\"1\"\n                   type=\"range\"\n                   value=\"${currentTimePct}\"\n                   ?disabled=\"${this.duration === 0}\"\n                   @input=${this.#onTimeSlider}>\n            <span slot=\"content\">${this.#translation.get('seek')}</span>\n          </rh-tooltip>\n\n          <span id=\"current\">${this.#elapsedText}</span>\n\n          <div class=\"spacer\"></div>\n\n          <rh-audio-player-rate-stepper id=\"playback-rate\"\n                                        @playback-rate-select=\"${this.#onPlaybackRateSelect}\"\n                                        ?hidden=\"${this.#isFull || this.#isMini}\"\n                                        .disabled=\"${!this.#mediaElement}\"\n                                        .playbackRate=\"${this.playbackRate}\"\n                                        .label=\"${this.#translation.get('speed')}\"></rh-audio-player-rate-stepper>\n\n          ${this.#isMobileSafari ? '' : html`\n\n          <rh-tooltip id=\"mute-tooltip\">\n            <button id=\"mute\"\n                    aria-label=\"${mutelabel}\"\n                    class=\"toolbar-button\"\n                    ?disabled=${!this.#mediaElement}\n                    @click=${this.#onMuteButton}>\n              <rh-icon set=\"ui\" icon=\"${this.muted ? 'mute-fill' : 'volume-up-fill'}\"></rh-icon>\n            </button>\n            <span slot=\"content\">${mutelabel}</span>\n          </rh-tooltip>${this.#isMini ? '' : html`\n\n          <rh-tooltip id=\"volume-tooltip\">\n            <span slot=\"content\">${this.#translation.get('volume')}</span>\n            <input id=\"volume\"\n                      class=\"toolbar-button\"\n                      aria-label=\"${this.#translation.get('volume')}\"\n                      min=0\n                      max=${!this.#mediaElement ? 0 : 100}\n                      step=1\n                      type=\"range\"\n                      value=${this.volume * 100}\n                      ?disabled=\"${!this.#mediaElement}\"\n                      @input=${this.#onVolumeSlider}>\n            </rh-tooltip>\n          `}\n          `}${!this.#isFull ? '' : html`\n\n          <span id=\"full-current\">${this.#elapsedText}</span>\n\n          <span id=\"duration\">\n            <span class=\"sr-only\">/</span>${getFormattedTime(this.duration)}\n          </span>\n\n          <div class=\"full-spacer\"></div>\n\n          <rh-audio-player-rate-stepper id=\"full-playback-rate\"\n                                        @playback-rate-select=\"${this.#onPlaybackRateSelect}\"\n                                        ?hidden=\"${this.expanded || !this.#isFull}\"\n                                        .disabled=\"${!this.#mediaElement}\"\n                                        .playbackRate=\"${this.playbackRate}\"\n                                        .label=\"${this.#translation.get('speed')}\"></rh-audio-player-rate-stepper>\n\n          <rh-tooltip id=\"rewind-tooltip\">\n            <button id=\"rewind\"\n                    aria-label=\"${this.#translation.get('rewind')}\"\n                    class=\"toolbar-button\"\n                    ?disabled=${rewinddisabled}\n                    @click=${() => this.rewind()}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\"\n                   viewBox=\"0 0 32 32\"\n                   class=\"scrubber\"\n                   role=\"presentation\">\n                <path d=\"M10.4,19.5h1.8v-5l-1.8,0.8v-1l2.2-0.9h0.7v6.2h1.9v1h-4.8V19.5z\"/>\n                <path d=\"M16.4,19.6l0.7-0.8c0.6,0.5,1.2,0.8,1.9,0.8c0.9,0,1.5-0.6,1.5-1.4c0-0.8-0.6-1.3-1.5-1.3 c-0.5,0-0.9,0.1-1.4,0.4L16.8,17l0.2-3.7h4.3v1h-3.3l-0.1,2c0.5-0.2,1-0.3,1.5-0.3c1.4,0,2.4,0.9,2.4,2.1c0,1.4-1.1,2.4-2.7,2.4 C18,20.5,17.1,20.2,16.4,19.6z\"/>\n                <path d=\"M4,6.6L9.5,2v3.7h7.4c6.1,0,11.1,5,11.1,11.1c0,6.1-5,11.1-11.1,11.1H9.5V26h1.8h5.5 c5.1,0,9.2-4.1,9.2-9.2c0-5.1-4.1-9.2-9.2-9.2h-5.5H9.5v3.7L4,6.6z\"/>\n              </svg>\n            </button>\n            <span slot=\"content\">${this.#translation.get('rewind')}</span>\n          </rh-tooltip>\n\n          <rh-tooltip id=\"full-play-tooltip\">\n            <button id=\"full-play\"\n                    aria-label=\"${playlabel}\"\n                    class=\"toolbar-button\"\n                    ?disabled=${!this.#mediaElement || playdisabled}\n                    @click=${this.#onPlayClick}\n                    @focus=${this.#onPlayFocus}>\n              <rh-icon set=\"ui\" icon=\"${this.paused ? 'play-fill' : 'pause-fill'}\"></rh-icon>\n            </button>\n            <span slot=\"content\">${playlabel}</span>\n          </rh-tooltip>\n\n          <rh-tooltip id=\"forward-tooltip\">\n            <button id=\"forward\"\n                    aria-label=\"${this.#translation.get('advance')}\"\n                    class=\"toolbar-button\"\n                    ?disabled=${forwarddisabled}\n                    @click=${() => this.forward()}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\"\n                   viewBox=\"0 0 32 32\"\n                   class=\"scrubber\"\n                   role=\"presentation\">\n                <path d=\"M10.4,19.5h1.8v-5l-1.8,0.8v-1l2.2-0.9h0.7v6.2h1.9v1h-4.8V19.5z\"/>\n                <path d=\"M16.4,19.6l0.7-0.8c0.6,0.5,1.2,0.8,1.9,0.8c0.9,0,1.5-0.6,1.5-1.4c0-0.8-0.6-1.3-1.5-1.3 c-0.5,0-0.9,0.1-1.4,0.4L16.8,17l0.2-3.7h4.3v1h-3.3l-0.1,2c0.5-0.2,1-0.3,1.5-0.3c1.4,0,2.4,0.9,2.4,2.1c0,1.4-1.1,2.4-2.7,2.4 C18,20.5,17.1,20.2,16.4,19.6z\"/>\n                <path d=\"M28,6.6L22.4,2v3.7h-7.4C9,5.7,4,10.6,4,16.7c0,6.1,5,11.1,11.1,11.1h7.4V26h-1.8h-5.5c-5.1,0-9.2-4.1-9.2-9.2 c0-5.1,4.1-9.2,9.2-9.2h5.5h1.8v3.7L28,6.6z\"/>\n              </svg>\n            </button>\n            <span slot=\"content\">${this.#translation.get('advance')}</span>\n          </rh-tooltip>`}${!this.#hasMenu ? '' : html`\n\n          <rh-tooltip id=\"menu-tooltip\"\n                      slot=\"button\"\n                      position=\"${this.#menuOpen ? 'left' : 'top'}\">\n            <button id=\"menu-button\"\n                    class=\"toolbar-button\"\n                    aria-label=\"${this.#translation.get('menu')}\"\n                    aria-controls=\"menu\"\n                    aria-haspopup=\"true\"\n                    @click=\"${this.#onMenuToggle}\">\n              <rh-icon set=\"ui\" icon=\"ellipsis-horizontal-fill\"></rh-icon>\n            </button>\n            <span slot=\"content\">${this.#translation.get('menu')}</span>\n          </rh-tooltip>\n\n          <rh-menu id=\"menu\"\n                   aria-labelledby=\"menu-button\"\n                   ?inert=\"${!this.#menuOpen}\"\n                   style=\"${styleMap(styles)}\"\n                   class=\"${classMap({ open })}\"\n                   .getItems=\"${(items: HTMLElement[]) => this.#getMenuItems(items)}\"\n                   @keydown=\"${this.#onMenuKeydown}\"\n                   @focusout=\"${this.#onMenuFocusout}\">${this.#panels.map(x => !x.panel ? '' : html`\n            <button id=\"${x.id}-menu-item\"\n                    aria-label=\"${x.panel.menuLabel}\"\n                    aria-controls=\"panel\"\n                    @click=\"${() => this.#selectOpenPanel(x.panel)}\">\n              ${x.panel.menuLabel}\n            </button>`)}\n            <rh-audio-player-rate-stepper id=\"mini-playback-rate\"\n                                          @playback-rate-select=\"${this.#onPlaybackRateSelect}\"\n                                          ?hidden=\"${!this.#isMini}\"\n                                          .disabled=\"${!this.#mediaElement}\"\n                                          .playbackRate=\"${this.playbackRate}\"\n                                          .label=\"${this.#translation.get('speed')}\"></rh-audio-player-rate-stepper>\n          </rh-menu>`}\n          <rh-tooltip id=\"close-tooltip\">\n            <button id=\"close\"\n                    aria-label=\"${this.#translation.get('close')}\"\n                    class=\"toolbar-button\"\n                    ?disabled=\"${!this.#mediaElement}\"\n                    aria-controls=\"panel\"\n                    @click=\"${this.#selectOpenPanel}\"\n                    @keydown=\"${this.#onCloseKeydown}\">\n              <rh-icon set=\"ui\" icon=\"close\"></rh-icon>\n            </button>\n            <span slot=\"content\">${this.#translation.get('close')}</span>\n          </rh-tooltip>\n          <div class=\"full-spacer\"></div>\n        </div>\n\n        <div id=\"panel\"\n             role=\"dialog\"\n             aria-live=\"polite\"\n             aria-labelledby=\"about-menu-item\"\n             part=\"panel\"\n             ?hidden=${!this.expanded || !this.#hasMenu}>\n          <slot id=\"about-slot\"\n                name=\"about\"\n                part=\"about\"\n                @slotchange=${this.#onPanelChange}>\n            <rh-audio-player-about></rh-audio-player-about>\n          </slot>\n          <slot id=\"subscribe-slot\"\n                name=\"subscribe\"\n                part=\"subscribe\"\n                @slotchange=${this.#onPanelChange}>\n          </slot>\n          <slot id=\"transcribe-slot\"\n                name=\"transcript\"\n                part=\"transcript\"\n                @slotchange=${this.#onPanelChange}\n                @transcriptdownload=${this.#onTranscriptDownload}>\n          </slot>\n        </div>\n      </rh-surface>\n    `;\n  }\n\n  async firstUpdated() {\n    // waiting for next render so that rh-menu is present in shadow root\n    await this.updateComplete;\n    this.#unsetTabindexFromMenuItems();\n  }\n\n  updated(changedProperties: PropertyValues<this>) {\n    if (changedProperties.has('volume')\n      && !!this.#mediaElement\n      && this.volume !== this.#mediaElement.volume) {\n      this.#mediaElement.volume = this.volume;\n    }\n    if (changedProperties.has('lang')) {\n      this.#loadLanguage();\n    }\n  }\n\n  async #loadLanguage(lang = this.#translation.language) {\n    const url = new URL(`./i18n/${lang}.json`, import.meta.url);\n    await this.#translation.loadTranslation(url, lang);\n    this.#updateMenuLabels();\n    this.#updateTranscriptLabels();\n  }\n\n  #getMenuItems(items: HTMLElement[]) {\n    const ministepperid = 'mini-playback-rate';\n    if (this.#isMini) {\n      return [\n        ...items.filter(x => x.id !== ministepperid),\n        ...this.shadowRoot\n            ?.getElementById(ministepperid)\n            ?.shadowRoot\n            ?.querySelectorAll('.tabbable') ?? [],\n      ];\n    } else {\n      return items;\n    }\n  }\n\n  #updateMenuLabels() {\n    if (this.#about?.menuLabel) {\n      this.#about.menuLabel = this.#translation.get('about');\n    }\n    if (this.#subscribe?.menuLabel) {\n      this.#subscribe.menuLabel = this.#translation.get('subscribe');\n    }\n    if (this.#transcript?.menuLabel) {\n      this.#transcript.menuLabel = this.#translation.get('transcript');\n    }\n  }\n\n  #updateTranscriptLabels() {\n    if (this.#transcript?.autoscrollLabel) {\n      this.#transcript.autoscrollLabel = this.#translation.get('autoscroll');\n    }\n    if (this.#transcript?.downloadLabel) {\n      this.#transcript.downloadLabel = this.#translation.get('download');\n    }\n  }\n\n  #cleanUpListeners() {\n    for (const [event, listener] of this.#listeners) {\n      this.#lastMediaElement?.removeEventListener(event, listener);\n    }\n  }\n\n  /**\n   * sets initial values based media player metadata\n   */\n  #initMediaElement(slotchangeevent?: Event) {\n    if (slotchangeevent) {\n      this.#cleanUpListeners();\n      this.#lastMediaElement = this.querySelector('audio') ?? undefined;\n    }\n\n    this.#mediaElement = this.querySelector('audio') ?? undefined;\n\n    if (this.#mediaElement) {\n      this.#mediaElement.removeAttribute('controls');\n      this.#mediaElement.setAttribute('seekable', 'seekable');\n      this.volume = this.#mediaElement.volume || 0.5;\n\n      for (const [event, listener] of this.#listeners) {\n        this.#mediaElement.addEventListener(event, listener);\n      }\n    }\n  }\n\n  /**\n   * handles media `canplay` event\n   */\n  #onCanplay() {\n    this.volume = this.#mediaElement?.volume || 0.5;\n  }\n\n  /**\n   * handles media `canplaythrough` event\n   */\n  #onCanplaythrough() {\n    this.requestUpdate();\n  }\n\n  #onCueseek(event: Event) {\n    const target = event.target as unknown;\n    const cue = target as RhCue;\n    const start = cue?.startTime;\n    if (start) {\n      this.seek(start);\n    }\n    this.#onTimeupdate();\n  }\n\n  /**\n   * handles media `durationchange` event\n   */\n  #onDurationchange() {\n    this.requestUpdate();\n    this.#transcript?.setDuration(this.duration);\n  }\n\n  /**\n   * handles media `ended` event\n   */\n  #onEnded(): void {\n    this.#paused = true;\n  }\n\n  /**\n   * handles media `loadeddata` event\n   */\n  #onLoadeddata(): void {\n    this.requestUpdate();\n  }\n\n  /**\n   * handles media `loadedmetadata` event\n   */\n  #onLoadedmetadata(): void {\n    this.requestUpdate();\n  }\n\n  /**\n   * handles mute button click to toggle mute\n   */\n  #onMuteButton(): void {\n    return !this.muted ? this.mute() : this.unmute();\n  }\n\n  /**\n   * handles media `pause` event by updating component's `_paused` state\n   */\n  #onPause(): void {\n    this.#paused = true;\n    this.requestUpdate();\n  }\n\n  /**\n   * handles media `play` event by updating component's `_paused` state\n   */\n  #onPlay(): void {\n    this.#paused = false;\n    this.requestUpdate();\n  }\n\n  /**\n   * handles changes to media element playback rate\n   * by updating component playbackRate property\n   */\n  #onPlaybackRateChange(): void {\n    if (!this.#mediaElement || this.playbackRate !== this.#mediaElement.playbackRate) {\n      this.playbackRate = this.#mediaElement?.playbackRate || 1;\n    }\n  }\n\n  /**\n   * handles changes to value of playback rate number input\n   * by updating component playbackRate property\n   */\n  #onPlaybackRateSelect(event: Event) {\n    if (event instanceof RhAudioPlayerRateSelectEvent && this.#mediaElement) {\n      this.playbackRate = event.playbackRate;\n      this.#mediaElement.playbackRate = event.playbackRate;\n    }\n  }\n\n  /**\n   * handles play button click by toggling play / pause\n   */\n  async #onPlayClick(event: Event) {\n    const target = event?.target as HTMLElement;\n    const tooltip = target?.parentElement?.closest('rh-tooltip') as RhTooltip | null;\n    for (const instance of RhAudioPlayer.instances) {\n      if (instance !== this) {\n        instance.pause();\n      }\n    }\n    if (this.#paused) {\n      this.play();\n    } else {\n      this.pause();\n    }\n    setTimeout(() => tooltip?.show(), 10);\n  }\n\n  /**\n   * handles play button click by toggling play / pause\n   */\n  #onPlayFocus() {\n    type Scroller = RhAudioPlayerScrollingTextOverflow | RhAudioPlayerScrollingTextOverflow;\n    for (const id of ['mediaseries', 'mediatitle']) {\n      const scroller = this.shadowRoot?.querySelector<Scroller>(`#${id}`);\n      scroller?.startScrolling();\n    }\n  }\n\n  /**\n   * handles media `playing` event by updating component's `_paused` state\n   */\n  #onPlaying() {\n    this.#paused = false;\n    this.requestUpdate();\n  }\n\n  /**\n   * handles media `seeked` event by updating component's `_currentTime` state\n   */\n  #onSeeked() {\n    this.requestUpdate();\n  }\n\n  /**\n   * handles media `seeking` event by updating component's `_currentTime` state\n   */\n  #onSeeking() {\n    this.requestUpdate();\n  }\n\n  /**\n   * handles time input changes by seeking to input value\n   */\n  #onTimeSlider(event: Event & { target: HTMLInputElement }) {\n    if (this.#mediaEnd) {\n      const percent = parseFloat(event.target.value) ?? 0;\n      const seconds = this.duration * (percent / 100);\n      this.seek(seconds);\n    }\n  }\n\n  /**\n   * handles media `timeupdate` event by updating component's `_currentTime` state\n   */\n  #onTimeupdate() {\n    this.#transcript?.setActiveCues(this.currentTime);\n    this.requestUpdate();\n  }\n\n  /**\n   * handles toggling the \"More options\" menu button\n   */\n  #onMenuToggle(event: Event) {\n    event.preventDefault();\n    this.#menuOpen = !this.#menuOpen;\n    event.stopPropagation();\n  }\n\n  /** updates panel text */\n  #onPanelChange() {\n    this.#updateMenuLabels();\n    this.#updateTranscriptLabels();\n    this.#onTitleChange();\n  }\n\n  /** updates about panel with title and series text */\n  #onTitleChange() {\n    const mediatitle = this._mediatitle?.[0]?.textContent ?? '';\n    const mediaseries = this._mediaseries?.[0]?.textContent ?? '';\n    if (mediatitle.length > 0) {\n      this.mediatitle ||= mediatitle;\n    }\n    if (mediaseries.length > 0) {\n      this.mediaseries ||= mediaseries;\n    }\n    if (this.#about && this.mediaseries) {\n      this.#about.mediaseries = this.mediaseries;\n    }\n    if (this.#about && this.mediatitle) {\n      this.#about.mediatitle = this.mediatitle;\n    }\n  }\n\n  /**\n   * handles media `volumechange` event by\n   * updating component's `_muted` state and `volume` property\n   */\n  #onVolumechange() {\n    if (this.#mediaElement) {\n      const { volume } = this.#mediaElement;\n      if (volume > 0) {\n        this.#unmutedVolume = this.#mediaElement.volume;\n      }\n      this.volume = Math.max(0, Math.min(10, this.#mediaElement.volume));\n    }\n  }\n\n  /**\n   * handles volume input changes by setting media volume to input value\n   */\n  #onVolumeSlider(event: Event & { target: HTMLInputElement }) {\n    const level = parseFloat(event.target.value || '-1');\n    if (this.#mediaElement) {\n      this.#mediaElement.volume = Math.max(0, Math.min(10, level / 100));\n    }\n  }\n\n  /**\n   * opens particular panel open or closes panels if none given\n   */\n  #selectOpenPanel(\n    panel?: RhAudioPlayerAbout | RhAudioPlayerSubscribe | RhTranscript\n  ) {\n    const panels = [this.#about, this.#subscribe, this.#transcript];\n    panels.forEach(item => item?.toggleAttribute('hidden', panel !== item));\n    this.expanded = !!panel && panels.includes(panel);\n    const focusElement = this.expanded ?\n      this.shadowRoot?.getElementById('close')\n      : this.shadowRoot?.getElementById('menu-button');\n\n    setTimeout(() => {\n      setTimeout(() => {\n        focusElement?.focus();\n        if (panel === this.#transcript) {\n          this.#transcript?.setActiveCues(this.currentTime);\n        }\n      }, 1);\n      setTimeout(() => {\n        if (panel?.scrollText) {\n          panel.scrollText();\n        }\n      }, 1000);\n    }, 1);\n  }\n\n  #lastActiveMenuItem?: HTMLElement;\n\n  /**\n   * hides panel with Escape key\n   * @param event {KeyboardEvent}\n   */\n  async #onCloseKeydown(event: KeyboardEvent) {\n    if (event.key === 'Escape') {\n      this.#selectOpenPanel();\n    }\n  }\n\n  /**\n   * hides menu with Escape key\n   */\n  async #onMenuKeydown(event: KeyboardEvent) {\n    if (event.key === 'Escape') {\n      await this.#hideMenu();\n      this.shadowRoot?.querySelector<HTMLButtonElement>('#menu-button')?.focus();\n    }\n  }\n\n  /**\n   * hides menu when left without focus\n   */\n  #onMenuFocusout(event: FocusEvent) {\n    const { relatedTarget } = event;\n    if (\n      relatedTarget instanceof HTMLElement\n      && relatedTarget.closest('rh-menu') !== this.shadowRoot?.getElementById('menu')\n    ) {\n      setTimeout(() => this.#hideMenu(), 300);\n    }\n  }\n\n  async #positionMenu() {\n    await this.updateComplete;\n    const placement = 'bottom-start';\n    const mainAxis = 0;\n    const offset = { mainAxis: mainAxis, alignmentAxis: 0 };\n    await this.#menufloat.show({ offset: offset, placement: placement });\n  }\n\n  async #showMenu() {\n    const menu = this.shadowRoot?.getElementById('menu') as RhMenu;\n    const button = this.shadowRoot?.getElementById('menu-button') as HTMLElement;\n    if (!menu || !button) {\n      return;\n    }\n    await this.#positionMenu();\n    await this.updateComplete;\n    if (this.#lastActiveMenuItem) {\n      menu.activateItem(this.#lastActiveMenuItem);\n    }\n    window.addEventListener('click', this.#onWindowClick);\n  }\n\n  #unsetTabindexFromMenuItems() {\n    const menu = this.shadowRoot?.getElementById('menu') as RhMenu;\n    this.#lastActiveMenuItem = menu?.activeItem;\n    for (const item of menu?.querySelectorAll<HTMLElement>('[tabindex]') ?? []) {\n      item.tabIndex = -1;\n    }\n  }\n\n  async #hideMenu() {\n    this.#unsetTabindexFromMenuItems();\n    window.removeEventListener('click', this.#onWindowClick);\n    await this.#menufloat.hide();\n  }\n\n  #onTranscriptDownload() {\n    const transcript = this.#transcript?.downloadText;\n    const label = this.#transcript?.label;\n    const a = document.createElement('a');\n    const title = [this.mediaseries, this.mediatitle, label].join(' ');\n    const filename = (\n      this.mediatitle\n      || this.mediaseries\n      || label\n      || 'transcript'\n    ).replace(/[^\\w^\\d^-]/g, '');\n    const contents = `${title}\\n${transcript}`;\n    a.setAttribute('href', `data:text/plain;charset=UTF-8,${encodeURIComponent(contents)}`);\n    a.setAttribute('download', `${filename}.txt`);\n    a.style.display = 'none';\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n  }\n\n  #onWindowClick = (event: MouseEvent) => {\n    const menu = this.shadowRoot?.getElementById('menu-button');\n    const path = event.composedPath();\n    if (!menu || !path.includes(menu) && !path.some(x => x instanceof RhMenu)) {\n      this.#hideMenu();\n    }\n  };\n\n  /**\n   * Mutes media volume\n   */\n  mute() {\n    if (this.#mediaElement) {\n      this.#unmutedVolume = Math.max(0.1, this.#mediaElement?.volume);\n      this.#mediaElement.volume = 0;\n    }\n  }\n\n  /**\n   * Unmutes media volume\n   */\n  unmute() {\n    if (this.#mediaElement) {\n      this.#mediaElement.volume = Math.max(this.#unmutedVolume, 0.1);\n    }\n  }\n\n  /**\n   * Pauses playback\n   */\n  pause() {\n    return this.#mediaElement?.pause?.();\n  }\n\n  /**\n   * Starts or resumes playback\n   */\n  async play() {\n    return await this.#mediaElement?.play?.();\n  }\n\n  /**\n   * Seeks media to a given point in seconds\n   */\n  seek(seconds: number) {\n    this.#mediaElement?.setAttribute('seekable', 'seekable');\n    if (this.#mediaElement) {\n      const time = this.#mediaEnd ?\n        Math.max(this.#mediaStart, Math.min(seconds, this.#mediaEnd))\n        : -1;\n      if (time >= 0) {\n        this.#mediaElement.currentTime = time;\n        this.requestUpdate();\n      }\n    }\n  }\n\n  /**\n   * Seeks media a given number of secons from current elapsed time\n   */\n  seekFromCurrentTime(seconds = 0) {\n    const currentTime = this.#mediaElement?.currentTime || 0;\n    const time = currentTime + seconds;\n    this.seek(time);\n  }\n\n  /**\n   * Rewinds media by 15 seconds (default)\n   * @param by number of seconds to rewind\n   */\n  rewind(by = 15) {\n    this.seekFromCurrentTime(-by);\n  }\n\n  /**\n   * Advances media by 15 seconds (default)\n   * @param by number of seconds to advance\n   */\n  forward(by = 15) {\n    this.seekFromCurrentTime(by);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-audio-player': RhAudioPlayer;\n  }\n}\n"]}