{"version":3,"file":"rh-audio-player-scrolling-text-overflow.js","sourceRoot":"","sources":["rh-audio-player-scrolling-text-overflow.ts"],"names":[],"mappings":";;AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,KAAK,CAAC;AACjD,OAAO,EAAE,aAAa,EAAE,MAAM,kCAAkC,CAAC;AACjE,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AAEvD,OAAO,EAAE,QAAQ,EAAE,MAAM,gCAAgC,CAAC;;;AAI1D;;GAEG;AAGI,IAAM,kCAAkC,GAAxC,MAAM,kCAAmC,SAAQ,UAAU;IAA3D;;;QAGL,wDAAa,KAAK,EAAC;QAEnB,4DAA6B;IAmD/B,CAAC;IA5CC,iBAAiB;QACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,IAAI,CAAC,QAAQ,EAAE,CAAC;YACd,uBAAA,IAAI,6CAAU,gBAAgB,CAAC,IAAI,CAAC,MAAA,CAAC;QACvC,CAAC;IACH,CAAC;IAED,YAAY;QACV,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE,MAAM,IAAI,CAAC,CAAC;QAC9C,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,iBAAiB,EAAE,GAAG,EAAE,GAAG,IAAI,GAAG,CAAC,CAAC;QAC3D,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,MAAM;QACJ,MAAM,SAAS,GAAG,uBAAA,IAAI,iDAAO,EAAE,SAAS,IAAI,MAAM,CAAC;QACnD,MAAM,SAAS,GAAG,uBAAA,IAAI,qDAAW,CAAC;QAClC,MAAM,UAAU,GAAG,uBAAA,IAAI,2GAAc,CAAC;QACtC,OAAO,IAAI,CAAA;;oBAEK,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,IAAI,EAAE,CAAC;wBAC3B,IAAI,CAAC,cAAc;uBACpB,IAAI,CAAC,aAAa;oBACrB,IAAI,CAAC,cAAc;mBACpB,IAAI,CAAC,aAAa;;;yBAGZ,QAAQ,CAAC,EAAE,SAAS,EAAE,UAAU,EAAE,CAAC;gBAC5C,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA;gCACP;aACnB,CAAC;IACZ,CAAC;IAED,aAAa;QACX,uBAAA,IAAI,iDAAc,KAAK,MAAA,CAAC;QACxB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,cAAc;QACZ,IAAI,uBAAA,IAAI,2GAAc,EAAE,CAAC;YACvB,uBAAA,IAAI,iDAAc,IAAI,MAAA,CAAC;YACvB,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC;IACH,CAAC;;;;;;IA/CC,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE,cAAc,EAAE,CAAC,OAAO,CAAC,CAAC;IACzD,OAAO,CAAC,KAAK,EAAE,WAAW,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,IAAI,CAAC,CAAC,CAAC;AAC/D,CAAC;AATe,yCAAM,GAAG,CAAC,MAAM,CAAC,AAAX,CAAY;AADvB,kCAAkC;IAF9C,aAAa,CAAC,yCAAyC,CAAC;IACxD,QAAQ;GACI,kCAAkC,CAwD9C","sourcesContent":["import { LitElement, html, isServer } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { classMap } from 'lit/directives/class-map.js';\n\nimport { themable } from '@rhds/elements/lib/themable.js';\n\nimport styles from './rh-audio-player-scrolling-text-overflow.css';\n\n/**\n * Audio Player Scrolling Text Overflow\n */\n@customElement('rh-audio-player-scrolling-text-overflow')\n@themable\nexport class RhAudioPlayerScrollingTextOverflow extends LitElement {\n  static readonly styles = [styles];\n\n  #scrolling = false;\n\n  #style?: CSSStyleDeclaration;\n\n  get #isScrollable() {\n    const outer = this.shadowRoot?.getElementById?.('outer');\n    return (outer?.scrollWidth ?? 0) > (outer?.clientWidth ?? 0);\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback();\n    if (!isServer) {\n      this.#style = getComputedStyle(this);\n    }\n  }\n\n  firstUpdated() {\n    const letters = this.textContent?.length || 0;\n    const ms = Math.round(letters * 400);\n    this.style.setProperty('--_animation-ms', `${ms / 1000}s`);\n    this.requestUpdate();\n  }\n\n  render() {\n    const direction = this.#style?.direction ?? 'auto';\n    const scrolling = this.#scrolling;\n    const scrollable = this.#isScrollable;\n    return html`\n      <div id=\"outer\"\n           class=\"${classMap({ [direction]: true })}\"\n           @mouseover=${this.startScrolling}\n           @mouseout=${this.stopScrolling}\n           @focus=${this.startScrolling}\n           @blur=${this.stopScrolling}>\n        <div id=\"inner\">\n          <!-- inline text to scroll if wider than host -->\n          <slot class=\"${classMap({ scrolling, scrollable })}\"></slot>\n        </div>${!scrollable ? '' : html`\n        <span id=\"fade\"></span>`}\n      </div>`;\n  }\n\n  stopScrolling() {\n    this.#scrolling = false;\n    this.requestUpdate();\n  }\n\n  startScrolling() {\n    if (this.#isScrollable) {\n      this.#scrolling = true;\n      this.requestUpdate();\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-audio-player-scrolling-text-overflow': RhAudioPlayerScrollingTextOverflow;\n  }\n}\n"]}