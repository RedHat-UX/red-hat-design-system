{"version":3,"file":"rh-audio-player-scrolling-text-overflow.js","sourceRoot":"","sources":["rh-audio-player-scrolling-text-overflow.ts"],"names":[],"mappings":";;AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,aAAa,EAAE,MAAM,kCAAkC,CAAC;AACjE,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AAEvD,OAAO,EAAE,QAAQ,EAAE,MAAM,gCAAgC,CAAC;;;AAI1D;;;;;GAKG;AAGI,IAAM,kCAAkC,GAAxC,MAAM,kCAAmC,SAAQ,UAAU;IAA3D;;;QAIL,wDAAa,KAAK,EAAC;QAEnB,4DAA6B;IA8C/B,CAAC;IAvCC,iBAAiB;QACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,uBAAA,IAAI,6CAAU,gBAAgB,CAAC,IAAI,CAAC,MAAA,CAAC;IACvC,CAAC;IAED,YAAY;QACV,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE,MAAM,IAAI,CAAC,CAAC;QAC9C,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,iBAAiB,EAAE,GAAG,EAAE,GAAG,IAAI,GAAG,CAAC,CAAC;QAC3D,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,MAAM;QACJ,MAAM,EAAE,SAAS,EAAE,GAAG,uBAAA,IAAI,iDAAO,IAAI,EAAE,CAAC;QACxC,OAAO,IAAI,CAAA;;oBAEK,QAAQ,CAAC,EAAE,CAAC,SAAS,IAAI,MAAM,CAAC,EAAE,IAAI,EAAE,CAAC;wBACrC,IAAI,CAAC,cAAc;uBACpB,IAAI,CAAC,aAAa;oBACrB,IAAI,CAAC,cAAc;mBACpB,IAAI,CAAC,aAAa;;yBAEZ,uBAAA,IAAI,qDAAW,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,IAAI,uBAAA,IAAI,2GAAc,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE;;UAE3F,uBAAA,IAAI,2GAAc,CAAC,CAAC,CAAC,IAAI,CAAA,yBAAyB,CAAC,CAAC,CAAC,EAAE;aACpD,CAAC;IACZ,CAAC;IAED,aAAa;QACX,uBAAA,IAAI,iDAAc,KAAK,MAAA,CAAC;QACxB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,cAAc;QACZ,IAAI,uBAAA,IAAI,2GAAc,EAAE,CAAC;YACvB,uBAAA,IAAI,iDAAc,IAAI,MAAA,CAAC;YACvB,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC;IACH,CAAC;;;;;;IA1CC,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,OAAO,CAAC,CAAC;IACvD,OAAO,CAAC,KAAK,EAAE,WAAW,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,IAAI,CAAC,CAAC,CAAC;AAC/D,CAAC;AAVe,yCAAM,GAAG,CAAC,MAAM,CAAC,AAAX,CAAY;AADvB,kCAAkC;IAF9C,aAAa,CAAC,yCAAyC,CAAC;IACxD,QAAQ;GACI,kCAAkC,CAoD9C","sourcesContent":["import { LitElement, html } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { classMap } from 'lit/directives/class-map.js';\n\nimport { themable } from '@rhds/elements/lib/themable.js';\n\nimport styles from './rh-audio-player-scrolling-text-overflow.css';\n\n/**\n * Audio Player Scrolling Text Overflow\n * @slot - inline text to scroll if wider than host\n * @cssprop [--rh-audio-player-scrolling-text-overflow-background-color=var(--rh-color-surface-lightest, #ffffff)]\n *          color of fade effect (should match background)\n */\n@customElement('rh-audio-player-scrolling-text-overflow')\n@themable\nexport class RhAudioPlayerScrollingTextOverflow extends LitElement {\n  static readonly styles = [styles];\n\n\n  #scrolling = false;\n\n  #style?: CSSStyleDeclaration;\n\n  get #isScrollable() {\n    const outer = this.shadowRoot?.getElementById('outer');\n    return (outer?.scrollWidth ?? 0) > (outer?.clientWidth ?? 0);\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback();\n    this.#style = getComputedStyle(this);\n  }\n\n  firstUpdated() {\n    const letters = this.textContent?.length || 0;\n    const ms = Math.round(letters * 400);\n    this.style.setProperty('--_animation-ms', `${ms / 1000}s`);\n    this.requestUpdate();\n  }\n\n  render() {\n    const { direction } = this.#style ?? {};\n    return html`\n      <div id=\"outer\"\n           class=\"${classMap({ [direction || 'auto']: true })}\"\n           @mouseover=${this.startScrolling}\n           @mouseout=${this.stopScrolling}\n           @focus=${this.startScrolling}\n           @blur=${this.stopScrolling}>\n        <div id=\"inner\">\n          <slot class=\"${this.#scrolling ? 'scrolling' : ''} ${this.#isScrollable ? 'scrollable' : ''}\"></slot>\n        </div>\n        ${this.#isScrollable ? html`<span id=\"fade\"></span>` : ''}\n      </div>`;\n  }\n\n  stopScrolling() {\n    this.#scrolling = false;\n    this.requestUpdate();\n  }\n\n  startScrolling() {\n    if (this.#isScrollable) {\n      this.#scrolling = true;\n      this.requestUpdate();\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-audio-player-scrolling-text-overflow': RhAudioPlayerScrollingTextOverflow;\n  }\n}\n"]}