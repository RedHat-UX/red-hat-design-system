{"version":3,"file":"rh-audio-player-scrolling-text-overflow.js","sourceRoot":"","sources":["rh-audio-player-scrolling-text-overflow.ts"],"names":[],"mappings":";;AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,aAAa,EAAE,MAAM,kCAAkC,CAAC;AACjE,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AAEvD,OAAO,EAAE,oBAAoB,EAAmB,MAAM,qCAAqC,CAAC;;;AAK5F;;;;;GAKG;AAEI,IAAM,kCAAkC,GAAxC,MAAM,kCAAmC,SAAQ,UAAU;IAA3D;;;QAKL,wDAAa,KAAK,EAAC;QAEnB,oDAAS,gBAAgB,CAAC,IAAI,CAAC,EAAC;IA0ClC,CAAC;IAnCC,YAAY;QACV,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE,MAAM,IAAI,CAAC,CAAC;QAC9C,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,iBAAiB,EAAE,GAAG,EAAE,GAAG,IAAI,GAAG,CAAC,CAAC;QAC3D,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,MAAM;QACJ,MAAM,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,IAAI,CAAC;QACzB,MAAM,EAAE,SAAS,EAAE,GAAG,uBAAA,IAAI,iDAAO,CAAC;QAClC,OAAO,IAAI,CAAA;;iBAEE,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,SAAS,IAAI,MAAM,CAAC,EAAE,IAAI,EAAE,CAAC;qBACjD,IAAI,CAAC,cAAc;oBACpB,IAAI,CAAC,aAAa;iBACrB,IAAI,CAAC,cAAc;gBACpB,IAAI,CAAC,aAAa;;yBAET,uBAAA,IAAI,qDAAW,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,IAAI,uBAAA,IAAI,2GAAc,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE;;UAE3F,uBAAA,IAAI,2GAAc,CAAC,CAAC,CAAC,IAAI,CAAA,yBAAyB,CAAC,CAAC,CAAC,EAAE;aACpD,CAAC;IACZ,CAAC;IAED,aAAa;QACX,uBAAA,IAAI,iDAAc,KAAK,MAAA,CAAC;QACxB,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,cAAc;QACZ,IAAI,uBAAA,IAAI,2GAAc,EAAE,CAAC;YACvB,uBAAA,IAAI,iDAAc,IAAI,MAAA,CAAC;YACvB,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC;IACH,CAAC;;;;;;IAtCC,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,OAAO,CAAC,CAAC;IACvD,OAAO,CAAC,KAAK,EAAE,WAAW,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,IAAI,CAAC,CAAC,CAAC;AAC/D,CAAC;AAXe,yCAAM,GAAG,CAAC,MAAM,CAAC,AAAX,CAAY;AAEF;IAA/B,oBAAoB,EAAE;8DAAyB;AAHrC,kCAAkC;IAD9C,aAAa,CAAC,yCAAyC,CAAC;GAC5C,kCAAkC,CAiD9C","sourcesContent":["import { LitElement, html } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { classMap } from 'lit/directives/class-map.js';\n\nimport { colorContextConsumer, type ColorTheme } from '../../lib/context/color/consumer.js';\n\nimport styles from './rh-audio-player-scrolling-text-overflow.css';\n\n\n/**\n * Audio Player Scrolling Text Overflow\n * @slot - inline text to scroll if wider than host\n * @cssprop [--rh-audio-player-scrolling-text-overflow-background-color=var(--rh-color-surface-lightest, #ffffff)]\n *          color of fade effect (should match background)\n */\n@customElement('rh-audio-player-scrolling-text-overflow')\nexport class RhAudioPlayerScrollingTextOverflow extends LitElement {\n  static readonly styles = [styles];\n\n  @colorContextConsumer() private on?: ColorTheme;\n\n  #scrolling = false;\n\n  #style = getComputedStyle(this);\n\n  get #isScrollable() {\n    const outer = this.shadowRoot?.getElementById('outer');\n    return (outer?.scrollWidth ?? 0) > (outer?.clientWidth ?? 0);\n  }\n\n  firstUpdated() {\n    const letters = this.textContent?.length || 0;\n    const ms = Math.round(letters * 400);\n    this.style.setProperty('--_animation-ms', `${ms / 1000}s`);\n    this.requestUpdate();\n  }\n\n  render() {\n    const { on = '' } = this;\n    const { direction } = this.#style;\n    return html`\n      <div id=\"outer\"\n        class=\"${classMap({ [on]: !!on, [direction || 'auto']: true })}\"\n        @mouseover=${this.startScrolling}\n        @mouseout=${this.stopScrolling}\n        @focus=${this.startScrolling}\n        @blur=${this.stopScrolling}>\n        <div id=\"inner\">\n          <slot class=\"${this.#scrolling ? 'scrolling' : ''} ${this.#isScrollable ? 'scrollable' : ''}\"></slot>\n        </div>\n        ${this.#isScrollable ? html`<span id=\"fade\"></span>` : ''}\n      </div>`;\n  }\n\n  stopScrolling() {\n    this.#scrolling = false;\n    this.requestUpdate();\n  }\n\n  startScrolling() {\n    if (this.#isScrollable) {\n      this.#scrolling = true;\n      this.requestUpdate();\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-audio-player-scrolling-text-overflow': RhAudioPlayerScrollingTextOverflow;\n  }\n}\n"]}