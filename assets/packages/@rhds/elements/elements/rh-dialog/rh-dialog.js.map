{"version":3,"file":"rh-dialog.js","sourceRoot":"","sources":["rh-dialog.ts"],"names":[],"mappings":";;AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,aAAa,EAAE,MAAM,kCAAkC,CAAC;AACjE,OAAO,EAAE,QAAQ,EAAE,MAAM,4BAA4B,CAAC;AAEtD,OAAO,EAAE,WAAW,EAAE,MAAM,0CAA0C,CAAC;AACvE,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AACvD,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,MAAM,oCAAoC,CAAC;AAClF,OAAO,EAAE,cAAc,EAAE,MAAM,qDAAqD,CAAC;AACrF,OAAO,EAAE,oBAAoB,EAAE,MAAM,mCAAmC,CAAC;AACzE,OAAO,EAAE,QAAQ,EAAE,MAAM,gCAAgC,CAAC;;;AAI1D,OAAO,EAAE,KAAK,EAAE,MAAM,yBAAyB,CAAC;AAChD,OAAO,EAAE,SAAS,EAAE,MAAM,8BAA8B,CAAC;AAEzD,OAAO,yCAAyC,CAAC;AACjD,OAAO,uCAAuC,CAAC;AAE/C,MAAM,OAAO,iBAAkB,SAAQ,KAAK;IAC1C;QACE,KAAK,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;IACvD,CAAC;CACF;AAED,MAAM,OAAO,gBAAiB,SAAQ,KAAK;IACzC;QACE,KAAK,CAAC,OAAO,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;IACtD,CAAC;CACF;AAED,MAAM,OAAO,eAAgB,SAAQ,KAAK;IACxC;IACE,6DAA6D;IACtD,OAA2B;QAElC,KAAK,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;QAF5C,YAAO,GAAP,OAAO,CAAoB;IAGpC,CAAC;CACF;AAED,KAAK,UAAU,YAAY,CAAC,MAAyB;IACnD,MAAM,EAAE,UAAU,EAAE,GAAG,MAAM,MAAM,CAAC,aAAa,CAAC,CAAC;IACnD,MAAM,UAAU,CAAC,MAAM,CAAC,CAAC;AAC3B,CAAC;AAED;;;;;;;;;;GAUG;AAGI,IAAM,QAAQ,GAAd,MAAM,QAAS,SAAQ,UAAU;IAAjC;;;QAqBL;;WAEG;QACyC,SAAI,GAAG,KAAK,CAAC;QAQzD,0FAA0F;QACnF,gBAAW,GAAG,EAAE,CAAC;QAExB,+BAAc,IAAI,oBAAoB,CAAC,IAAI,CAAC,EAAC;QAM7C,6BAAY,WAAW,EAAE,EAAC;QAC1B,mCAAsC,IAAI,EAAC;QAC3C,2BAA8B,IAAI,EAAC;QACnC,yBAAmB,EAAE,EAAC;QACtB,6BAAuB,EAAE,EAAC;QAC1B,+BAAc,KAAK,EAAC;QAEpB,0BAAS,IAAI,cAAc,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,aAAa,EAAE,QAAQ,CAAC,EAAC;IAsO7E,CAAC;IApOC,iBAAiB;QACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC1B,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,uBAAA,IAAI,gDAAW,CAAC,CAAC;QAClD,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,uBAAA,IAAI,8CAAS,CAAC,CAAC;IAChD,CAAC;IAED,oBAAoB;QAClB,KAAK,CAAC,oBAAoB,EAAE,CAAC;QAC7B,uBAAA,IAAI,gCAAgB,EAAE,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IAC1E,CAAC;IAED,MAAM;QACJ,MAAM,QAAQ,GAAG,CAAC,uBAAA,IAAI,wBAAQ,IAAI,uBAAA,IAAI,0BAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,uBAAA,IAAI,0BAAU,CAAC,CAAC,CAAC,SAAS,CAAC;QACtF,MAAM,YAAY,GAAG,uBAAA,IAAI,gCAAgB,CAAC,CAAC,CAAC,uBAAA,IAAI,gCAAgB,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC;QACvF,MAAM,SAAS,GAAG,uBAAA,IAAI,uBAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QACnD,MAAM,cAAc,GAAG,uBAAA,IAAI,uBAAO,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QAC7D,MAAM,SAAS,GAAG,uBAAA,IAAI,uBAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QACnD,MAAM,EAAE,MAAM,EAAE,GAAG,uBAAA,IAAI,4BAAY,CAAC;QACpC,OAAO,IAAI,CAAA;sCACuB,QAAQ,CAAC,EAAE,MAAM,EAAE,CAAC;6BAC7B,QAAQ,CAAC,EAAE,SAAS,EAAE,cAAc,EAAE,SAAS,EAAE,CAAC;+BAChD,CAAC,IAAI,CAAC,IAAI;;;;oCAIL,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC;+BAC3D,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;4BAClG,uBAAA,IAAI,2DAAsB;;;;;;gCAMtB,IAAI,CAAC,KAAK;;;;;;;;6BAQb,CAAC,SAAS;;;;kDAIW,CAAC,cAAc;;;;;;;;;;;6BAWpC,CAAC,SAAS;;;;;;;;KAQlC,CAAC;IACJ,CAAC;IAGe,AAAN,KAAK,CAAC,KAAK;QACnB,MAAM,IAAI,CAAC,cAAc,CAAC;QAC1B,uBAAA,IAAI,oBAAW,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,MAAA,CAAC;QACtD,uBAAA,IAAI,kBAAS,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,CAAC,MAAA,CAAC;QACzD,uBAAA,IAAI,sBAAa,uBAAA,IAAI,sBAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,MAAA,CAAC;QAEzE,IAAI,uBAAA,IAAI,gCAAgB,EAAE,CAAC;YACzB,uBAAA,IAAI,gCAAgB,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YACpE,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;QACjC,CAAC;QAED,IAAI,uBAAA,IAAI,wBAAQ,EAAE,CAAC;YACjB,uBAAA,IAAI,wBAAQ,CAAC,EAAE,GAAG,uBAAA,IAAI,0BAAU,CAAC;QACnC,CAAC;aAAM,IAAI,uBAAA,IAAI,0BAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACrC,mDAAmD;YACnD,uBAAA,IAAI,0BAAU,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,uBAAA,IAAI,0BAAU,CAAC;QACxC,CAAC;IACH,CAAC;IAGe,AAAN,KAAK,CAAC,YAAY,CAAC,QAAkB,EAAE,IAAc;QAC7D,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;YAC1B,IAAI,QAAQ,KAAK,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE,CAAC;gBAC7C,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC;gBACvC,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;gBAC5C,IAAI,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,CAAC;oBACjC,YAAY,CAAC,MAAM,CAAC,CAAC;gBACvB,CAAC;YACH,CAAC;QACH,CAAC;aAAM,IAAI,QAAQ,IAAI,IAAI;eACb,IAAI,IAAI,IAAI;YACf,+EAA+E;YAC/E,kCAAkC;eAC/B,QAAQ,IAAI,IAAI,EAAE,CAAC;YAC/B,OAAO;QACT,CAAC;aAAM,IAAI,IAAI,EAAE,CAAC;YAChB,kCAAkC;YAClC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACxC,MAAM,IAAI,CAAC,cAAc,CAAC;YAC1B,IAAI,CAAC,aAAa,CAAC,IAAI,eAAe,CAAC,uBAAA,IAAI,gCAAgB,CAAC,CAAC,CAAC;QAChE,CAAC;aAAM,CAAC;YACN,uBAAuB;YACvB,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC;YAEtC,MAAM,KAAK,GAAG,uBAAA,IAAI,4BAAY,CAAC,CAAC,CAAC,IAAI,iBAAiB,EAAE,CAAC,CAAC,CAAC,IAAI,gBAAgB,EAAE,CAAC;YAElF,MAAM,IAAI,CAAC,cAAc,CAAC;YAE1B,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC;IACH,CAAC;IAGS,eAAe;QACvB,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YACjB,uBAAA,IAAI,4BACD,IAAI,CAAC,WAAW,EAA4B,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,MAAA,CAAC;YAC7E,uBAAA,IAAI,gCAAgB,EAAE,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;QACvE,CAAC;IACH,CAAC;IAEoB,AAAN,KAAK,CAAC,cAAc,CAAC,KAAiB;QACnD,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,MAAM,IAAI,CAAC,cAAc,CAAC;QAC1B,IAAI,CAAC,WAAW,EAAE,KAAK,EAAE,CAAC;IAC5B,CAAC;IAiCD,KAAK,CAAC,MAAM,CAAC,WAAoB;QAC/B,uBAAA,IAAI,wBAAe,IAAI,MAAA,CAAC;QACxB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QACxB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;QAClB,MAAM,IAAI,CAAC,cAAc,CAAC;QAC1B,uBAAA,IAAI,wBAAe,KAAK,MAAA,CAAC;IAC3B,CAAC;IAED,UAAU,CAAC,OAAoB;QAC7B,uBAAA,IAAI,4BAAmB,OAAO,MAAA,CAAC;QAC/B,uBAAA,IAAI,gCAAgB,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IACtE,CAAC;IAED;;;;;OAKG;IACH,MAAM;QACJ,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YACf,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACnB,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,KAAK,EAAE,CAAC;QACf,CAAC;IACH,CAAC;IAED;;;;;OAKG;IACH,IAAI;QACF,IAAI,CAAC,MAAM,EAAE,SAAS,EAAE,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;IAED,SAAS;QACP,uBAAuB;QACvB,IAAI,CAAC,IAAI,EAAE,CAAC;IACd,CAAC;IAED;;;;;;OAMG;IACH,KAAK,CAAC,WAAoB;QACxB,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE,CAAC;YACpC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QACjC,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACxB,CAAC;QAED,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC;QACrB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;IACpB,CAAC;;;;;;;;;;;+CA3FQ,KAAiB;IACxB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC;IAC/B,IAAI,IAAI,EAAE,CAAC;QACT,MAAM,IAAI,GAAG,KAAK,CAAC,YAAY,EAAE,CAAC;QAElC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAQ,CAAC,EAAE,CAAC;YAC7B,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,CAAC,MAAM,EAAE,CAAC;QAChB,CAAC;IACH,CAAC;AACH,CAAC;;IAGC,IAAI,CAAC,MAAM,EAAE,CAAC;AAChB,CAAC;mDAEU,KAAoB;IAC7B,QAAQ,KAAK,CAAC,GAAG,EAAE,CAAC;QAClB,KAAK,QAAQ,CAAC;QACd,KAAK,KAAK;YACR,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,OAAO;QACT,KAAK,OAAO;YACV,IAAI,KAAK,CAAC,MAAM,KAAK,uBAAA,IAAI,gCAAgB,EAAE,CAAC;gBAC1C,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,IAAI,CAAC,SAAS,EAAE,CAAC;YACnB,CAAC;YACD,OAAO;IACX,CAAC;AACH,CAAC;AAtNe,eAAM,GAAG,CAAC,MAAM,CAAC,AAAX,CAAY;AAML;IAA5B,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;yCAAwC;AAKvC;IAA5B,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;0CAAkB;AAOD;IAA5C,QAAQ,CAAC,EAAE,SAAS,EAAE,kBAAkB,EAAE,CAAC;iDAA0B;AAK1B;IAA3C,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;sCAAc;AAG7C;IAAX,QAAQ,EAAE;yCAAkB;AAGA;IAA5B,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;sCAAgB;AAOlB;IAAzB,KAAK,CAAC,SAAS,CAAC;wCAAoC;AAC1B;IAA1B,KAAK,CAAC,UAAU,CAAC;yCAA+B;AACjB;IAA/B,KAAK,CAAC,eAAe,CAAC;6CAAmC;AA+E1C;IADf,WAAW,EAAE;qCAkBb;AAGe;IADf,QAAQ,CAAC,MAAM,CAAC;4CA+BhB;AAGS;IADT,QAAQ,CAAC,SAAS,CAAC;+CAOnB;AAEoB;IAApB,KAAK;8CAKL;AAxLU,QAAQ;IAFpB,aAAa,CAAC,WAAW,CAAC;IAC1B,QAAQ;GACI,QAAQ,CAsRpB","sourcesContent":["import { LitElement, html } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { property } from 'lit/decorators/property.js';\n\nimport { getRandomId } from '@patternfly/pfe-core/functions/random.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { bound, initializer, observes } from '@patternfly/pfe-core/decorators.js';\nimport { SlotController } from '@patternfly/pfe-core/controllers/slot-controller.js';\nimport { ScreenSizeController } from '../../lib/ScreenSizeController.js';\nimport { themable } from '@rhds/elements/lib/themable.js';\n\nimport styles from './rh-dialog.css';\n\nimport { query } from 'lit/decorators/query.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\n\nimport '@rhds/elements/rh-surface/rh-surface.js';\nimport '@rhds/elements/rh-button/rh-button.js';\n\nexport class DialogCancelEvent extends Event {\n  constructor() {\n    super('cancel', { bubbles: true, cancelable: true });\n  }\n}\n\nexport class DialogCloseEvent extends Event {\n  constructor() {\n    super('close', { bubbles: true, cancelable: true });\n  }\n}\n\nexport class DialogOpenEvent extends Event {\n  constructor(\n    /** The trigger element which triggered the dialog to open */\n    public trigger: HTMLElement | null\n  ) {\n    super('open', { bubbles: true, cancelable: true });\n  }\n}\n\nasync function pauseYoutube(iframe: HTMLIFrameElement) {\n  const { pauseVideo } = await import('./yt-api.js');\n  await pauseVideo(iframe);\n}\n\n/**\n * A dialog displays important information to users without requiring them to navigate away from the page.\n *\n * @summary Communicates information requiring user input or action\n *\n * @alias dialog\n *\n * @fires {DialogOpenEvent} open - Fires when a user clicks on the trigger or manually opens a dialog.\n * @fires {DialogCloseEvent} close - Fires when either a user clicks on either the close button or manually closes a dialog.\n * @fires {DialogCancelEvent} cancel - Fires when a user clicks outside the dialog or hits ESC on their keyboard.\n */\n@customElement('rh-dialog')\n@themable\nexport class RhDialog extends LitElement {\n  static readonly styles = [styles];\n\n  /**\n   * The `variant` controls the width of the dialog.\n   * There are three options: `small`, `medium` and `large`. The default is `large`.\n   */\n  @property({ reflect: true }) variant?: 'small' | 'medium' | 'large';\n\n  /**\n   * `position=\"top\"` aligns the dialog with the top of the page\n   */\n  @property({ reflect: true }) position?: 'top';\n\n  /**\n   * Use `accessible-label=\"My custom label\"` to specify the dialog's accessible name.\n   * Defaults to the name of the dialog trigger if no attribute is set and no headings exist in the modal.\n   * See Dialog's Accessibility page for more info.\n   */\n  @property({ attribute: 'accessible-label' }) accessibleLabel?: string;\n\n  /**\n   * `open` / `open=\"open\"` declaratively opens the dialog\n   */\n  @property({ type: Boolean, reflect: true }) open = false;\n\n  /** Optional ID of the trigger element */\n  @property() trigger?: string;\n\n  /** Use `type=\"video\"` to embed a video player into a dialog. */\n  @property({ reflect: true }) type?: 'video';\n\n  /** @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/returnValue */\n  public returnValue = '';\n\n  #screenSize = new ScreenSizeController(this);\n\n  @query('#dialog') private dialog!: HTMLDialogElement;\n  @query('#content') private content!: HTMLElement;\n  @query('#close-button') private closeButton!: HTMLElement;\n\n  #headerId = getRandomId();\n  #triggerElement: HTMLElement | null = null;\n  #header: HTMLElement | null = null;\n  #body: Element[] = [];\n  #headings: Element[] = [];\n  #cancelling = false;\n\n  #slots = new SlotController(this, null, 'header', 'description', 'footer');\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.addEventListener('keydown', this.#onKeyDown);\n    this.addEventListener('click', this.#onClick);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.#triggerElement?.removeEventListener('click', this.onTriggerClick);\n  }\n\n  render() {\n    const headerId = (this.#header || this.#headings.length) ? this.#headerId : undefined;\n    const triggerLabel = this.#triggerElement ? this.#triggerElement.innerText : undefined;\n    const hasHeader = this.#slots.hasSlotted('header');\n    const hasDescription = this.#slots.hasSlotted('description');\n    const hasFooter = this.#slots.hasSlotted('footer');\n    const { mobile } = this.#screenSize;\n    return html`\n      <div id=\"rhds-wrapper\" class=\"${classMap({ mobile })}\">\n        <rh-surface class=\"${classMap({ hasHeader, hasDescription, hasFooter })}\"\n                    ?hidden=\"${!this.open}\">\n          <!-- The dialog element -->\n          <dialog id=\"dialog\"\n                  part=\"dialog\"\n                  aria-labelledby=${ifDefined(this.accessibleLabel ? undefined : headerId)}\n                  aria-label=${ifDefined(this.accessibleLabel ? this.accessibleLabel : (!headerId ? triggerLabel : undefined))}\n                  @cancel=${this.#onNativeDialogCancel}>\n            <!-- The dialog's close button -->\n            <rh-button variant=\"close\"\n                       id=\"close-button\"\n                       part=\"close-button\"\n                       type=\"button\"\n                       @click=${this.close}>\n              <span class=\"visually-hidden\">Close Dialog</span>\n            </rh-button>\n            <!-- The container for the dialog content -->\n            <div id=\"content\" part=\"content\">\n              <!-- The container for the optional dialog header -->\n              <div id=\"header\"\n                   part=\"header\"\n                   ?hidden=${!hasHeader}>\n                <!-- The header is an optional slot that appears at the top of the dialog window. It should be a header tag (h2-h6). -->\n                <slot name=\"header\"></slot>\n                <!-- The container for the optional dialog description in the header -->\n                <div part=\"description\" ?hidden=${!hasDescription}>\n                  <slot name=\"description\"></slot>\n                </div>\n              </div>\n              <div id=\"body\" part=\"body\">\n                <!-- The default slot can contain any type of content. When the header is not present this unnamed slot appear at the top of the dialog window (to the left of the close button). Otherwise it will appear beneath the header. -->\n                <slot></slot>\n              </div>\n              <!-- Actions footer container -->\n              <div id=\"footer\"\n                   part=\"footer\"\n                   ?hidden=${!hasFooter}>\n                <!-- Optional footer content. Good place to put action buttons. -->\n                <slot name=\"footer\"></slot>\n              </div>\n            </div>\n          </dialog>\n        </div>\n      </div>\n    `;\n  }\n\n  @initializer()\n  protected async _init() {\n    await this.updateComplete;\n    this.#header = this.querySelector(`[slot$=\"header\"]`);\n    this.#body = [...this.querySelectorAll(`*:not([slot])`)];\n    this.#headings = this.#body.filter(el => el.tagName.slice(0, 1) === 'H');\n\n    if (this.#triggerElement) {\n      this.#triggerElement.addEventListener('click', this.onTriggerClick);\n      this.removeAttribute('hidden');\n    }\n\n    if (this.#header) {\n      this.#header.id = this.#headerId;\n    } else if (this.#headings.length > 0) {\n      // Get the first heading in the dialog if it exists\n      this.#headings[0].id = this.#headerId;\n    }\n  }\n\n  @observes('open')\n  protected async _openChanged(oldValue?: boolean, open?: boolean) {\n    if (this.type === 'video') {\n      if (oldValue === true && this.open === false) {\n        this.querySelector('video')?.pause?.();\n        const iframe = this.querySelector('iframe');\n        if (iframe?.src.match(/youtube/)) {\n          pauseYoutube(iframe);\n        }\n      }\n    } else if (oldValue == null\n               || open == null\n               // loosening types to prevent running these effects in unexpected circumstances\n               // eslint-disable-next-line eqeqeq\n               || oldValue == open) {\n      return;\n    } else if (open) {\n      // This prevents background scroll\n      document.body.style.overflow = 'hidden';\n      await this.updateComplete;\n      this.dispatchEvent(new DialogOpenEvent(this.#triggerElement));\n    } else {\n      // Return scrollability\n      document.body.style.overflow = 'auto';\n\n      const event = this.#cancelling ? new DialogCancelEvent() : new DialogCloseEvent();\n\n      await this.updateComplete;\n\n      this.dispatchEvent(event);\n    }\n  }\n\n  @observes('trigger')\n  protected _triggerChanged() {\n    if (this.trigger) {\n      this.#triggerElement =\n        (this.getRootNode() as Document | ShadowRoot).getElementById(this.trigger);\n      this.#triggerElement?.addEventListener('click', this.onTriggerClick);\n    }\n  }\n\n  @bound private async onTriggerClick(event: MouseEvent) {\n    event.preventDefault();\n    this.showModal();\n    await this.updateComplete;\n    this.closeButton?.focus();\n  }\n\n  #onClick(event: MouseEvent) {\n    const { open, content } = this;\n    if (open) {\n      const path = event.composedPath();\n\n      if (!path.includes(content!)) {\n        event.preventDefault();\n        this.cancel();\n      }\n    }\n  }\n\n  #onNativeDialogCancel() {\n    this.cancel();\n  }\n\n  #onKeyDown(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Escape':\n      case 'Esc':\n        this.cancel();\n        return;\n      case 'Enter':\n        if (event.target === this.#triggerElement) {\n          event.preventDefault();\n          this.showModal();\n        }\n        return;\n    }\n  }\n\n  async cancel(returnValue?: string) {\n    this.#cancelling = true;\n    this.close(returnValue);\n    this.open = false;\n    await this.updateComplete;\n    this.#cancelling = false;\n  }\n\n  setTrigger(element: HTMLElement) {\n    this.#triggerElement = element;\n    this.#triggerElement.addEventListener('click', this.onTriggerClick);\n  }\n\n  /**\n   * Manually toggles the dialog.\n   * ```js\n   * dialog.toggle();\n   * ```\n   */\n  toggle() {\n    if (!this.open) {\n      this.showModal();\n      this.open = true;\n    } else {\n      this.close();\n    }\n  }\n\n  /**\n   * Manually opens the dialog.\n   * ```js\n   * dialog.show();\n   * ```\n   */\n  show() {\n    this.dialog?.showModal();\n    this.open = true;\n  }\n\n  showModal() {\n    // TODO: non-modal mode\n    this.show();\n  }\n\n  /**\n   * Manually closes the dialog.\n   * @param [returnValue] dialog return value.\n   * @example ```js\n   *          dialog.close();\n   *          ```\n   */\n  close(returnValue?: string) {\n    if (typeof returnValue === 'string') {\n      this.returnValue = returnValue;\n    } else {\n      this.returnValue = '';\n    }\n\n    this.dialog?.close();\n    this.open = false;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-dialog': RhDialog;\n  }\n}\n"]}