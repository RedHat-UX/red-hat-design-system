{"version":3,"file":"rh-footer.js","sourceRoot":"","sources":["rh-footer.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html } from 'lit';\nimport { property } from 'lit/decorators/property.js';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { classMap } from 'lit/directives/class-map.js';\n\nimport { getRandomId } from '@patternfly/pfe-core/functions/random.js';\nimport { Logger } from '@patternfly/pfe-core/controllers/logger.js';\nimport '@patternfly/elements/pf-icon/pf-icon.js';\nimport '@rhds/elements/rh-accordion/rh-accordion.js';\n\nexport { RhFooterUniversal } from './rh-footer-universal.js';\nimport './rh-global-footer.js';\nimport './rh-footer-social-link.js';\nimport './rh-footer-links.js';\nimport './rh-footer-block.js';\n\nimport style from './rh-footer.css';\nimport { colorContextProvider, type ColorPalette } from '../../lib/context/color/provider.js';\nimport { ScreenSizeController } from '../../lib/ScreenSizeController.js';\n\nfunction isHeaderTagName(tagName: string) {\n  return !!tagName.match(/^H[1-6]$/i);\n}\n\n/**\n * @summary Displays secondary information at the bottom of a page\n *\n * @csspart base - main footer element, containing all footer content\n * @slot    base - Overrides everything. Do not use.\n * @slot    header - Overrides `header-*`, `logo`, `social-links`\n * @csspart header - footer header, typically containing main logo and social links\n * @slot    header-primary - primary footer header content, e.g. main logo. Overrides `logo`\n * @csspart header-primary - primary footer header content, e.g. main logo\n * @slot    header-secondary - secondary footer header content, e.g. social links. Overrides `social-links`\n * @csspart header-secondary - secondary footer header content, e.g. social links\n * @slot    heading - text that describes the footer section to assistive tecchnology. Contains default text \"Red Hat footer\".\n * @slot    logo - main page or product logo. Defaults to Red Hat corporate logo\n * @csspart logo - main page or product logo container\n * @slot    social-links - social media links (icons). Contains a default set of links\n * @csspart social-links - social links container `<rh-footer-links>`\n * @slot    main - main footer content. Overrides `main-*`\n * @csspart main - main content container.\n * @slot    main-primary - main footer region. typically a columnar grid\n * @csspart main-primary - container for main footer links\n * @slot    links - main footer links\n * @csspart links - container for main footer links\n * @csspart links-accordion-header - mobile links accordion header element\n * @csspart links-accordion-panel - mobile links panel container element\n * @slot    main-secondary - typically contains prose or promotional content\n * @csspart main-secondary - container fro prose or promotional content\n * @slot    global - must contain `<rh-footer-universal>` {@deprecated - use `universal`}\n * @slot    universal - must contain `<rh-footer-universal>`\n *\n * @cssprop --rh-footer-icon-color - {@default #8a8d90}\n * @cssprop --rh-footer-icon-color-hover - {@default #b8bbbe}\n * @cssprop --rh-footer-border-color - {@default #6a6e73}\n * @cssprop --rh-footer-accent-color - {@default #e00}\n * @cssprop --rh-footer-section-side-gap - {@default 16px}\n * @cssprop --rh-footer-links-gap - {@default 8px}\n * @cssprop --rh-footer-link-header-font-size - {@default 0.875em}\n * @cssprop --rh-footer-nojs-min-height - {@default 750px}\n */\n@customElement('rh-footer')\nexport class RhFooter extends LitElement {\n  static readonly version = '{{version}}';\n\n  static readonly styles = [style];\n\n  /**\n   * Isomorphic import.meta.url function\n   * Requires a node.js dom shim that sets window.location\n   */\n  static getImportURL(relativeLocation: string | URL): string | URL {\n    const url = new URL(relativeLocation, import.meta.url);\n    if (url.protocol === 'file:') {\n      return new URL(relativeLocation, window.location.href);\n    }\n    return url;\n  }\n\n  #logger = new Logger(this);\n\n  #compact = false;\n\n  @colorContextProvider()\n  @property({ reflect: true, attribute: 'color-palette' }) colorPalette: ColorPalette = 'darker';\n\n  override connectedCallback() {\n    super.connectedCallback();\n    // wire up accessibility aria-labels with unordered lists\n    this.updateAccessibility();\n  }\n\n  /**\n   * ScreenSizeController effects callback to set #compact is true when viewport\n   * `(min-width: ${tabletLandscapeBreakpoint})`.\n   */\n  protected screenSize = new ScreenSizeController(this, 'md', {\n    onChange: matches => {\n      this.#compact = !matches;\n    }\n  });\n\n  override render() {\n    return html`\n      <footer class=\"base ${classMap({ isMobile: this.#compact })}\" part=\"base\">\n        <h2 id=\"heading\"><slot name=\"heading\">Red Hat footer</slot></h2>\n        <slot name=\"base\">\n          <div class=\"section header\" part=\"section header\">\n            <slot name=\"header\">\n              <div class=\"header-primary\" part=\"header-primary\">\n                <slot name=\"header-primary\">\n                  <div class=\"logo\" part=\"logo\">\n                    <slot name=\"logo\">\n                      <a href=\"/\">\n                        <img alt=\"Red Hat\" src=\"https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg\"/>\n                      </a>\n                    </slot>\n                  </div>\n                </slot>\n              </div>\n              <div class=\"header-secondary\" part=\"header-secondary\">\n                <slot name=\"header-secondary\">\n                  <div class=\"social-links\">\n                    <rh-footer-links class=\"social-links-item\"\n                      part=\"social-links\"\n                      aria-label=\"Red Hat social media links\"\n                      role=\"list\">\n                      <slot name=\"social-links\"></slot>\n                    </rh-footer-links>\n                  </div>\n                </slot>\n              </div>\n            </slot>\n          </div>\n          <div class=\"section main\" part=\"section main\">\n            <slot name=\"main\">\n              <div class=\"main-primary\" part=\"main-primary\">\n                <slot name=\"main-primary\">\n                  <div class=\"links\" part=\"links\">\n                    ${this.#renderLinksTemplate(this.#compact)}\n                  </div>\n                </slot>\n              </div>\n              <div class=\"main-secondary\" part=\"main-secondary\">\n                <slot name=\"main-secondary\"></slot>\n              </div>\n            </slot>\n          </div>\n          <slot name=\"universal\"><slot name=\"global\"></slot></slot>\n        </slot>\n      </footer>\n    `;\n  }\n\n  #renderLinksTemplate(isMobile = false) {\n    // gather all of the links that need to be wrapped into the accordion\n    // give them a designation of either 'header' or 'panel'\n    const children = Array.from(this.querySelectorAll(':scope > [slot^=links]'));\n\n    // Update the dynamic slot names if on mobile\n    children.forEach((child, i) => child.setAttribute('slot', isMobile ? `links-${i}` : 'links'));\n\n    return !(isMobile && children) ? html`\n      <slot name=\"links\"></slot>\n      ` : html`\n\n      <rh-accordion on=\"dark\" color-palette=\"darkest\">${children.map((child, i) => {\n          const type = isHeaderTagName(child.tagName) ? 'header' : 'panel';\n          // SEE https://github.com/asyncLiz/minify-html-literals/issues/37\n          switch (type) {\n            case 'header': return html`\n              <rh-accordion-header part=\"links-accordion-header\">\n                <slot name=\"links-${i}\"></slot>\n              </rh-accordion-header>`;\n            case 'panel': return html`\n              <rh-accordion-panel part=\"links-accordion-panel\">\n                <slot name=\"links-${i}\"></slot>\n              </rh-accordion-panel>`;\n          }\n        })}\n      </rh-accordion>\n    `;\n  }\n\n  /**\n   * Get any `<ul>`s that are in the designated link slots\n   * and synchronously update each list and header if we need to.\n   */\n  public updateAccessibility(): void {\n    const listsSelector = ':is([slot^=links],[slot=footer-links-primary],[slot=footer-links-secondary]):is(ul)';\n    for (const list of this.querySelectorAll(listsSelector)) {\n      // if we already have a label then we assume that the user\n      // has wired this up themselves.\n      if (!list.hasAttribute('aria-labelledby')) {\n        // get the corresponding header that should be the previous sibling\n        const header = isHeaderTagName(list.previousElementSibling?.tagName ?? '') ? list.previousElementSibling : null;\n        if (!header) {\n          return this.#logger.warn('This links set doesn\\'t have a valid header associated with it.');\n        } else {\n          // add an ID to the header if we need it\n          header.id ||= getRandomId('rh-footer');\n          // add that header id to the aria-labelledby attribute\n          list.setAttribute('aria-labelledby', header.id);\n        }\n      }\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-footer': RhFooter;\n  }\n}\n"]}