{"version":3,"file":"rh-subnav.js","sourceRoot":"","sources":["rh-subnav.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, isServer } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { query } from 'lit/decorators/query.js';\nimport { property } from 'lit/decorators/property.js';\nimport { state } from 'lit/decorators/state.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\n\nimport { OverflowController } from '@patternfly/pfe-core/controllers/overflow-controller.js';\nimport { colorPalettes, type ColorPalette } from '@rhds/elements/lib/color-palettes.js';\nimport { themable } from '@rhds/elements/lib/themable.js';\n\nimport { RhNavigationLink } from '@rhds/elements/rh-navigation-link/rh-navigation-link.js';\n\nimport '@rhds/elements/rh-icon/rh-icon.js';\n\nimport styles from './rh-subnav.css';\n\n\ntype LinkElement = HTMLAnchorElement | RhNavigationLink;\n\n/**\n * A subnavigation allows users to navigate between a small number of page links.\n *\n * @summary Organizes content into sections using tabbed pages\n *\n * @alias subnavigation\n */\n@customElement('rh-subnav')\n@colorPalettes\n@themable\nexport class RhSubnav extends LitElement {\n  static readonly styles = [styles];\n\n  private static instances = new Set<RhSubnav>();\n\n  static {\n    // on resize check for overflows to add or remove scroll buttons\n    if (!isServer) {\n      globalThis.addEventListener('resize', () => {\n      // this appears to be an eslint bug.\n      // `this` should refer to the class, but in the minified bundle, it is void\n        const { instances } = RhSubnav;\n        for (const instance of instances) {\n          instance.#overflow.onScroll();\n        }\n      }, { capture: false });\n    }\n  }\n\n  #allLinkElements: LinkElement[] = [];\n\n  #overflow = new OverflowController(this);\n\n  @state() private hasNavigationLinks = false;\n\n  /**\n   * Sets color palette, which affects the element's styles as well as descendants' color theme.\n   * Overrides parent color context.\n   * Your theme will influence these colors so check there first if you are seeing inconsistencies.\n   * See [CSS Custom Properties](#css-custom-properties) for default values\n   * @deprecated `<rh-subnav>` reacts to the parent set color-scheme and should not set its own color-palette.\n   * The color-palette attribute will be removed in a future release.\n   */\n  @property({ reflect: true, attribute: 'color-palette' }) colorPalette?: ColorPalette;\n\n  /**\n   * Customize the default `aria-label` on the `<nav>` container.\n   * Defaults to \"subnavigation\" if no attribute/property is set.\n   */\n  @property({ attribute: 'accessible-label' }) accessibleLabel = 'subnavigation';\n\n  /**\n   * Label for the scroll back button\n   */\n  @property({ reflect: true, attribute: 'label-scroll-left' })\n  labelScrollLeft = 'Scroll back';\n\n  /**\n   * Label for the scroll forward button\n   */\n  @property({ reflect: true, attribute: 'label-scroll-right' })\n  labelScrollRight = 'Scroll forward';\n\n\n  @query('#link-container') private linkList!: LinkElement;\n\n\n  get #allLinks() {\n    return this.#allLinkElements;\n  }\n\n  set #allLinks(links: LinkElement[]) {\n    this.#allLinkElements = links.filter(link => link);\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    RhSubnav.instances.add(this);\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    RhSubnav.instances.delete(this);\n  }\n\n  protected override firstUpdated() {\n    this.linkList.addEventListener('scroll', this.#overflow.onScroll.bind(this));\n    this.#onSlotchange();\n  }\n\n  override render() {\n    return html`\n      <!-- container, \\`<div>\\` element -->\n      <nav part=\"container\" \n           aria-label=\"${this.accessibleLabel}\">\n        ${!this.#overflow.showScrollButtons ? '' : html`\n          <button id=\"previous\"\n                  tabindex=\"-1\"\n                  data-direction=\"start\"\n                  aria-label=\"${this.labelScrollLeft}\"\n                  ?disabled=\"${!this.#overflow.overflowLeft}\"\n                  @click=\"${this.#onClickScroll}\">\n            <rh-icon set=\"ui\" icon=\"caret-left\" loading=\"eager\"></rh-icon>\n          </button>`}\n        <!--\n          slot:\n            description: Sub navigation links, expects collection of \\`<a>\\` or \\`<rh-navigation-link>\\` elements\n            Slotting a \\`<a>\\` element is deprecated and will be removed in a future release. Use \\`<rh-navigation-link>\\` instead.\n          part:\n            description: the anonymous slot\n        -->\n        <div id=\"link-container\" role=\"${ifDefined(this.hasNavigationLinks ? 'list' : undefined)}\" >\n          <slot @slotchange=\"${this.#onSlotchange}\" part=\"links\"></slot>\n        </div>\n        ${!this.#overflow.showScrollButtons ? '' : html`\n          <button id=\"next\"\n                  tabindex=\"-1\"\n                  data-direction=\"end\"\n                  aria-label=\"${this.labelScrollRight}\"\n                  ?disabled=\"${!this.#overflow.overflowRight}\"\n                  @click=\"${this.#onClickScroll}\">\n            <rh-icon set=\"ui\" icon=\"caret-right\" loading=\"eager\"></rh-icon>\n          </button>`}\n      </nav>\n    `;\n  }\n\n  async #onSlotchange() {\n    if (!isServer) {\n      const slot = this.shadowRoot?.querySelector('slot');\n      const assignedElements = (slot?.assignedElements() || []) as LinkElement[];\n\n      // if slotted a elements remove active attribute replace it with aria-current=\"page\"\n      for (const element of assignedElements) {\n        if (element instanceof HTMLAnchorElement) {\n          // if has active attribute remove it and set aria-current=\"page\"\n          if (element.hasAttribute('active')) {\n            element.removeAttribute('active');\n            element.setAttribute('aria-current', 'page');\n          }\n        }\n      }\n\n      // Only use role=\"list\" if we have rh-navigation-link elements\n      this.hasNavigationLinks = assignedElements.some(el => el instanceof RhNavigationLink);\n\n      this.#allLinks = assignedElements;\n\n      this.#overflow.init(this.linkList, this.#allLinks);\n\n      await this.updateComplete;\n    }\n  }\n\n  #onClickScroll(event: Event) {\n    if (event.target instanceof HTMLElement) {\n      switch (event.target.dataset.direction) {\n        case 'start':\n          if (this.matches(':dir(rtl)')) {\n            this.#overflow.scrollRight();\n          } else {\n            this.#overflow.scrollLeft();\n          }\n          break;\n        case 'end':\n          if (this.matches(':dir(rtl)')) {\n            this.#overflow.scrollLeft();\n          } else {\n            this.#overflow.scrollRight();\n          }\n          break;\n      }\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-subnav': RhSubnav;\n  }\n}\n"]}