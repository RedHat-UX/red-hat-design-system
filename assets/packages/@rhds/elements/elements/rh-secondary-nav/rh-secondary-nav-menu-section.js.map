{"version":3,"file":"rh-secondary-nav-menu-section.js","sourceRoot":"","sources":["rh-secondary-nav-menu-section.ts"],"names":[],"mappings":";;AAAA,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,aAAa,EAAE,MAAM,kCAAkC,CAAC;AAEjE,OAAO,EAAE,WAAW,EAAE,MAAM,0CAA0C,CAAC;AACvE,OAAO,EAAE,MAAM,EAAE,MAAM,4CAA4C,CAAC;AAEpE,OAAO,EAAE,gBAAgB,EAAE,MAAM,wBAAwB,CAAC;;;AAI1D;;;;;;;;GAQG;AAEI,IAAM,yBAAyB,GAA/B,MAAM,yBAA0B,SAAQ,UAAU;IAAlD;;;QAGL,4CAAU,IAAI,MAAM,CAAC,IAAI,CAAC,EAAC;IA0C7B,CAAC;IAxCC,iBAAiB;QACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAE1B,uBAAA,IAAI,4FAAqB,MAAzB,IAAI,CAAuB,CAAC;IAC9B,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;;;;;;KAMV,CAAC;IACJ,CAAC;;;IAUC,MAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,gCAAgC,CAAC,CAAC;IAEtE,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;QACxB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,EAAE;YACzC,MAAM,MAAM,GAAG,gBAAgB,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,IAAI,CAAC;YAClG,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO,uBAAA,IAAI,yCAAQ,CAAC,IAAI,CAAC,iEAAiE,CAAC,CAAC;aAC7F;iBAAM;gBACL,wCAAwC;gBACxC,MAAM,CAAC,EAAE,KAAT,MAAM,CAAC,EAAE,GAAK,WAAW,CAAC,+BAA+B,CAAC,EAAC;gBAC3D,gDAAgD;gBAChD,IAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;aACjD;SACF;KACF;AACH,CAAC;AA3Ce,gCAAM,GAAG,CAAC,MAAM,CAAC,CAAC;AADvB,yBAAyB;IADrC,aAAa,CAAC,+BAA+B,CAAC;GAClC,yBAAyB,CA6CrC;SA7CY,yBAAyB","sourcesContent":["import { html, LitElement } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\n\nimport { getRandomId } from '@patternfly/pfe-core/functions/random.js';\nimport { Logger } from '@patternfly/pfe-core/controllers/logger.js';\n\nimport { isHeadingElement } from '../../lib/functions.js';\n\nimport styles from './rh-secondary-nav-menu-section.css';\n\n/**\n * @summary 'A menu section which auto upgrades header and sibling link list accessibility attributes'\n *\n * @slot header     - Adds a header tag to section, expects `<h1>, <h2>, <h3>, <h4>, <h5>, <h6>`\n * @slot links      - Adds a ul tag to section, expects `<ul>, <ol>`\n * @slot cta        - Adds a section level CTA, expects `<rh-cta>`\n *\n * @csspart base    - container, <section> element\n**/\n@customElement('rh-secondary-nav-menu-section')\nexport class RhSecondaryNavMenuSection extends LitElement {\n  static readonly styles = [styles];\n\n  #logger = new Logger(this);\n\n  connectedCallback(): void {\n    super.connectedCallback();\n\n    this.#updateAccessibility();\n  }\n\n  render() {\n    return html`\n      <section part=\"container\">\n        <slot name=\"header\"></slot>\n        <slot name=\"links\"></slot>\n        <slot name=\"cta\"></slot>\n      </section>\n    `;\n  }\n\n  /**\n   * Finds all list elements `<ul>, <ol>` and if the list does not have an\n   * `aria-labelledby` attribute finds the previousElementSibling header\n   * `<h1-6>` tags if available assigns an id or uses preexisting id\n   * to that header, then uses that id to the list on the `aria-labelledby`.\n   * @returns {void}\n   */\n  #updateAccessibility(): void {\n    const lists = this.querySelectorAll(':is([slot=\"links\"]):is(ul, ol)');\n\n    for (const list of lists) {\n      if (!list.hasAttribute('aria-labelledby')) {\n        const header = isHeadingElement(list.previousElementSibling) ? list.previousElementSibling : null;\n        if (!header) {\n          return this.#logger.warn('This links set doesn\\'t have a valid header associated with it.');\n        } else {\n          // add an ID to the header if we need it\n          header.id ||= getRandomId('rh-secondary-nav-menu-section');\n          // add that header id to the aria-labelledby tag\n          list.setAttribute('aria-labelledby', header.id);\n        }\n      }\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'rh-secondary-nav-menu-section': RhSecondaryNavMenuSection;\n  }\n}\n"]}