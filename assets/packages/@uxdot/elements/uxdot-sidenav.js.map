{"version":3,"file":"uxdot-sidenav.js","sourceRoot":"","sources":["uxdot-sidenav.ts"],"names":[],"mappings":";;AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,KAAK,CAAC;AAEjD,OAAO,EAAE,aAAa,EAAE,MAAM,kCAAkC,CAAC;AACjE,OAAO,EAAE,QAAQ,EAAE,MAAM,4BAA4B,CAAC;AAEtD,OAAO,EAAE,QAAQ,EAAE,MAAM,gCAAgC,CAAC;AAE1D,OAAO,mCAAmC,CAAC;;;AAMpC,IAAM,YAAY,GAAlB,MAAM,YAAa,SAAQ,UAAU;IAArC;;;QAKuC,SAAI,GAAG,KAAK,CAAC;QAIzD,uCAAsC,IAAI,EAAC;QAE3C,oCAAmC,IAAI,EAAC;IAsH1C,CAAC;IApHC,KAAK,CAAC,iBAAiB;QACrB,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAE1B,IAAI,CAAC,QAAQ,EAAE,CAAC;YACd,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,EAA2B,CAAC;YACzD,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;gBACjB,uBAAA,IAAI,gCAAmB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,MAAA,CAAC;YAC3D,CAAC;YACD,uBAAA,IAAI,oCAAgB,EAAE,gBAAgB,CAAC,OAAO,EAAE,uBAAA,IAAI,6DAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACjF,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,uBAAA,IAAI,sDAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACzD,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,uBAAA,IAAI,wDAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC7D,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,uBAAA,IAAI,sDAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;IAED,oBAAoB;QAClB,KAAK,CAAC,oBAAoB,EAAE,CAAC;QAC7B,uBAAA,IAAI,oCAAgB,EAAE,mBAAmB,CAAC,OAAO,EAAE,uBAAA,IAAI,6DAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACpF,MAAM,CAAC,mBAAmB,CAAC,OAAO,EAAE,uBAAA,IAAI,sDAAS,CAAC,CAAC;IACrD,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;;;;;;yBAMU,uBAAA,IAAI,mEAAsB;uBAC5B,IAAI,CAAC,MAAM;;;;;;;;iDAQe,CAAC,IAAI,CAAC,IAAI;KACtD,CAAC;IACJ,CAAC;IAED,OAAO;QACL,uBAAA,IAAI,6BAAgB,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,cAAc,CAAC,IAAI,IAAI,MAAA,CAAC;IAC9E,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI;QAC3B,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;QACvB,MAAM,IAAI,CAAC,cAAc,CAAC;QAE1B,IAAI,SAAS,EAAE,CAAC;YACd,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;gBACd,uBAAA,IAAI,iCAAa,EAAE,KAAK,EAAE,CAAC;YAC7B,CAAC;iBAAM,CAAC;gBACN,uBAAA,IAAI,oCAAgB,EAAE,KAAK,EAAE,CAAC;YAChC,CAAC;QACH,CAAC;IACH,CAAC;IA+CD,KAAK,CAAC,SAAS,GAAG,IAAI;QACpB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YACf,OAAO;QACT,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;IACzB,CAAC;;;;;qEAlDe,KAAY;IAC1B,KAAK,CAAC,cAAc,EAAE,CAAC;IACvB,IAAI,CAAC,MAAM,EAAE,CAAC;AAChB,CAAC;uDAEQ,KAAY;IACnB,MAAM,IAAI,GAAG,KAAK,CAAC,YAAY,EAAE,CAAC;IAClC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC;QACzB,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;AACH,CAAC;iFAEqB,KAAoB;IACxC,QAAQ,KAAK,CAAC,GAAG,EAAE,CAAC;QAClB,KAAK,OAAO;YACV,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,OAAO;IACX,CAAC;AACH,CAAC;2DAEU,KAAoB;IAC7B,QAAQ,KAAK,CAAC,GAAG,EAAE,CAAC;QAClB,KAAK,QAAQ,CAAC,CAAC,CAAC;YACd,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;gBACf,OAAO;YACT,CAAC;YACD,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,MAAM;QACR,CAAC;QACD;YACE,MAAM;IACV,CAAC;AACH,CAAC;uDAEQ,KAAoB;IAC3B,QAAQ,KAAK,CAAC,GAAG,EAAE,CAAC;QAClB,KAAK,KAAK;YACR,uBAAA,IAAI,yDAAY,MAAhB,IAAI,EAAa,KAAK,CAAC,CAAC;YACxB,MAAM;QACR;YACE,MAAM;IACV,CAAC;AACH,CAAC;6DASW,KAAoB;IAC9B,MAAM,EAAE,MAAM,EAAE,GAAG,KAAK,CAAC;IACzB,IAAI,MAAM,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC;QACrD,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IACpB,CAAC;AACH,CAAC;AA/HM,8BAAiB,GAAG,EAAE,GAAG,UAAU,CAAC,iBAAiB,EAAE,cAAc,EAAE,IAAI,EAAE,AAA5D,CAA6D;AAE9E,mBAAM,GAAG,CAAC,MAAM,CAAC,AAAX,CAAY;AAEmB;IAA3C,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;0CAAc;AAE7C;IAAX,QAAQ,EAAE;6CAAkB;AAPlB,YAAY;IAFxB,aAAa,CAAC,eAAe,CAAC;IAC9B,QAAQ;GACI,YAAY,CAiIxB","sourcesContent":["import { LitElement, html, isServer } from 'lit';\n\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { property } from 'lit/decorators/property.js';\n\nimport { themable } from '@rhds/elements/lib/themable.js';\n\nimport '@rhds/elements/rh-icon/rh-icon.js';\n\nimport styles from './uxdot-sidenav.css';\n\n@customElement('uxdot-sidenav')\n@themable\nexport class UxdotSideNav extends LitElement {\n  static shadowRootOptions = { ...LitElement.shadowRootOptions, delegatesFocus: true };\n\n  static styles = [styles];\n\n  @property({ type: Boolean, reflect: true }) open = false;\n\n  @property() trigger?: string;\n\n  #triggerElement: HTMLElement | null = null;\n\n  #closeButton: HTMLElement | null = null;\n\n  async connectedCallback() {\n    super.connectedCallback();\n\n    if (!isServer) {\n      const root = this.getRootNode() as Document | ShadowRoot;\n      if (this.trigger) {\n        this.#triggerElement = root.getElementById(this.trigger);\n      }\n      this.#triggerElement?.addEventListener('click', this.#onTriggerClick.bind(this));\n      this.addEventListener('click', this.#onClick.bind(this));\n      this.addEventListener('keydown', this.#onKeydown.bind(this));\n      window.addEventListener('keyup', this.#onKeyup.bind(this));\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.#triggerElement?.removeEventListener('click', this.#onTriggerClick.bind(this));\n    window.removeEventListener('keyup', this.#onKeyup);\n  }\n\n  render() {\n    return html`\n      <div id=\"container\" part=\"container\">\n        <div id=\"close-button-container\">\n          <button id=\"close-button\"\n              part=\"close-button\"\n              aria-label=\"Close dialog\"\n              @keydown=${this.#onKeydownCloseButton}\n              @click=${this.toggle}>\n            <rh-icon set=\"ui\" icon=\"close\" size=\"lg\"></rh-icon>\n          </button>\n        </div>\n        <div id=\"content\">\n          <slot></slot>\n        </div>\n      </div>\n      <div id=\"overlay\" part=\"overlay\" ?hidden=${!this.open}></div>\n    `;\n  }\n\n  updated() {\n    this.#closeButton = this.shadowRoot?.getElementById('close-button') ?? null;\n  }\n\n  async toggle(trapFocus = true) {\n    this.open = !this.open;\n    await this.updateComplete;\n\n    if (trapFocus) {\n      if (this.open) {\n        this.#closeButton?.focus();\n      } else {\n        this.#triggerElement?.focus();\n      }\n    }\n  }\n\n  #onTriggerClick(event: Event) {\n    event.preventDefault();\n    this.toggle();\n  }\n\n  #onClick(event: Event) {\n    const path = event.composedPath();\n    if (!path.includes(this)) {\n      this.toggle();\n    }\n  }\n\n  #onKeydownCloseButton(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Enter':\n        event.preventDefault();\n        this.toggle();\n        return;\n    }\n  }\n\n  #onKeydown(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Escape': {\n        if (!this.open) {\n          return;\n        }\n        this.toggle();\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  #onKeyup(event: KeyboardEvent) {\n    switch (event.key) {\n      case 'Tab':\n        this.#onTabKeyup(event);\n        break;\n      default:\n        break;\n    }\n  }\n\n  close(trapFocus = true) {\n    if (!this.open) {\n      return;\n    }\n    this.toggle(trapFocus);\n  }\n\n  #onTabKeyup(event: KeyboardEvent) {\n    const { target } = event;\n    if (target instanceof Node && !this.contains(target)) {\n      this.close(false);\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'uxdot-sidenav': UxdotSideNav;\n  }\n}\n"]}